/*!
  Microsoft LightSwitch JavaScript Library v2.5.0
  Copyright (C) Microsoft Corporation. All rights reserved.
*/
(function(n,t){"use strict";var rt=n.Object,l=n.WinJS,yv=n.jQuery,i=yv,ct=n.Globalize,r=rt.create({}),ui=n.setTimeout,ko=n.clearTimeout,ir,wu,ie,yi,pr,ci,uf,f,w,dh,gh,re,go,ni,ns,y,ru,e,ut,vt,nc,lr,ts,dt,li,bu,tt,o,s,tc,is,pi,d,ff,uu,h,ic,ei,fi,ue,ku,wi,rc,uc,k,fe,at,du,fc,ee,u,ec,wr,fu,oe,rs,bi,it,gu,rr,nf,oc,ot,br,se,ii,sc,eu,us,hc,cc,lc,ac,vc,yc,fs,ou,es,pc,he,os,ss,ce,hs,st,su,ki,ur,kr,dr,ar,hu,ef,of,sf,wc,ai,cu,vr,bc,kc,dc,gc,nl,tl,il,rl,ul,fl,cs,lu,gr,el,hf,le,ae,ol,sl,fr,hl,cl,ll,al,vl,yl,pl,ls,as,wl,cf,ve,ye,lf,af,vs,ys,bl,ps,ws,kl,dl,vf,pt,pe,au,we,gl,be,bs,pv,ti,g,nu,ke,ks,de,ds,ft,di,ge,wv,na,ta,ia,ra,op,gs,si,nh,vi,er,ht,gi,nt,th,no,to,io,yf,ua,or,ca,ri,hv,kt,c,lt,vo,fp,ch,pu,tf,df,rf,lh,ah,cv,yo,nr,lv,yr,tr,sr,oi,av,vh,yh,a,v,p,yt,b,po,wo,cr,wh,bh,ep,te,kh;(function(){function s(n,t,r,u){var h,f,c,e,o,s;if(!n||!t)return null;for(h=n.split(r),f=0,c=h.length;f<c;f++)if(e=h[f],o=e.indexOf("="),o>0&&i.trim(e.substr(0,o))===t)return s=e.substr(o+1),u&&(s=decodeURIComponent(s)),s;return null}function h(n,t){var e={},o,r,u,f;if(!n)return e;for(o=n.split(t),r=0;r<o.length;r++)f=o[r],u=f.indexOf("="),u>0&&(e[i.trim(f.substr(0,u))]=f.substr(u+1));return e}var o=rt.prototype.toString,e=rt.getPrototypeOf(r)!==rt.prototype?rt.getPrototypeOf(r):null,t,u;ir=!n.msls,t=n.location,u=t.protocol+"//"+t.host+t.pathname,wu=u.substring(0,u.lastIndexOf("/")),ie=wu.substring(0,wu.lastIndexOf("/")),yi={enableModalScrollRegions:null,showContentBehindDialog:null,transitionAnimationLevel:null,disableUrlScreenParameters:null,defaultMergeOption:null},dh=function(n,t){var r="[\\?&]"+t+"=([^&#]*)",u=new RegExp(r),i=u.exec(n);return i?i[1]:null},gh=function(n,t){var u,f,i,r;return(u=new RegExp("[?]"+t+"=[^&;]*[&;]?"),i=u.exec(n),i)?n.replace(i[0],"?"):(f=new RegExp("[&;]"+t+"=[^&;]*"),r=f.exec(n),r)?n.replace(r[0],""):n},pr=function(t){var i,u,f,r,e;return t?(i=dh(n.location.href,t),i)?i:(u="msls-client-parameters",f=document.cookie,r=s(f,u,";",!0),r&&(e=h(r,"&"),i=e[t]),i):null},ci=function(n){return!!n&&o.call(n)==="[object Function]"},uf=function(n,t){var i=n===t;return i||!n||!t||!n.valueOf||n.valueOf!==t.valueOf||(i=n.valueOf()===t.valueOf()),i},f=function(n,t,i,r){t.charCodeAt(0)===95||r?rt.prototype.hasOwnProperty.call(n,t)?n[t]=i:rt.defineProperty(n,t,{configurable:!0,enumerable:!ir,writable:!0,value:i}):n[t]=i},w=function(n,t,i){e&&f(e,n,t,i)},re=function(n){return go(i.mobile.path.parseUrl(n).hash)},go=function(n){var t={},r,u,f,i;if(n&&(r=n.split("/"),r.length>1)){for(t.screenName=decodeURIComponent(r[1]),t.screenParameters=[],u=2,f=r.length;u<f;u++)t.screenParameters.push(decodeURIComponent(r[u]));i=t.screenParameters.pop(),i.charAt(0)==="["&&i.charAt(i.length-1)==="]"?t.pageId=i.substring(1,i.length-1):t.screenParameters.push(i)}return t}})(),function(){function a(){for(++h===l&&(clearInterval(c),r=!1);t.length;){var n=t.shift(),u=n.invokeTime,i=n.nativeHandle;n.nativeHandle=f(n.action,Math.max(u-Date.now(),0),n.args),i&&o(i)}}function e(){r||(c=setInterval(a,s),r=!0),h=0}function v(n,i,u){var o={action:n,invokeTime:Date.now()+(i||0),args:u,invoked:!1,nativeHandle:null};return r?(t.push(o),Date.now()-o.invokeTime>s?e():o.nativeHandle=f(function(){if(!o.invoked){o.invoked=!0,o.action();var n=t.indexOf(o);t.splice(n,1)}},i,u),o):(o.nativeHandle=f(n,i,u),o)}function y(n){var i;n.nativeHandle&&(o(n.nativeHandle),n.nativeHandle=null),i=t.indexOf(n),i!==-1&&t.splice(i,1)}function p(){u=!0;try{while(i.length)i.shift()()}finally{u=!1}}var f=n.setTimeout,o=n.clearTimeout,s=100,l=30,h=0,c,r=!1,t=[],i,u;navigator.userAgent.match(/OS 6(_\d)+/i)&&(ui=v,ko=y,n.addEventListener("touchstart",e,!0),n.addEventListener("touchend",e,!0)),i=[],u=!1,ni=function(n){i.push(n),i.length!==1||u||ui(p,0)}}(),function(){function u(n){var u,e,r,i,f,o;if(!n)return{};for(u={},e=rt.keys(n),f=0,o=e.length;f<o;f++)r=e[f],i=n[r],i&&typeof i=="object"&&("value"in i||"get"in i||ci(i.defineOn))?(i.configurable===t&&(i.configurable=!0),ir||(i.enumerable=!0),i.get||i.writable!==t||(i.writable=!0),ci(i.defineOn)?i.enumerable===t&&(i.enumerable=r.charCodeAt(0)!==95):u[r]=i):u[r]=i;return u}function f(n,t){var u,f,i,r,e;if(t)for(u=rt.keys(t),r=0,e=u.length;r<e;r++)f=u[r],i=t[f],i&&typeof i=="object"&&ci(i.defineOn)&&i.defineOn(n,f)}function i(n,t,i){var e=u(i),r=l.Namespace.defineWithParent(n,t,e);return f(r,i),r}ns=function(n){return n&&typeof n=="object"&&("value"in n||"get"in n)&&(n={value:n}),n},y=function(n,t){return{get:n,set:t}},ru=function(n,t){return n?i(r,n,t):i({msls:r},"msls",t)},e=function(n,t,r,e,o,s){var c=u(o),a=u(s),h;return e?l.Class.derive(e,r,c,a):l.Class.define(r,c,a),f(r.prototype,o),f(r,s),t&&(h={},h[t]=r,n&&typeof n!="string"?i({_:n},"_",h):ru(n,h)),r},ut=function(n){for(var r=[n],t=1,i=arguments.length;t<i;t++)r.push(u(arguments[t]));for(l.Class.mix.apply(null,r),t=1,i=arguments.length;t<i;t++)f(n.prototype,arguments[t])},vt=function(n,t){var u=rt.keys(t)[0],f=t[u],e,r={};return r[u]=ns(f),e=n&&typeof n!="string"?i({_:n},"_",r):ru(n,r),f},nc=function(n,t){if(n)for(var i in n)if(n[i]===t)return!0;return!1},w("_addToNamespace",function(t,r){return i(n,t,r)})}(),function(){function t(t,i){var u=this,r=n.eventMixin;t.addEventListener||(t.addEventListener=r.addEventListener),t.dispatchEvent||rt.defineProperty(t,"dispatchEvent",{configurable:!0,enumerable:!ir,writable:!0,value:r.dispatchEvent}),t.removeEventListener||(t.removeEventListener=r.removeEventListener),u.noProperty||rt.defineProperties(t,n.createEventProperties(i))}function i(n,t){var i=this,r=n.dispatchEvent,u=i.value;rt.defineProperty(n,t,{configurable:!0,enumerable:!ir,writable:!0,value:function(n,t){return u.call(this,n,t,r)}})}var n=l.Utilities;lr=function(n){return{noProperty:n,defineOn:t}},ts=function(n){return{value:n,defineOn:i}}}(),function(){var t=new(l.Class.mix(null,l.Utilities.eventMixin));dt=function(n,i){t.addEventListener(n,i)},li=function(n,i){t.removeEventListener(n,i)},bu=function(n,t){function i(){li(n,i),t.apply(this,arguments)}dt(n,i)},tt=function(n,i){t.dispatchEvent(n,i)},(!!n.msls||n.__mslsTestMode)&&(w("subscribe",dt),w("unsubscribe",li))}(),function(){function i(n,t){t&&o(n,new Date(t))}var u=!!n.__mslsTestMode,e="codeMarkerNotification",r=u?[]:null,f,t;o=function(n,t){if(u){var i={marker:n,time:t||new Date};r?r.push(i):tt(e,i)}},tc=function(){u&&!!r&&(r.forEach(function(n){tt(e,n)}),r=null)},u&&(f=n.performance,t=f&&f.timing,t&&(i("Application.NavigationStart",t.navigationStart),i("Application.ConnectServerStart",t.connectStart),i("Application.ConnectServerReady",t.connectEnd),i("Application.RequestHtml",t.requestStart),i("Application.GetHtmlStart",t.responseStart),i("Application.GetHtmlEnd",t.responseEnd),i("Application.LoadDomStart",t.domLoading),i("Application.DomParsed",t.domInteractive)),n.startupTime&&o("Application.ScriptStart",n.startupTime)),s={applicationDomLoaded:"Application.LoadDomEnd",applicationRun:"Application.Run",dispatchStart:"DispatchOperationCodeQueue.Start",dispatchEnd:"DispatchOperationCodeQueue.End",loadResourcesStart:"LoadResources.Start",loadResourcesEnd:"LoadResources.End",loadModelStart:"LoadModel.Start",loadModelEnd:"LoadModel.End",parseModelStart:"ParseModel.Start",parseModelEnd:"ParseModel.End",processModelStart:"ProcessModel.Start",processModelEnd:"ProcessModel.End",loadSharePointStart:"LoadSharePoint.Start",loadSharePointEnd:"LoadSharePoint.End",queryDataStart:"QueryData.Start",queryDataEnd:"QueryData.End",queryDataApplyEnd:"QueryData.ApplyEnd",saveDataStart:"SaveData.Start",saveDataEnd:"SaveData.End",loadScreenStart:"LoadScreen.Start",loadScreenEnd:"LoadScreen.End",pageActivationStart:"PageActivation.Start",pageActivationEnd:"PageActivation.End",createPageStart:"CreatePage.Start",createPageEnd:"CreatePage.End",navigationStart:"Navigation.Start",navigationEnd:"Navigation.End",navigationBackEnd:"NavigationBack.End",cleanNavigationStackStart:"CleanNavigationStack.Start",cleanNavigationStackEnd:"CleanNavigationStack.End",transitionPrepare:"Transition.Prepare",transitionStart:"Transition.Start",transition_Stage1Start:"Transition_Stage1.Start",transition_Stage2Start:"Transition_Stage2.Start",transition_Stage3Start:"Transition_Stage3.Start",transition_CleanupStart:"Transition_Cleanup.Start",transitionEnd:"Transition.End",fillCollectionStart:"FillCollection.Start",fillCollectionEnd:"FillCollection.End",controlViewCreating:"ControlViewCreating",controlViewCreated:"ControlViewCreated",listViewLoadStart:"ListViewLoad.Start",listViewLoadDataLoaded:"ListViewLoad.DataLoaded",listViewLoadApplyEnd:"ListViewLoad.ApplyEnd",listViewLoadLoadMore:"ListViewLoad.LoadMore",listViewLoadEnhanceView:"ListViewLoad.EnhanceView",listViewLoadEnd:"ListViewLoad.End",listItemClicked:"ItemClicked",listSelectedItemChanged:"SelectedItemChanged",tableLoadStart:"TableLoad.Start",tableLoadDataLoaded:"TableLoad.DataLoaded",tableLoadApplyEnd:"TableLoad.ApplyEnd",tableLoadLoadMore:"TableLoad.LoadMore",tableLoadEnhanceView:"TableLoad.EnhanceView",tableLoadEnd:"TableLoad.End",tableItemClicked:"TableItemClicked",tableSelectedItemChanged:"TableSelectedItemChanged",modalViewShowStart:"ModalViewShow.Start",modalViewShowEnd:"ModalViewShow.End",modalViewCloseStart:"ModalViewClose.Start",modalViewCloseEnd:"ModalViewClose.End",userTap:"User.Tap",executeActionStart:"ExecuteAction.Start",executeActionEnd:"ExecuteAction.End",layoutPartialRequest:"Layout.PartialReq",layoutFullRequest:"Layout.FullReq",layoutStart:"Layout.Start",layoutEnd:"Layout.End",layoutEndNotified:"Layout.EndNotified",updateAttachedLabelsStart:"UpdateLabels.Start",updateAttachedLabelsEnd:"UpdateLabels.End",goUrlStart:"GoUrl.Start",goUrlEnd:"GoUrl.End",changePageStart:"ChangePage.Start",changePageEnd:"ChangePage.End",createTemplateStart:"CreateTemplate.Start",createTemplateEnd:"CreateTemplate.End",createPageControlsStart:"CreatePageControls.Start",createPageControlsEnd:"CreatePageControls.End",getPopupContentStart:"GetPopupContent.Start",getPopupContentEnd:"GetPopupContent.End",openPopupStart:"OpenPopup.Start",openPopupEnd:"OpenPopup.End",closePopupStart:"ClosePopup.Start",closePopupEnd:"ClosePopup.End",createPopupStart:"CreatePopup.Start",createPopupEnhance:"CreatePopup.Enhance",createPopupEnd:"CreatePopup.End",progressShow:"Progress.Show",progressHide:"Progress.Hide"}}(),function(){is=function(n){return rt.keys(n).map(function(t){return n[t]})}}(),function(){function t(n){var t=this,r=t._promise,i=t._promise=new l.Promise(function(u){ui(function(){if(t._promise!==i){u();return}r?r.then(function(){if(t._promise!==i){u();return}n(),t._promise=null}):(n(),t._promise=null)},t.timeOut)});return i}var n=500;e(r,"DelayedRequest",function(){},null,{timeOut:n,addRequest:t})}(),function(){function n(n){this._array=n,this._length=n.length,this._index=-1}e(r,"Sequence",function(){},null,{array:y(function(){var n=[];return this.each(function(){n.push(this)}),n}),each:function(n){var t=this._iterator?this._iterator():null,i;if(t)while(t.next())if(i=t.item(),n.call(i,i)===!1)break}}),pi=r.Sequence,e(pi,"Array",function(n){pi.call(this),f(this,"_array",n)},pi,{_iterator:function(){return new n(this._array)}}),n.prototype.next=function(){return++this._index<this._length},n.prototype.item=function(){return this._array[this._index]},d=function(n){return new pi.Array(n)},w("Sequence",pi),w("iterate",d)}(),ff="change",function(){function u(n,t){if(i.length){var r=n._dependents||{},u=r[t];u||(f(n,"_dependents",r),u=r[t]=[]),u.push(i[i.length-1])}}function s(n,t,r){var u=n._trackingStub;u||f(n,"_trackingStub",u={o:n}),i.push({trackingStub:u,name:t,version:r})}function c(){i.pop()}function l(n){var t=n.trackingStub.o,i,u,r;t&&(i=n.name,u=t._computeStates,r=u[i],r.version===n.version&&(r.isComputed=!1,t.dispatchChange(i)))}function r(n){var t=ff;return n&&(t=n+"_"+t),t}function e(n){var i=n.target,t=n.propertyName;i.dispatchEvent(r(t),t),i.dispatchEvent(ff,t)}function a(n,t){this.addEventListener(r(n),t)}function v(t){var o=!n,s=this._dependents,u=s?s[t]:null,h,r={target:this,propertyName:t},i,f;if(!u||!u.length)o?e(r):n.push(r);else{for(o&&(n=[]),n.push(r),s[t]=[],i=0,f=u.length;i<f;i++)l(u[i]);if(o)for(h=n,n=null,i=0,f=h.length;i<f;i++)r=h[i],e(r)}}function p(n,t){this.removeEventListener(r(n),t)}function o(n,i){var h=n.constructor,e=this,o={},s,c;uu(h),o[r(i)]=lr(!0),e.get?(c=e.get,o[i]=y(function(){return u(this,i),c.call(this)},e.set)):(s="__"+i,e.initialValue!==t&&(o[s]={enumerable:!ir,value:e.initialValue}),o[i]=y(function(){return u(this,i),this[s]},function(n){this[s]!==n&&(f(this,s,n),this.dispatchChange(i))})),typeof e.enumerable=="boolean"&&(o[i].enumerable=e.enumerable),ut(h,o)}function w(n,t){var e=n.constructor,i=this,r={},u="__"+t;r[t]=h(null,function(){var r=this,e=r._computeStates||{},n=e[t];if(n||(f(r,"_computeStates",e),n=e[t]={version:0,isComputing:!1,isComputed:!1}),!n.isComputing&&!n.isComputed){s(r,t,++n.version),n.isComputing=!0;try{f(r,u,i.compute.call(r)),n.isComputed=!0}finally{n.isComputing=!1,c()}}return r[u]},i.set),typeof i.enumerable=="boolean"&&(r[t].enumerable=i.enumerable),ut(e,r)}var i=[],n;uu=function(n){var t=n.prototype;"onchange"in t||ut(n,{change:lr()}),t.addChangeListener||(t.addChangeListener=a),t.dispatchChange||rt.defineProperty(t,"dispatchChange",{configurable:!0,enumerable:!ir,writable:!0,value:v}),t.removeChangeListener||(t.removeChangeListener=p)},h=function(n,t,i){return{get:t,set:i,initialValue:n,defineOn:o}},ic=function(n){n.defineOn=o},ei=function(n,t){return{compute:n,set:t,defineOn:w}}}(),function(){var n,t;fi=function(n,t){var i=n.__dependencies;i||f(n,"__dependencies",i=[]),i.push(t),f(t,"__sponsor",n)},ue=function(n){var r=n.__sponsor,t,i;if(r&&!r.__disposed&&(t=r.__dependencies,Array.isArray(t)))for(i=t.length-1;i>=0;i--)if(t[i]===n){t.splice(i,1);return}r&&(n.__sponsor=null)},uc=function(n){return!!n.__sponsor},k=function(n){var i=n,o,t,r,e,u,s;if(n&&!n.__disposed){while(i){if(t=i._onDispose,!t)break;if(t!==o){try{t.call(n)}catch(h){}o=t}i=rt.getPrototypeOf(i)}if(r=n.__dependencies,Array.isArray(r))for(n.__dependencies=null,u=0,s=r.length;u<s;u++)e=r[u],k(e),e.__sponsor=null;n._listeners=null,n._dependents=null,n._trackingStub&&(n._trackingStub.o=null,n._trackingStub=null),f(n,"__disposed",!0)}},fe=function(n){return!!n.__disposed},e(r,"AutoDisposeEventListener",function(n,t,i){var r=this;r.source=n,r.eventName=t,r.listener=i},null,{_onDispose:function(){var n=this,t=n.source;t&&t.removeEventListener(n.eventName,n.listener),ue(n)}}),ku=function(n,t,i,u){n.addEventListener(t,u);var f=new r.AutoDisposeEventListener(n,t,u);return fi(i,f),f},e(r,"AutoDisposeChangeListener",function(n,t,i){var r=this;r.source=n,r.propertyName=t,r.listener=i},null,{_onDispose:function(){var n=this,t=n.source;t.removeChangeListener&&t.removeChangeListener(n.propertyName,n.listener),ue(n)}}),wi=function(n,t,i,u){n.addChangeListener(t,u);var f=new r.AutoDisposeChangeListener(n,t,u);return fi(i,f),f},e(r,"AutoDisposeNotificationListener",function(n,t){var i=this;i.notificationType=n,i.listener=t},null,{_onDispose:function(){var n=this;li(n.notificationType,n.listener),ue(n)}}),rc=function(n,t,i){dt(n,i);var u=new r.AutoDisposeNotificationListener(n,i);return fi(t,u),u}}(),function(){function a(n){i.push(n),i.length!==1||r||u||ni(h)}function h(){for(o(s.dispatchStart),u=!0;i.length;)if(i.shift()(),r)break;u=!1,o(s.dispatchEnd)}function v(t,i){n.push([t,i])}function t(){var t=n.length;return t?n[t-1][0]:null}function c(t){var i=n.length,r=n[i-1][1];r(t)}function y(){n.pop()}function p(){r++}function b(){r--,!r&&i.length>0&&!u&&ni(h)}function k(n,i){var r=n._sequence;return ci(r)&&(f(i,"_sequence",r),!t()||c({sequence:r})),i}function e(n){var i=rt.getPrototypeOf(n);i._thenEx||l.Class.mix(i.constructor,{done:function(n,r,u){var f=t();f&&(n=f.code(n,!0),r=f.code(r,!0),u=f.code(u,!0)),this._done!==i._done&&(this._done=i._done),this._done(n,r,u)},_done:i.done,then:function(n,r,u){var f=t();return f&&(n=f.code(n,!0),r=f.code(r,!0),u=f.code(u,!0)),this._then!==i._then&&(this._then=i._then),k(this,this._then(n,r,u))},_then:i.then,_thenEx:function(n){return this.then(function(t){return n(null,t)},function(t){return n(t)})}})}var i=[],r=0,u,n=[];at=function(n,i){function w(){return!e}function et(n){o?o.push(n):n.sequence()}function g(){if(!w()){var n=e,t=o;for(e=null,p();t.length;)t.shift().sequence();while(n.length)n.shift()();o=null}}function nt(n,t,i){return n?function(){function u(t){var i,u;v(r,et),k++;try{u=n.apply(f,o)}catch(e){t?i=e:r.error(e)}finally{k--,y()}if(d?d=!1:g(),i)throw i;return u}var f=this,o=Array.prototype.slice.call(arguments,0);return t||w()||k?u(i):(e.push(u),a(function(){w()||e.shift()()}),null)}:n}function tt(n,i){if(s||h){if(t()!==r){nt(function(){tt(n,i)})();return}try{n?s(n):h(i)}finally{s=h=null}}}var r,it=t(),ft=!!it&&!i,e=[],k=0,o=[],d=!1,u,s,h,ut;return ft&&c({sequence:g}),r={promise:function(){return u},code:function(n,t){return nt(n,null,t)},interleave:function(){t()===r&&(d=!0)},error:function(n){tt(n,null)},complete:function(n){tt(null,n)}},u=rt.create(l.Promise.prototype),f(u,"_sequence",g),ut=u._cleanupAction,f(u,"_cleanupAction",function(){ut.call(this);var n=w();e=null,o=null,n&&b()}),l.Promise.call(u,function(t,i){var u;n?(s=i,h=t,u=!!it,nt(n,u).call(r,r),n=null):t()}),u},e(l.Promise.prototype),e(l.Promise.wrapError(null)),e(l.Promise.wrap(null)),w("promiseOperation",at)}(),function(){function n(n){this._iterator=n._source._iterator(),this._predicate=n._predicate}var t;e(r,"WhereSequence",function(n,t){pi.call(this),f(this,"_source",n),f(this,"_predicate",t)},pi,{_iterator:function(){return new n(this)}}),t=r.WhereSequence,n.prototype.next=function(){for(var t=this._iterator,i=this._predicate,n;t.next();)if(n=t.item(),i.call(n,n))return!0;return!1},n.prototype.item=function(){return this._iterator.item()},ut(pi,{all:function(n){return!this.any(function(t){return!n.call(t,t)})},any:function(n){var t=!1;return this.each(function(i){return!n||n.call(i,i)?(t=!0,!1):!0}),t},first:function(n){var t;return this.each(function(i){return!n||n.call(i,i)?(t=i,!1):!0}),t},sum:function(n){var t=0;return this.each(function(i){t+=n?n.call(i,i):i}),t},where:function(n){return new t(this,n)}})}(),function(){var n=/\{(\d+)\}/g;du=function(t){var i=Array.prototype.slice.call(arguments,1);return t.replace(n,function(n,t){return i[t]})}}(),function(){function d(t,i){var r=n[t];return r?n[t]=null:r=i,r}function g(n){return n.split("-",1)[0]}function v(n){w[n]&&t.push(n)}var w={},r,f,e,a,t,b,y="msls",p=[y,"client","service"],k,h={},nt=/^\/([^\/]+)\/([^\/]+)$/,c;t=d("__msls_supportedLanguages","EN-US"),t=t.toUpperCase(),t=t.split(";"),i.each(t,function(n,t){t=i.trim(t),t&&(w[t]=!0)}),t=[],r=pr("preferredLanguage"),r=r?i.trim(r.toUpperCase()):null,r&&(v(r),f=g(r),f!==r&&v(f)),e=d("__msls_defaultLanguage","EN-US"),e=i.trim(e.toUpperCase()),e!==r&&e!==f&&(v(e),a=g(e),a!==e&&a!==f&&v(a)),o(s.loadResourcesStart),b=new l.Promise(function(n,u){function a(){var r=!1,i,f=!1;if(l--,!l){if(!b)for(e=0;e<t.length;e++)if(i=t[e],f=i==="EN-US",y in h[i]){r=!0;break}b||r?(o(s.loadResourcesEnd),d?u(d):n()):(b=!0,l++,f||(t.push("EN-US"),h["EN-US"]={}),tt("EN-US",y))}}function g(n,t){return n.length>=t.length&&n.substr(n.length-t.length)===t}function it(n){return c||(c="//ajax.aspnetcdn.com/ajax/globalize/0.1.1/cultures",i("script[type='text/javascript']").each(function(){var n=i(this).attr("src"),r=n?n.toLowerCase():"",t;if(g(r,"globalize.min.js")||g(r,"globalize.js"))return t=n.lastIndexOf("/"),c=t>=0?n.substr(0,t)+"/cultures":"cultures",!1})),c+"/globalize.culture."+n+".js"}function nt(n,t){function r(){t&&t()}l++;var u=it(n);i.ajax({url:u,dataType:"script",cache:!0,error:function(){r(),a()},success:function(){var t;n=n.toUpperCase();for(t in ct.cultures)if(t.toUpperCase()===n){ct.culture(t);break}ct.culture().name.toUpperCase()!==n&&r(),a()}})}function ut(n,t){function u(n){d+=du("Failed to load resources from {0}. {1}",r,n)+"\n"}var r=wu+"/Content/Resources/"+n;i.ajax({url:r,dataType:"text",cache:!0,error:function(){a()},success:function(n){try{if(n=i.parseJSON(n),!(n instanceof rt))throw"Invalid JSON.";t(n)}catch(r){u(du("Failed to parse the resources JSON string. Failure reason: {0}",r||""))}finally{a()}}})}function ft(n,t){return function(i){h[n][t]=i}}function tt(n,t){ut(t+".lang-"+n+".resjson",ft(n,t))}var l=0,w,e,v,b=!1,d="";for(!r||r==="EN"||nt(r,function(){!f||f==="EN"||f===r||nt(f)}),l+=t.length*p.length,e=0;e<t.length;e++)for(w=t[e],h[w]={},v=0;v<p.length;v++)k=p[v],tt(w,k);l||(l++,a())}),fc=function(){return b},ee=function(n){var i=n,u=nt.exec(n),f,e,r,o,s,c;if(u===null)return{value:i,empty:!0};for(f=u[1].toLowerCase(),e=u[2],r=0;r<t.length;r++)if(o=t[r],f in(s=h[o])&&e in(c=s[f]))if(i=c[e],!i||typeof i!="string")break;else return{value:i,lang:o};return{value:i,empty:!0}},u=function(n){var r=ee("/msls/"+n),t=r.value,i;return!r.empty&&arguments.length>1&&(i=Array.prototype.slice.call(arguments,0),i[0]=t,t=du.apply(null,i)),t},l.Namespace.define("WinJS.Resources",{getString:ee})}(),function(){ec=function(n,t){n.message||(n.message=u("errors_core")),"description"in n&&(n.description=n.message),t&&i.extend(n,t);throw n;},wr=function(n,t,i){var r=new Error;n&&(r.name=n),t&&(r.message=t),ec(r,i)},fu=function(n,t){n||(n=u("errors_invalid_operation")),wr("InvalidOperationError",n,t)},oe=function(n,t,r,f){n||(n=u("errors_argument")),wr("ArgumentError",n,i.extend(f,{argumentName:r,argumentValue:t}))},rs=function(n,t){if(!n){var i;i=t?u("errors_falsy_1args",t):u("errors_falsy"),oe(i,n,t)}}}(),function(){function t(n){return new l.Promise(function(t,i){n({url:wu+"/Content/Resources/Generated/model.json",cache:!0,dataType:"text",error:function(n,t,r){i({reason:t,e:r})},success:t})})}function h(n){wr("ModelError",n)}var n;o(s.loadModelStart),n=t(i.ajax),e(r,"ModelService",function(){this.isLoaded=!1,f(this,"_itemDictionary",{})},null,{load:function(){var r=this;return r._loadPromise||f(this,"_loadPromise",new l.Promise(function(f,e){function c(n){o(s.loadModelEnd),e(u("model_failed_server_1args",n.reason+" - "+(n.e||"")))}function l(n){o(s.loadModelEnd),o(s.parseModelStart);try{if(n=i.parseJSON(n),!(n instanceof rt))throw u("model_invalid_json");r.model=n}catch(t){e(u("model_failed_parse_1args",t||""));return}o(s.parseModelEnd),o(s.processModelStart);try{r._registerModelItem(r.model,!0),r._resolveReferenceProperties(r.model,!0)}catch(t){e(t);return}o(s.processModelEnd),r.isLoaded=!0,f(r.model)}var h=r._ajaxFunction?t(r._ajaxFunction):n;h.then(l,c)})),r._loadPromise},tryLookupById:function(n){var t;return n&&(t=this._itemDictionary[n],t)?t:null},_registerModelItem:function(n,t){var i;if(n&&n.id&&(this._itemDictionary[n.id]=n),t&&n&&n instanceof rt)for(i in n)this._registerModelItem(n[i],t)},_resolveReferenceProperties:function(n,t){var r,i,f;if(n&&n instanceof rt)for(r in n)i=n[r],i instanceof rt&&"__id"in i?(f=i.__id,(n[r]=this.tryLookupById(f))===null&&h(u("model_reference_error_1args",f))):t&&this._resolveReferenceProperties(i,t)}}),ru("services",{modelService:new r.ModelService})}(),bi="Microsoft.LightSwitch.Extensions",hs=":@SharePointList",function(){function t(n){return n}var n=/^\$\((.+)\)$/;it=function(n,t){var r=null,u=null;return n&&(r=n[t],r&&(i.isArray(r)?r.length>0&&(u=r[0]):u=r)),u},gu=function(n,t){var r=null,u=null;return n&&(r=n[t],r&&(u=i.isArray(r)?r:[r])),u},rr=function(t){var i,r;return t&&(i=n.exec(t),i&&(r=ee(i[1]),r.empty||(t=r.value))),t},nf=function(){var t=null,i=r.services.modelService,n=i.model;return!i.isLoaded||!n||!n.modules||(t=d(n.modules).first(function(n){return ss(n)})),t},eu=function(n,i,r){var u=null;return!n||!i||(u=d(n).first(function(n){return(!r||r(n))&&(n.name===i||n.name===t(i))})),u},ii=function(n,t){return t&&n.length>1&&(n=n[0].toLowerCase()+n.substring(1)),n},sc=function(n){return!n?n:(n=n[0].toLowerCase()+n.substring(1),n.replace(/([A-Z])/g,"-$1").toLowerCase())},us=function(n){var u=[],t=r.services.modelService.model;return!t||!t.modules||i.each(t.modules,function(t,r){r.globalItems&&i.each(r.globalItems,function(t,i){(!n||n(i))&&u.push(i)})}),u},oc=function(n){var t=n.id.replace(/\/Properties\[.*\]/,"");return r.services.modelService.tryLookupById(t)},ot=function(n,t){return":"+(t||"RootControl")+"/Properties["+n+"]"},br=function(n){for(var t=n,i,t=se(t);!!t&&es(t);)i=t,t=i.underlyingType;return{primitiveType:t,semanticType:i}},se=function(n){var t;return ou(n)&&(t=n,n=t.underlyingType),n},ce=function(n){return n.supportedContentItemKind==="Group"},hc=function(n){return"target"in n},cc=function(n){return"links"in n},lc=function(n){return"value"in n},ac=function(n){return"member"in n},vc=function(n){return"supportedContentItemKind"in n},yc=function(n){return"__isPrimitiveType"in n},fs=function(n){return"entitySets"in n},ou=function(n){return"__isNullableType"in n},es=function(n){return"__isSemanticType"in n},pc=function(n){return"rootContentItem"in n},he=function(n){return"__isEntityType"in n},os=function(n){return"__isKeyProperty"in n},ss=function(n){return"homeScreen"in n}}(),function(){vt(r,{CollectionChangeAction:{refresh:"refresh",add:"add",remove:"remove"}}),st=r.CollectionChangeAction,e(r,"CollectionChange",function(n,t,i,r){this.action=n,this.items=t,this.oldStartingIndex=i,this.newStartingIndex=r}),su=r.CollectionChange,w("CollectionChangeAction",st),w("CollectionChange",su)}(),function(){function n(n){return n[0].toUpperCase()+n.substr(1)}function t(t,i){var e=this,r=e.simpleDescriptor,u={},h=!!e.async,o,c,v=n(i),a="get"+v,p="set"+v,w=t.constructor,b=w.Details,k=b?b.PropertySet:null,d=e.detailsClass,s;e.name=i,u[i]=r,ic(r),h&&(r.enumerable=!0,o=r.get,r.get=function(){var t,i=r.rawGet&&r.rawGet(this.details,r),n=o.call(this);if(n._state&&n._state.name!=="success"&&n._state.name!=="error"||n.then(function(n){i=n},function(n){t=n}),t)throw t;return i}),r.set&&(c=r.set,r.set=function(n){var i=this,r,t;if(r=at(function(r){try{c.call(i,n,r)}catch(u){t=u;throw u;}c.length===1&&r.complete()}),t)throw t;}),h?u[a]=o:(u[a]={enumerable:!ir},o=r.get,u[a].value=function(){return l.Promise.as(o.call(this))}),r.set&&(u[p]=h?r.set:{enumerable:!ir,value:r.set}),ut(w,u),k&&d&&(u={},s="__"+i,u[i]=y(function(){return this[s]||f(this,s,new d(this._details,e)),this[s]}),ut(k,u))}ki=function(n,t,i,r,u,o,s){var c=e(n,t,i,u),h=u,a=h?h.Details:null,l=e(c,"Details",r,a),v=e(l,"PropertySet",function(n){f(this,"_details",n)},h?h.Details.PropertySet:null);return ut(c,o),ut(l,s),ut(l,{properties:y(function(){return this._properties||f(this,"_properties",new v(this)),this._properties})}),c},ki(r,"ObjectWithDetails",function(){this.details=new this.constructor.Details(this)},function(n){this.owner=n},null,null,{getModel:function(){var n=this._model;return n||(this._findModel&&(n=this._findModel()),f(rt.getPrototypeOf(this),"_model",n)),n}}),ur=r.ObjectWithDetails,kr=ur.Details,uu(ur),uu(kr),ut(kr.PropertySet,{all:function(){var t=[],n;for(n in this)n.charCodeAt(0)!==95&&this[n]&&!ci(this[n])&&t.push(this[n]);return t}}),e(kr,"Property",function(n,t){this.owner=n?n.owner:null,f(this,"_details",n),f(this,"_entry",t)},null,{name:y(function(){return this._entry.name}),isReadOnly:y(function(){return!this._entry.set}),getPropertyType:function(){return this._entry.type||rt},getModel:function(){var n=this._entry.model;return n||(this._findModel&&(n=this._findModel()),this._entry.model=n),n}}),dr=kr.Property,uu(dr),ar=function(n,i,r){var u=rt.create(n);return u.simpleDescriptor=n,u.type=i,u.detailsClass=r,u.defineOn=t,u},w("ObjectWithDetails",ur)}(),function(){ki(r,"BusinessObject",function(){ur.call(this)},function(n){kr.call(this,n)},ur),hu=r.BusinessObject,ef=hu.Details,e(ef,"Property",function(n,t){dr.call(this,n,t)},dr,{_findModel:function(){return eu(this._details.getModel().properties,this._entry.name)}}),of=ef.Property,w("BusinessObject",hu)}(),function(){vt(r,{SortOrder:{ascending:0,descending:1}}),sf=r.SortOrder,e(r,"OrderBy",function(n,t,i,r){this.sortDirection=n,this.key=t,this.index=i,this.only=typeof r!="undefined"?r:!1}),wc=r.OrderBy}(),function(){e(r,"ValidationResult",function(n,t){this.property=n,this.message=t}),ai=r.ValidationResult,w("ValidationResult",ai)}(),cu=n.OData,vr=n.datajs,function(){ki(r,"Entity",function(n){hu.call(this),bc(this,n)},function(n){ef.call(this,n),kc(this,n)},hu),e(r,"Link",function(n,t,i,r,u,f){dc(this,n,t,i,r,u,f)}),vt(r,{LinkState:{unchanged:0,added:1,deleted:3,discarded:4}}),e(r,"LinkSet",function(n,t){gc(this,n,t)}),vt(r,{MergeOption:{appendOnly:"appendOnly",unchangedOnly:"unchangedOnly"}}),ae=r.MergeOption,e(r,"EntitySet",function(n,t){nl(this,n,t)}),e(r,"DataServiceQuery",function(n,t,i){tl(this,n,t,i)}),ki(r,"DataService",function(n){ur.call(this),il(this,n)},function(n){kr.call(this,n),rl(this,n)},ur),ki(r,"DataWorkspace",function(){ur.call(this),ul(this)},function(n){kr.call(this,n),fl(this,n)},ur),w("MergeOption",ae)}(),function(){function li(){return this._entry.get.call(this._details.owner)}function sr(n){this._entry.set||fu(u("errors_setReadOnlyProperty",this._entry.name)),this._entry.set.call(this._details.owner,n)}function yt(n){return"__"+n+"_IsEdited"}function ai(n){return a(n)||p(n)}function a(n){return n.kind==="reference"||n.kind==="virtualReference"}function p(n){return n.kind==="collection"||n.kind==="virtualCollection"}function tt(n){return n.kind==="virtualReference"||n.kind==="virtualCollection"}function dt(n){return"__"+n}function k(n,t){return n[dt(t.name)]}function hr(){var i=this._details,n=this._entry,r=i._,t;return n.kind==="storage"?!!r[yt(n.serviceName)]:a(n)?(t=k(i,this),!!t&&!!t.changeInfo):!1}function cr(){return this._details.entityState===n.added?!1:this.isEdited}function gt(n,t,i){return i.association===n&&i.fromEnd===t}function ni(n,t){var r=d(t.associationSet.ends).first(function(){return this.name===t.model.toEnd.name}),i=n.entitySet.dataService,u=r.entityContainer;return u&&(i=i.details.dataWorkspace[ii(u.name)]),i[ii(r.entitySet.name)]}function ft(n,t,i){var r=i.model;return a(t)?i.state===o.available&&(i.value=i.linkSet.getTargetEntity(r.fromEnd.name,n.entity,r.toEnd.name),i.state=o.loaded):i.value||(i.value=new ct(n,i)),i.value}function ti(n,t,i,r,u){var f=n.value;f&&f.dispatchEvent("collectionchange",new su(t,i,r,u))}function ri(n,t,i,r){r||(r=n.properties[t.name]);var u=n.entity,f;i.state=o.available,f=ft(n,t,i),r.dispatchChange("isLoaded"),a(t)?(r.dispatchChange("value"),u.dispatchChange(t.name)):ti(i,st.refresh)}function ui(n,t){var i=n;return t&&(i=n.entityProperty.name),i}function vi(i,r,u,f,e,h,c){function bt(){if(v){var n=v.state;ut=n!==o.notInitialized&&n!==o.unavailable,k=v.value}else k=et.getAnyReferenceEntity(d.name,l,g.name),ut=!!k}function kt(n,i){var r,u;return i&&(u=ui(n,c),r=i[u]),r===t&&(r=null),r}var b=!1,et=u.linkSet,rt=u.model,lt=u.toPropertyName,ot,ht,l,v,d,a,y,g,ut,k,tt,ft,it,at,vt,ct,yt,pt,nt,w,wt=i.details.entitySet.dataService.details;if(f&&(ot=f.details,lt&&(ht=s(ot,ot.properties[lt]._entry))),e?(l=i,v=u,d=rt.fromEnd,a=f,y=ht,g=rt.toEnd):(l=f,v=ht,d=rt.toEnd,a=i,y=u,g=rt.fromEnd),l)if(h===ae.appendOnly){if(bt(),!ut&&(b=!0,u.associationSet.ends.forEach(function(n){n.name===d.name?tt=n.properties:n.name===g.name&&(ft=n.properties)}),Array.isArray(tt)&&Array.isArray(ft)&&tt.length===ft.length&&(vt=l.details._,ct=a&&a.details._,ct)))for(it=0,at=tt.length;it<at;it++)if(yt=kt(tt[it],vt),pt=kt(ft[it],ct),!uf(yt,pt)){b=!1;break}}else l.details.entityState===n.unchanged&&(bt(),ut?k!==a&&(!k||et.deleteReferenceLink(d.name,l,g.name,k),b=!0):b=!0);else b=!0;return b&&(!a||!l||et.attachLink(d.name,l,g.name,a),v&&(v.state=o.loaded,v.value=a,nt=v.model.name,w=l.details.properties[nt],w.dispatchChange("isLoaded"),w.dispatchChange("value"),l.dispatchChange(nt),wt.dispatchEvent("contentchange",w)),y&&(nt=y.model.name,w=a.details.properties[nt],p(w._entry)?y.state===o.loaded&&(y.state=o.available,ti(y,st.add,[l])):(y.state=o.loaded,y.value=l,w.dispatchChange("isLoaded"),w.dispatchChange("value"),a.dispatchChange(nt),wt.dispatchEvent("contentchange",w)))),b||k===a}function yi(n,t,i,r,u,f){var o=i.model.fromEnd.multiplicity,s=a(t),e,h,c=[];return e=s?o===kt.many||o===kt.one:!1,s?(h=r[0],vi(n,t,i,h,e,u,f)):r.forEach(function(r){var o=vi(n,t,i,r,e,u,f);o&&c.push(r)}),c}function vr(n,t,i,r,u,f,e){var a=i.model,c=n.entity,o=u,s=!0,h=0,l=yi(c,t,i,e.results,u._mergeOption,r);if(e.results=l,p(t)){do{if(hf(o._skip)||hf(o._take)){s=!1;break}else typeof o._filter=="string"&&(h+=1);o=o._source}while(o);s&&(f&&(h-=1),s=h<=0),s&&ri(n,t,i)}}function yr(n,t,i,r,u,f){if(t)return n.entityProperty.propertyType;var h=i.properties[r],c,a,s,o,l,e;if(h)return e=h.getModel(),e.propertyType;for(c=f.getModel(),s=c.entityType.properties,o=0,l=s.length;o<l;o++)if(e=s[o],e.name===u)return e.propertyType;return null}function pt(n,t,i,r,u){var s,h,e,c,l,a,v,w,b,o,y;if(r.query&&(r.query=null),(u||n.entitySet.dataService.details.getModel().dataProvider!=="AstoriaDataProvider"||!p(i))&&(o=[],y=ni(n,r),d(r.associationSet.ends).each(function(){this.name===r.model.fromEnd.name?h=this.properties:e=this.properties}),Array.isArray(e)&&Array.isArray(h)&&e.length===h.length&&e.forEach(function(i,r){c=ui(i,u),l=h[r],a=ui(l,u),v=yr(l,u,n,a,c,y),v&&(w=t[a],b=br(v).primitiveType,o.push(c+" eq "+le(w,b.id)))}),o.length>0&&o.length===e.length&&(s=y.filter(o.join(" and ")))),s)r.query=s;else if(!u){var k=t[i.serviceName],g=k&&k.__deferred,nt=g?g.uri:t.__metadata.uri+"/"+i.serviceName;r.query=new hi({_entitySet:ni(n,r)},nt)}f(r.query,"_afterQueryExecuted",function(t,f){vr(n,i,r,u,t,!!s,f)})}function s(t,i){var g=i.name,nt=dt(g),e=t[nt],h=tt(i),u,y,p,s,f,w,c,l,b,it,k,a,ut,v;return e||(y=t.entitySet.dataService,p=y.details,u=i.data,u||(u=i.data={},u.model=s=t.properties[g].getModel(),f=h?s.virtualAssociation:s.association,d(f.ends).each(function(n){gt(f,n,s)||(b=d(n.entityType.properties).first(function(t){return gt(f,n,t)}))}),u.toPropertyName=b&&ii(b.name),h?k=d(nf().globalItems).first(function(){return this.virtualAssociation===f}):(it=p.getModel(),k=d(it.associationSets).first(function(){return this.association===f})),u.associationSet=k),e=t[nt]=rt.create(u),e.state=o.notInitialized,v=h?y.details.dataWorkspace.details._linkSets:p._linkSets,a=u.associationSet.name,v[a]||(w=[],c={},s=u.model,f=s.association,d(f.ends).each(function(n){l=n.name,w.push(l),c[l]=gt(f,n,s)?i.name:u.toPropertyName}),v[a]=new r.LinkSet(w,c)),e.linkSet=v[a],t.entityState!==n.added&&t.entityState!==n.discarded&&pt(t,t._,i,e,h)),e.query||t.entityState===n.added||t.entityState===n.discarded||pt(t,t._,i,e,h),e}function pr(){var t,i=this._details,n=this._entry,u=i._,r;return this.isChanged&&(n.kind==="storage"?t=u.__original[n.serviceName]:a(n)&&(r=s(i,n),t=r.changeInfo.originalEntity)),t}function wi(n){return n.model.toEnd.multiplicity}function et(n,t){var i,r;return t.state===o.notInitialized&&(i=t.model,t.state=wi(t)!==kt.many&&t.linkSet.hasLinks(i.fromEnd.name,n.entity)?o.available:o.unavailable),t.state!==o.unavailable}function bi(){var n=this._details;return et(n,s(n,this._entry))}function di(){var t=this,i=t._details,u=t._entry,n=s(i,u),e=et(i,n),r=n.loadPromise,f;return r||(n.state!==o.unavailable&&(n.state=o.unavailable,t.dispatchChange("isLoaded")),t.loadError&&(t.loadError=null),r=n.loadPromise=at(function(e){function s(r,e){f=!0,n.loadPromise=null,r?(t.loadError=r,e.error(r)):(o||ri(i,u,n,t),e.complete(n.value))}r=n.loadPromise=e.promise();var h=i.entity,o=n.query;o?(o.execute()._thenEx(function(n){s(n,e)}),e.interleave()):s(null,e)}),f&&(n.loadPromise=null)),r}function wr(){var n=s(this._details,this._entry);return n.query}function gi(n,t){var r=t._addedEntities;i.each(r,function(t,i){return i===n.entity?(r.splice(t,1),!1):!0})}function ot(n,t,r){var u,e,f,o;i.each(t.properties.all(),function(h,c){(u=c._entry,ai(u))&&(e=s(t,u),f=e.toPropertyName,f)&&(p(u)?(o=c.value.array,i.each(o,function(t,i){fr(i,f,r,n)})):et(t,e)&&fr(c.value,f,r,n))})}function wt(n){var t=n._;!t.__parent||(n._=t.__parent)}function fi(n,t){var i=n&&n.changeInfo&&n.changeInfo.changeSetIndices;return!!i&&i.indexOf(t)>-1}function nr(n,t,i,r){function o(i){var e;e=i instanceof b?t.hasOwnProperty(i._entry.serviceName):fi(k(n,i),u),e&&(f=!0,r&&r(t,i,u))}for(var f,u,e=d(n.properties.all()).where(function(n){return n instanceof v}).array;t.__parent;)f=!1,u=t.__changeSetIndex,wt(n),e.forEach(o),f&&lu(i,u,-1),t=n._}function tr(n,t,i){n.dispatchChange(i.name),t.dispatchChange("value"),t.dispatchChange("originalValue"),t.dispatchChange("isChanged"),t.dispatchChange("isEdited")}function ir(n,t){var i=n.changeInfo.changeSetIndices;return i[0]===t}function kr(){var t=this,r=t.entity,u=t.entityState,c=t.hasEdits,h=t.entitySet,f=h.dataService.details,e=f.dataWorkspace.details,i=t._;u!==n.unchanged&&u!==n.discarded&&(u===n.added?(gi(t,h),i.__hasEdits&&(i.__hasEdits=!1),i.__entityState=n.discarded,ot(r,t,st.remove),nr(t,i,e),lu(e,t._.__changeSetIndex,-1),i.__parent&&(i.__parent=null),i.__changeSetIndex=-1,t._=i):u===n.deleted?(wt(t),ot(r,t,st.add),lu(e,i.__changeSetIndex,-1)):u===n.modified&&nr(t,i,e,function(n,i,u){var e=i._entry,f,h;i instanceof b?n.hasOwnProperty(yt(e.serviceName))&&tr(r,i,e):(f=s(t,e),ir(f,u)&&(h=f.model,f.linkSet.discardReferenceChanges(h.fromEnd.name,r,h.toEnd.name),f.value=f.changeInfo.originalEntity,f.state=o.loaded,f.changeInfo=null,tr(r,i,e)))}),t.hasEdits!==c&&t.dispatchChange("hasEdits"),t.dispatchChange("entityState"),--f._changeCount==0&&f.dispatchChange("hasChanges"),f.dispatchEvent("contentchange",r))}function dr(t){var i=this,o=i.properties.all(),u,h=o.length,s,f,e;if(i.entityState!==n.unchanged)return l.Promise.as();if(!t)for(t=[],u=0;u<h;u++)s=o[u],f=s._entry,a(f)&&!tt(f)&&t.push(f.serviceName);return e=new hi({_entitySet:i.entitySet},i._.__metadata.uri),t.length>0&&(e=e.expand(t.join(","))),e.merge(r.MergeOption.unchangedOnly).execute()}function nu(){var i=null,n=this.entitySet,r,u,t,f;return!n||!(r=n.dataService)||!(u=r.details)||(t=d(u.properties.all()).first(function(t){return t.value===n}),t&&(f=t.getModel(),i=f.entityType)),i}function rr(t,r,u,f,e){i.each(r.properties.all(),function(i,s){if(s instanceof v){var w=s._entry,a=w.serviceName,y,c=!1,l=!1,h,p,d;s instanceof b?(c=f.hasOwnProperty(a),c&&(delete f[a],y=yt(a),l=f.hasOwnProperty(y),l&&delete f[y])):(h=k(r,s),c=fi(h,e),c&&(p=h.model,d=h.linkSet.cancelReferenceChanges(p.fromEnd.name,t,p.toEnd.name),l=ir(h,e),h.value=d,h.state=o.loaded,l?h.changeInfo=null:h.changeInfo.changeSetIndices.pop())),c&&(t.dispatchChange(w.name),s.dispatchChange("value"),l&&(u!==n.added&&(s.dispatchChange("originalValue"),s.dispatchChange("isChanged")),s.dispatchChange("isEdited")))}}),wt(r)}function tu(){var t=this.details,r=t.entitySet,u=r.dataService.details,i=t.entityState;(i===n.added||i===n.modified)&&(t.discardChanges(),i=t.entityState),i===n.unchanged&&(ei(t,n.deleted),u.dispatchEvent("contentchange",this),ot(this,t,st.remove))}function iu(){function t(n){c.call(this,n)}return t}function ru(n){return n._[this.serviceName]}function ei(t,i){var f=t.entitySet.dataService.details,o=f.dataWorkspace.details,r=t._,e=o._nestedChangeSets.length-1,h=t.entityState,s=h===n.unchanged,c=i===n.modified&&r.__changeSetIndex!==e,u;(s||c)&&(u=rt.create(r),u.__parent=r,u.__changeSetIndex=e,t._=u,lu(o,e,1),s&&(r.__parent||(u.__original=r),u.__entityState=i,u.__hasEdits=!0,t.dispatchChange("entityState"),t.dispatchChange("hasEdits"),++f._changeCount==1&&f.dispatchChange("hasChanges")),r=t._),r.__hasEdits||(r.__hasEdits=!0,t.dispatchChange("hasEdits"))}function oi(t,i,r,u){var e=t.entitySet.dataService.details,f=i.name;u||(u=t.properties[f]),r&&(u.dispatchChange("isEdited"),t.entityState!==n.added&&(u.dispatchChange("isChanged"),u.dispatchChange("originalValue"))),u.dispatchChange("value"),t.entity.dispatchChange(f),e.dispatchEvent("contentchange",u)}function uu(t,i){var r=t._,u=!1,f=t.properties[this.name],e=this.serviceName,o=t.entityState;o!==n.deleted&&o!==n.discarded&&(ei(t,n.modified),r=t._,u=!f.isEdited,r[e]=i,u&&(r[yt(e)]=!0),oi(t,this,u,f))}function ur(n){var t=s(n,this),i=t.model;return et(n,t)?l.Promise.as(ft(n,this,t)):n.properties[this.name].load()}function er(t,i,r,f,e){var o=t.entityState,h=s(t,i),c,l,v,a;o!==n.deleted&&o!==n.discarded&&(r&&(l=r.details.entityState,(l===n.deleted||l===n.discarded)&&oe(u("entity_setReferencePropertyValue_DeletedDiscarded"),r,"value")),v=t.entitySet._model,c=it(v,hs),a=!!c&&c.type==="DocumentLibrary",et(t,h)||a?(or(t,i,o,h,r,e,a),f.complete()):t.properties[i.name].load().then(function(){or(t,i,o,h,r,e),f.complete()}))}function bt(n,t,i){if(!Array.isArray(t)||t.length<=0)return[];var r=[],u=n.properties;return d(t).each(function(n){var f=i?n.entityProperty.name:n,t=u[f];return t?(r.push(t),!0):(r=[],!1)}),r}function or(t,i,r,u,f,e){var p=u.model,w=p.fromEnd.name,c=u.changeInfo,nt=!c,b,v,h,y,k,g,a,l;ei(t,n.modified),b=u.linkSet.setReferenceLink(w,t.entity,p.toEnd.name,f),u.value=f,u.state=o.loaded,c||(c=u.changeInfo={originalEntity:b,changeSetIndices:[]}),v=t._.__changeSetIndex,h=c.changeSetIndices,h||(h=c.changeSetIndices=[]),y=h.length,(y===0||h[y-1]!==v)&&h.push(v),oi(t,i,nt),d(u.associationSet.ends).each(function(){this.name===w?k=this.properties:g=this.properties}),a=bt(t,k,e),a.length>0&&(f&&(l=bt(f.details,g,e)),l&&l.length!==a.length||a.forEach(function(n,t){n.value=l?l[t].value:null}))}function eu(n,t,i){er(n,this,t,i,!1)}function ou(n,t){return ft(n,t,s(n,t))}function hu(n,t,i){er(n,this,t,i,!0)}function cu(n,t){var r=n,u=iu(n),i={};return ki(null,null,n,u,g),t&&(t.forEach(function(n){var r,t=n.name;n.serviceName=t,typeof n.kind!="string"&&(n.kind="storage");switch(n.kind){case"storage":n.type||(n.type=String),i[t]=ar(n,n.type,b),n.getValue=ru,n.isReadOnly||(n.setValue=uu);break;case"reference":case"virtualReference":n.type||(n.type=g),i[t]=ar(n,n.type,ht),n.async=!0,n.getValue=ur,n.setValue=n.kind==="reference"?eu:hu;break;case"collection":case"virtualCollection":n.type=ct,i[t]=ar(n,n.type,ci),n.async=!0,n.getValue=ur,n.rawGet=ou}n.get=function(){return n.getValue(this.details)},n.setValue&&(n.set=n.async?function(t,i){n.setValue(this.details,t,i)}:function(t){n.setValue(this.details,t)})}),ut(r,i)),r}function au(n,t,i,r,u){var l=!1,e,h,b,a,v,f,c,k,y,d,p,w;if(!tt(u))return l;for(e=s(t,u),h=e.model,b=h.fromEnd.name,a=e.associationSet.ends,f=0,c=a.length;f<c;f++)if(v=a[f],v.name===b){k=v.properties;break}for(y=bt(t,k,!0),f=0,c=y.length;f<c;f++)if(d=y[f],p=d._entry.serviceName,!uf(i[p],r[p])){w=ft(t,u,e),w&&e.linkSet.deleteReferenceLink(h.fromEnd.name,n,h.toEnd.name,w),e.state=o.unavailable,pt(t,r,u,e,!0),l=!0;break}return l}function vu(t,i,u){u===r.MergeOption.unchangedOnly&&t.details.entityState===n.unchanged&&ls(t,i)}var si=pi.Array,o={notInitialized:-1,unavailable:0,available:1,loaded:2},kt={many:"Many",zeroOrOne:"ZeroOrOne",one:"One"},hi=r.DataServiceQuery,g=r.Entity,c=g.Details,nt,v,b,ht,ci,ct,yu,n,lt;vt(r,{EntityState:{unchanged:"unchanged",added:"added",modified:"modified",deleted:"deleted",discarded:"discarded"}}),n=r.EntityState,e(c,"Property",function(n,t){of.call(this,n,t),this.entity=this.owner},of,{value:h(null,li,sr)}),nt=c.Property,e(c,"TrackedProperty",function(n,t){nt.call(this,n,t)},nt,{isEdited:h(null,hr),isChanged:h(null,cr),originalValue:h(null,pr)}),v=c.TrackedProperty,e(c,"StorageProperty",function(n,t){v.call(this,n,t)},v,{isReadOnly:h(null,function(){var t=this.getModel();return t.isReadOnly?!0:this._details.entityState===n.added?!1:os(t)?!0:!this._details.entitySet.canUpdate})}),b=c.StorageProperty,e(c,"ReferenceProperty",function(n,t){v.call(this,n,t)},v,{isLoaded:h(!1,bi),loadError:h(null),isReadOnly:h(null,function(){var t=this._details,r=this._entry,u=s(t,r),e=u.model.fromEnd.name,f,i;return t.entityState===n.added?!1:(d(u.associationSet.ends).each(function(){return this.name===e?(f=this.properties,!1):!0}),i=bt(t,f,tt(r)),i.length>0?d(i).any(function(n){return n.isReadOnly}):!1)}),load:di}),ht=c.ReferenceProperty,hl=function(n){return ni(n.entity.details,s(n._details,n._entry))},cl=function(n){return wi(s(n._details,n._entry))},ll=function(n,t){var i=k(n,t);return i&&i.value},al=function(n,t,i){var u=t._entry,r;ai(u)&&(r=k(n,t),r&&(pt(n,i,u,r,tt(u)),r.changeInfo=null,a(u)&&!r.value&&(r.state=o.unavailable,oi(n,u,!1,t))))},vl=function(n,t){s(n,t._entry).changeInfo=null},e(r,"EntityCollection",function(n,t){pi.call(this),f(this,"_details",n),f(this,"_data",t)},si,{_array:[],_iterator:function(){var n=this._data,t=n.model;return n.state===o.available&&(this._array=n.linkSet.getTargetEntities(t.fromEnd.name,this._details.entity,t.toEnd.name),n.state=o.loaded),si.prototype._iterator.call(this)},collectionchange:lr()}),ct=r.EntityCollection,e(c,"CollectionProperty",function(n,t){nt.call(this,n,t)},nt,{isLoaded:h(!1,bi),loadError:h(null),query:y(wr),value:y(li),load:di}),ci=c.CollectionProperty,yl=function(n){var t=n._details,i=n._entry;return ft(t,i,s(t,i))},pl=function(n){var t=n._details,i=s(t,n._entry),r=i.model;return i.linkSet.getAddedEntities(r.fromEnd.name,t.entity,r.toEnd.name)},fr=function(n,t,i,r){if(n&&t){var f=n.details,e=f.properties[t],s=e._entry,u=f[dt(t)];!u||u.state!==o.loaded||(u.state=o.available),p(s)?u&&ti(u,i,[r]):(e.dispatchChange("value"),n.dispatchChange(t))}},ut(c,{entityState:h(null,function(){return this._.__entityState||n.unchanged}),hasEdits:h(null,function(){return!!this._.__hasEdits}),discardChanges:kr,refresh:dr,_findModel:nu}),kc=function(t,i){t.entity=i,t._=lt?lt:{__entityState:n.added}},sl=function(t){var u=t.entity,i=t.entityState,c=t.hasEdits,s=t.entitySet,f=s.dataService.details,h=f.dataWorkspace.details,e=h._nestedChangeSets.length-1,r=t._,o=r.__changeSetIndex;i===n.unchanged||i===n.discarded||e>=0&&o!==e||(i===n.added?r.__parent?rr(u,t,i,r,o):(gi(t,s),r.__hasEdits&&(r.__hasEdits=!1),r.__entityState=n.discarded,ot(u,t,st.remove)):i===n.deleted?(wt(t),ot(u,t,st.add)):i===n.modified&&rr(u,t,i,r,o),lu(h,e,-1),t.hasEdits!==c&&t.dispatchChange("hasEdits"),i!==t.entityState&&(t.dispatchChange("entityState"),--f._changeCount==0&&f.dispatchChange("hasChanges"),f.dispatchEvent("contentchange",t.entity)))},ol=function(t){var u=t.entityState,v=t.entitySet,y=v.dataService.details,p=y.dataWorkspace.details,a=p._nestedChangeSets.length-1,r=t._,h=r.__changeSetIndex,c=h-1,o=r.__parent,f,e,s,l;return u===n.unchanged||u===n.discarded||a>=0&&h!==a?!1:((u===n.modified||u===n.added)&&i.each(t.properties.all(),function(n,i){i instanceof ht&&(f=k(t,i),fi(f,h)&&(l=f.model,f.linkSet.applyReferenceChanges(l.fromEnd.name,t.entity,l.toEnd.name),e=f.changeInfo.changeSetIndices,e.pop(),s=e.length,(s===0||s>0&&e[s-1]!==c)&&e.push(c)))}),(u!==n.added||o)&&u!==n.deleted&&o.__changeSetIndex===c?(delete r.__parent,delete r.__changeSetIndex,i.each(r,function(n,t){r.hasOwnProperty(n)&&(o[n]=t)}),t._=o,!1):(r.__changeSetIndex--,!0))},ut(g,{deleteEntity:tu}),bc=function(t,i){var c=t,s=c.constructor,f=t.details,u,h,e,o;i||(i=gr(r.application.activeDataWorkspace,t.constructor)),f.entitySet=i,f.entityState===n.added&&(u=i.dataService.details,i._addedEntities.push(t),h=u.dataWorkspace,e=h.details,o=e._nestedChangeSets.length-1,f._.__changeSetIndex=o,lu(e,o,1),++u._changeCount==1&&u.dispatchChange("hasChanges"),u.dispatchEvent("contentchange",t),s.created&&s.created.call(null,t))},ls=function(n,t){for(var u=n.details,s=u._,h=u.properties.all(),e=h.length,i,o,f=[],c=u.entitySet.dataService.details,r=0;r<e;r++)i=h[r],i instanceof b?(o=i._entry.serviceName,uf(s[o],t[o])||f.push(i)):i instanceof ht&&au(n,u,s,t,i._entry)&&f.push(i);for(u._=t,r=0,e=f.length;r<e;r++)i=f[r],i.dispatchChange("value"),n.dispatchChange(i.name),c.dispatchEvent("contentchange",i)},as=function(n,t,i){var u=t.__metadata.uri,r=n._loadedEntities[u];return r?vu(r,t,i):(lt=t,r=new n._entityType(n),lt=null,n._loadedEntities[u]=r),r},wl=function(n,t,i,r,u,f,e){var o=[],h=[],c=s(n.details,t),l=t.data.model;r&&(o=Array.isArray(r.results)?r.results:Array.isArray(r)?r:[r]),o.forEach(function(n){var t=as(i,n,u);h.push(t),f.push(t),e.push(n)}),yi(n,t,c,h,u,!1),p(t)&&ri(n.details,t,c)},w("EntityState",n),w("Entity",g),w("EntityCollection",ct),w("_defineEntity",cu)}(),function(){function i(){var n=ct.culture().calendars.standard.patterns;return n.d+" "+n.T}function r(){var n=ct.culture().calendars.standard.patterns;return n.d+" "+n.t}function n(n){return n<10?"0"+n.toString():n.toString()}function f(t){var s=t,o="",i,r,u,f,e;return i=s.ms,i<0&&(o="-",i=-i),r=Math.floor(i/864e5),i-=864e5*r,u=Math.floor(i/36e5),i-=36e5*u,f=Math.floor(i/6e4),i-=6e4*f,e=Math.floor(i/1e3),i-=e*1e3,o+(r>0?r.toString()+".":"")+n(u)+":"+n(f)+":"+n(e)+(i>0?"."+i.toString():"")}cf=function(n){if(!!n){var i=n.split(" "),t,u,f,o,h,c,l,a,v,r,s,e;if(i.length>2)return u=i[0].split("/"),h=parseInt(u[2],10),c=parseInt(u[0],10)-1,l=parseInt(u[1],10),f=i[1].split(":"),a=parseInt(f[0],10),v=parseInt(f[1],10),r=Math.floor(parseInt(f[2],10)*1e3),s=r%1e3,r=(r-s)/1e3,t=new Date(Date.UTC(h,c,l,a,v,r,s)),o=i[2].substr(1).split(":"),e=parseInt(o[0],10)*60+parseInt(o[1],10),!e||(i[2].charAt(0)==="+"?t.setMinutes(t.getMinutes()-e):t.setMinutes(t.getMinutes()+e)),t}return null},ve=function(n){var i=n===null||n===t?"":n.toString(),r=i.indexOf(".");return r!==-1?i.length-r-1:0},ye=function(n){return n===""?null:n===null||n===t?n:parseFloat(n.toString())},lf=function(n,t){var r="";switch(t){case":Date":r=ct.format(n,"d");break;case":DateTime":case":DateTimeOffset":r=ct.format(n,i());break;case":TimeSpan":r=f(n);break;case":Decimal":case":Double":case":Single":t===":Decimal"&&(n=ye(n)),r=ct.format(n,"n"+ve(n).toString());break;default:r=n.toString()}return r},af=function(n,i){var u="",r,e,f,o,s;return n!==t&&n!==null&&(r=br(i.propertyType),e=r.primitiveType.id,f=r.semanticType?r.semanticType.id:"",u=f===":Date"?lf(n,f):lf(n,e)),u},vs=function(){return[/^\s*\S+.*/,/^\s*\S+.*@\S+\s*$/]},ys=function(n,t){var a,f,o,ft=t.propertyType,p=br(ft),e=p.primitiveType.id,v=p.semanticType?p.semanticType.id:"",h,c,l,w=ct.culture().numberFormat,s,tt,b,k,d,g,y;if(e===":String"&&n===""&&!!it(t,":@Required")&&!!it(t,":@AllowEmptyString"))return{value:""};if(!n)return{value:null};if(a=n.toLowerCase(),e===":Byte"||e===":Int16"||e===":Int32"||e===":Int64")f=ct.parseInt(n),isNaN(f)||n.indexOf(w["."])!==-1?o=u("validation_invalidValue_integer"):(e===":Byte"?(h=0,c=255):e===":Int16"?(h=-65536,c=65535):e===":Int32"?(h=-4294967296,c=4294967295):e===":Int64"&&(h=-18446744073709551616,c=18446744073709551615),(f<h||f>c)&&(o=u("validation_invalidRange_2args",ct.format(h,"n"),ct.format(c,"n"))));else if(e===":Decimal"||e===":Double"||e===":Single")f=ct.parseFloat(n),(isNaN(f)||n.indexOf(w.currency.symbol)!==-1||n.indexOf(w.percent.symbol)!==-1)&&(o=u("validation_invalidValue_decimal"));else if(e===":Boolean")f=a==="true"||a==="1",f||a!=="false"&&a!=="0"&&(o=u("validation_invalidValue_boolean"));else if(v===":Date"||e===":DateTime"||e===":DateTimeOffset")f=ct.parseDate(n,[i(),r()]),!f||isNaN(f.getFullYear())?(f=ct.parseDate(n),(!f||isNaN(f.getFullYear()))&&(o=v===":Date"?u("validation_invalidValue_date"):u("validation_invalidValue_dateTime"))):v===":Date"&&f.setHours(0,0,0,0);else if(e===":TimeSpan")l=/^\s*(\+|-)?((\d+)?\.)?(\d{1,2})?:{0,1}(\d{1,2})?:{0,1}(\d{1,2})?(\.(\d{1,7})?)?\s*$/,s=l.exec(n),s===null?o=u("validation_invalidValue_timespan"):(tt=parseInt(s[3]||"0",10),b=parseInt(s[4]||"0",10),k=parseInt(s[5]||"0",10),d=parseInt(s[6]||"0",10),g=parseInt((s[8]||"0").slice(0,3),10),b>23||k>59||d>59||g>999?o=u("validation_invalidRange_timespan"):(y=tt*864e5+b*36e5+k*6e4+d*1e3+g,s[1]==="-"&&(y=-y),f={ms:y,__edmType:"Edm.Time"}));else if(e===":Guid")f=n,l=/^(\{{0,1}([0-9a-fA-F]){8}(-([0-9a-fA-F]){4}){3}-([0-9a-fA-F]){12}\}{0,1})$/,l.test(f)||(o=u("validation_invalidValue_guid"));else if(v===bi+":WebAddress")l=/^\s*(http|https):\/\/(.*)$/,f=l.test(n)?n:"http://"+n.replace(/^\s*/,"").replace(/\s*$/,"");else if(v===bi+":EmailAddress"){var rt=vs(),nt=it(t,bi+":@EmailAddressProperties"),ut=n.replace(/@.*$/,"");f=rt[1].test(n)||!nt||!nt.defaultDomain||!rt[0].test(ut)?n:ut+"@"+nt.defaultDomain.replace(/^\s*@/,"")}else f=n;return{value:o?null:f,error:o}}}(),function(){function e(n){var t;return n.length>0&&(t=n[n.length-1]),t}function h(n,t){return{state:n,changeSetIndex:t}}function c(n,t){return n._.__metadata.uri+" "+t._.__metadata.uri}function l(n,t,i,r,u){var f,e;return t===n._endNames[0]?(f=i,e=u):(f=u,e=i),c(f,e)}function w(t,i,r,u){var f=this._loadedLinks,e=l(this,t,i.details,r,u.details),o=f[e];o||(f[e]=new s(t,i,r,u,n.unchanged))}function t(n,t,r){var e=n._addedLinks,u=!0,f;if(r){for(f=e.length-1;f>=0;f--)if(u=t(e[f],f),u===!1)break}else i.each(e,function(n,i){return u=t(i,n)});u!==!1&&i.each(n._loadedLinks,function(n,i){return u=t(i,n)})}function a(t,i,r,f){var s,h=t.state,e,o;return t[i]===r&&(h===n.added||h===n.unchanged)&&(e=t[f],o=e.details.entityState,o!==u.deleted&&o!==u.discarded&&(s=e)),s}function v(n,i,r,u,f){var o=[],e;return t(n,function(n){return(e=a(n,i,r,u),e)?(o.push(e),!f):!0}),o}function b(n,t,i){return v(this,n,t,i)}function k(n,t,i){return v(this,n,t,i,!0)[0]}function d(n,t,i){var u=[],r;return this._addedLinks.forEach(function(f){r=a(f,n,t,i),r&&u.push(r)}),u}function g(n,i){var r=!1;return t(this,function(t){return r=t[n]===i,!r}),r}function o(n,t,i){var r=n._states,u;r||(r=n._states=[]),u=e(r),!u||u.changeSetIndex!==i?r.push(h(t,i)):u.state=t}function nt(i,r,u,f){var h=r.details._.__changeSetIndex,a=this._propertyNames[u],c,l,e,v;return t(this,function(t){return t[i]===r&&(t[u]===f&&(t.state===n.unchanged||t.state===n.deleted?c=t:l=t),(t.state===n.unchanged||t.state===n.added)&&(e=t)),!(c&&l&&e)}),!e||(e.state===n.unchanged?(o(e,n.deleted,h),v=e[u]):o(e,n.discarded,h),fr(e[u],a,st.remove,r)),f&&(l?o(l,n.added,h):(!c||c.state!==n.unchanged||o(c,n.deleted,h),this._addedLinks.push(new s(i,r,u,f,n.added,h))),fr(f,a,st.add,r)),v}function tt(n,t,i,r){var u=this,f=u._loadedLinks,e=l(u,n,t.details,i,r.details),o=f[e];o&&(delete f[e],fr(r,u._propertyNames[i],st.remove,t))}function it(i,r,u){var f;return t(this,function(t){return t.state!==n.discarded&&t[i]===r?(f=t[u],!1):!0}),f}function rt(i,r,u){var e=this,o=e._propertyNames[u],f;t(e,function(t,s){t[i]===r&&(f=t.state,f===n.added||f===n.discarded?(e._addedLinks.splice(s,1),f===n.added&&fr(t[u],o,st.remove,r)):f===n.deleted&&(t._states=null,fr(t[u],o,st.add,r)))},!0)}function ft(i,r,u){var s=this,h=s._propertyNames[u],c,f,l,o,a;return t(s,function(t,v){t[i]===r&&(c=e(t._states),c.changeSetIndex===r.details._.__changeSetIndex&&(f=c.state,f===n.added||f===n.discarded?(f===n.added&&(l=t),a=et(s,r,u,h,t,v,f),a&&(o=a)):(t._states=null,o=t[u])))},!0),l&&fr(l[u],h,st.remove,r),o&&fr(o,h,st.add,r),o}function et(t,i,r,u,f,e){var s=f._states,h;return s.length===1?(t._addedLinks.splice(e,1),s=null):s.pop(),!s||f.state!==n.added||(h=f[r]),h}function ot(n,i){var u,f,o,s;t(this,function(t){t[n]===i&&(u=t._states,f=e(u),o=f.changeSetIndex,o===i.details._.__changeSetIndex&&(u.length>1&&(s=u.length-2,u[s].changeSetIndex===o-1&&u.splice(s,1)),f.changeSetIndex-=1))})}function ht(){var i=this,f=i._endNames[0],e=i._endNames[1],r=i._loadedLinks;t(i,function(t,i){var h,l,o,s;switch(t.state){case n.added:h=t[f],l=t[e],o=h.details,s=l.details,o.entityState===u.unchanged&&s.entityState===u.unchanged&&(t._states=null,r[c(o,s)]=t);break;case n.deleted:delete r[i]}}),i._addedLinks.length=0}var s=r.Link,n=r.LinkState,p=r.LinkSet,u=r.EntityState;ut(s,{state:y(function(){var t=this._states;return t?e(t).state:n.unchanged})}),dc=function(t,i,r,u,f,e,o){t[i]=r,t[u]=f,e===n.added&&(t._states=[],t._states.push(h(e,o)))},ut(p,{attachLink:w,getTargetEntities:b,getTargetEntity:k,getAddedEntities:d,hasLinks:g,setReferenceLink:nt,deleteReferenceLink:tt,getAnyReferenceEntity:it,discardReferenceChanges:rt,cancelReferenceChanges:ft,applyReferenceChanges:ot,resetAfterSave:ht}),gc=function(n,t,i){f(n,"_endNames",t),f(n,"_propertyNames",i),f(n,"_loadedLinks",{}),f(n,"_addedLinks",[])}}(),function(){function n(n,t){n.setMilliseconds(n.getMilliseconds()+t)}function u(t,i){n(t,i*864e5)}var t=3,i;bl=function(){return new Date},i={now:function(){return bl()},today:function(){var n=this.now();return n.setHours(0),n.setMinutes(0),n.setSeconds(0),n.setMilliseconds(0),n},endOfDay:function(){var n=this.now();return n.setHours(23),n.setMinutes(59),n.setSeconds(59),n.setMilliseconds(999),n},startOfWeek:function(){var n=this.today();return u(n,0-n.getDay()),n},endOfWeek:function(){var t=this.startOfWeek();return u(t,7),n(t,-1),t},startOfMonth:function(){var n=this.today();return n.setDate(1),n},endOfMonth:function(){var t=this.startOfMonth();return t.setMonth(t.getMonth()+1),n(t,-1),t},startOfQuarter:function(){var n=this.startOfMonth(),i=n.getMonth();return n.setMonth(i-i%t),n},endOfQuarter:function(){var i=this.startOfMonth(),r=i.getMonth();return i.setMonth(r-r%t+t),n(i,-1),i},startOfYear:function(){var n=this.today();return n.setMonth(0,1),n},endOfYear:function(){var t=this.startOfYear();return t.setFullYear(t.getFullYear()+1),n(t,-1),t}},ru("relativeDates",i),ru("relativeDateTimeOffsetDates",i),w("relativeDates",r.relativeDates),w("relativeDateTimeOffsetDates",r.relativeDates)}(),function(){var t={notDetermined:"NotDetermined",forms:"Forms"},n=t.notDetermined,i=new l.Promise(function(t){try{cu.request({headers:{accept:"application/json;odata=verbose"},requestUri:ie+"/Microsoft.LightSwitch.SecurityData.svc/GetAuthenticationType",method:"GET"},function(i){n=i.GetAuthenticationType,t(n)},function(){t(n)})}catch(r){t(n)}});f(r,"securityDataService",{AuthenticationType:t,getAuthenticationType:function(){return i}})}(),function(){function h(n,t,i,r){var o,e=it(n,":@MaxLength"),f,s;return e&&(f=r,!!f&&!!f.length&&f.length>e.value&&(s=u("validation_max_length_1args",e.value),o=new ai(t,s))),o}function c(n,i,r,f){var e,s=it(n,":@Required"),h=n,o=!1;return s&&(f!==""||br(h.propertyType).primitiveType.id!==":String"||it(n,":@AllowEmptyString")||(o=!0),(f===t||f===null||o)&&(e=new ai(i,u("validation_required")))),e}function l(n,i,r,f){var a,e=it(n,":@Range"),o,s,h=null,c=null,l;if(e){switch(r){case":Date":case":Date?":h=":Date",o=new Date(e.minimum),s=new Date(e.maximum);break;case":DateTime":case":DateTime?":h=":DateTime",o=new Date(e.minimum),s=new Date(e.maximum);break;case":DateTimeOffset":case":DateTimeOffset?":h=":DateTimeOffset",o=cf(e.minimum),s=cf(e.maximum);break;default:f!==t&&f!==null&&(l=parseFloat(f),(l<e.minimum||l>e.maximum)&&(c=u("validation_invalidRange_2args",e.minimum,e.maximum)))}!h||!!f&&(!!o&&f.getTime()<o.getTime()||!!s&&f.getTime()>s.getTime())&&(c=u("validation_invalidRange_2args",e.minimum&&lf(o,h),e.maximum&&lf(s,h))),!c||(a=new ai(i,c))}return a}function a(n,t,i,r){var l,h=it(n,":@DecimalConstraint"),e,o,c,f,s;return!r||!h||(e=Math.abs(r),o=e.toString().split("."),c=h.precision,f=h.scale,o[0].length>c-f?s=u("validation_decimalconstraints_precision_length_2args",e,c-f):!!o[1]&&o[1].length>f&&(s=u("validation_decimalconstraints_scale_length_2args",e,f)),s&&(l=new ai(t,s))),l}function v(n,t,i,r){var s,h,f=it(n,e),o=!1;return!r||!f||!f.formats||(f.__regexparray||ws(f),d(f.__regexparray).each(function(n){return o=n.test(r),!o}),o||(h=u("validation_phonenumber_invalidFormat"),s=new ai(t,h))),s}function y(n,t,i,r){var e,h,c=it(n,o),y=it(n,s),l=vs(),a=l[0],v=l[1],f=!0;return!r||!c||(a.test(r)?c.domainRequired&&(f=v.test(r)):f=!1),f||(h=u("validation_emailaddress_invalidFormat"),e=new ai(t,h)),e}function f(t,i){var r;for(r in i)n[r]&&(t[r]=!0)}var n,i=r.EntityState,e=bi+":@PhoneNumberValidation",o=bi+":@EmailAddressValidation",s=bi+":@EmailAddressProperties";ws=function(n){var t,e,u,o,i,f,s,r,h;if(e=n.formats,e)for(n.__regexparray=[],n.__formatarray=e.split(";"),f=0,s=n.__formatarray.length;f<s;f++){for(u=n.__formatarray[f].replace(/[^ACN]/gi," ").replace(/\s{2,}/g," ").replace(/^\s*/,"").replace(/\s*$/,""),i=0,t="^[^a-z\\d]*?",o="",r=0,h=u.length;r<h;r++)if(o===u[r])i++;else{i>1&&(t+="{"+i.toString()+"}"),i>0&&(t+=")");switch(u[r]){case"C":case"A":t+="(\\d";break;case"N":t+="([a-z\\d]";break;case" ":t+="[^a-z\\d]+"}i=u[r]===" "?0:1,o=u[r]}i>1&&(t+="{"+i.toString()+"}"),i>0&&(t+=")"),t+="\\s*(?:(extension|extn\\.?|ext\\.?|ex\\.?|x\\.?|#)\\s*([a-z\\d]*))?\\s*$",n.__regexparray[f]=new RegExp(t,"i")}},n={":@MaxLength":h,":@Required":c,":@Range":l,":@DecimalConstraint":a,"Microsoft.LightSwitch.Extensions:@EmailAddressValidation":y,"Microsoft.LightSwitch.Extensions:@PhoneNumberValidation":v},ps=function(t,r,u){var o=[],y=t,p=!y.entity?null:y.entity,h=!p?null:p.details.entityState,c,b,l,s=t.getModel(),e=s.propertyType,w,a={},v;if(h===i.deleted||h===i.discarded||u&&h===i.unchanged||t.isReadOnly)return o;ou(e)&&(w=e,e=w.underlyingType),f(a,s),!!e&&es(e)&&f(a,e);for(l in a)v=e,s[l]&&(v=s),c=n[l](v,t,s.propertyType.id,r),!c||o.push(c);return o}}(),function(){function wt(n){function f(n){var r=ii(n),t=i[r];t||(t=i[r]={}),i=t}function e(n){i=u,n.split("/").forEach(f)}var t=n,r,i,u={};do r=t._expand,typeof r=="string"&&r.split(",").forEach(e),t=t._source;while(t);return u}function ht(n,t,i,r){var e;if(!(n.length<=0)&&!(rt.keys(i).length<=0)){var v=n[0],y=v.details,l=y.properties,o,f,s,a,h,c,u,p=n.length;for(e in i)if(e in l&&(o=l[e],f=o._entry,h=[],c=[],f.kind==="reference"||f.kind==="collection")){for(s=f.serviceName,a=hl(o),u=0;u<p;u++)wl(n[u],f,a,t[u][s],r,h,c),t[u][s]=null;ht(h,c,i[e],r)}}}function b(n){var i,t;if(Array.isArray(n))n.forEach(b);else for(i in n)i!=="__metadata"&&(t=n[i],t instanceof Date&&t.__edmType!=="Edm.DateTimeOffset"?t.setMinutes(t.getMinutes()+t.getTimezoneOffset()):typeof t=="object"&&b(t))}function g(n,t,i){var r={message:n};return i&&(r.validationResult=new ai(t,i)),r}function ct(n){var t=n&&n.statusCode;return!t||typeof t=="number"||(t=parseInt(t,10)),t}function nt(n,t){var o=[],ft=n.message,f=n.response,d,ot,r,a,v,s,y,h,nt,p,e,tt,c,it,w,b,rt,ut,k,l,et;if(!ft)return null;if(d=ct(f),!f||200<=d&&d<=299)return o.push(g(ft)),o;try{a=i.parseJSON(f.body),v=a&&(a.error||a["odata.error"]),e=v&&v.message&&v.message.value}catch(ot){try{s=i.parseXML(f.body),s&&(nt=s.documentElement&&s.documentElement.prefix,p=nt&&nt+"\\:",p=p||"",y=i(s))}catch(ot){}!y||(h=y.find(p+"message"),h.length||(h=y.find("message")),!h.length||(e=h.text()))}if(e){try{tt=i.parseXML(e),tt&&(c=i(tt))}catch(ot){}c?(it=c.find("ValidationResult"),it.length>0&&!!t?i.each(it,function(n,r){w=i(r),b=w.find("Message").text(),rt=w.find("Target").text(),ut=w.find("Property").text(),l=null,rt&&ut&&(i.each(t._entitySets,function(n,t){return k=t._loadedEntities[rt],!k}),k&&(l=k.details.properties[ii(ut)])),et=l?l.name+": "+b:b,o.push(g(et,l,b))}):r=c.find("EntityConflicts").length>0?u("conflict_dialog_message"):c.find("Message").text()||e):r=e}else r=u("dataService_status_error_message",f.statusCode,f.statusText);return!r&&r!==""||o.push(g(r)),o}function bt(n){var t=n._metadataPromise;return t||(t=n._metadataPromise=at(function(t){var i=n._serviceUri+"/$metadata";cu.read(i,t.code(function(n){t.complete(n)}),t.code(function(i){t.error(i),n._metadataPromise=null}),cu.metadataHandler)})),t}function tt(n){o(s.queryDataStart);return at(function(t){function u(n){var i=nt(n),r=[];i&&(r=i.map(function(n){return n.message})),t.error(r.join("\r\n"))}function f(f){var h={MinDataServiceVersion:"3.0"},a={requestUri:e,recognizeDates:!0,headers:h},c=pr("SPHostUrl"),l=pr("SPAppWebUrl");f&&(h.accept="application/json;q=0.8, application/json;odata=fullmetadata;q=0.7, application/atomsvc+xml;q=0.5, */*;q=0.1"),c&&(h["X-SPHostUrl"]=c),l&&(h["X-SPAppWebUrl"]=l),cu.read(a,t.code(function(u){o(s.queryDataEnd);var e=[],h=u?i.isArray(u.results)?u.results:[u]:[],c=n._mergeOption,l,f;b(h),i.each(h,function(n,t){r&&(t=as(r,t,c)),e.push(t)}),!!r&&e.length>0&&(l=wt(n),ht(e,h,l,c)),f=u&&u.__count,!f||typeof f!="string"||(f=parseInt(f,10),f===Number.NaN&&(f=-1)),t.complete({totalCount:f,results:e}),o(s.queryDataApplyEnd)}),t.code(function(n){o(s.queryDataEnd);var i=ct(n.response);i===404?t.complete({totalCount:0,results:[]}):u(n)}),null,null,f)}var e=n._requestUri,r=n._entitySet;!!r&&st?bt(r.dataService.details).then(function(n){f(n)},function(n){u(n)}):f(),t.interleave()})}function lt(n){return n||yi.defaultMergeOption||r.MergeOption.unchangedOnly}function vt(n){var t=n.getTimezoneOffset(),i;return t===0?"Z":(t<0?(i="+",t=-t):i="-",i.concat(c(Math.floor(t/60)),":",c(t%60)))}function kt(n,i){if(n===t||n===null)return n;i.charAt(0)!==":"&&(i=":"+i);switch(i){case":Binary":case":Binary?":case":Decimal":case":Decimal?":case":Guid":case":Guid?":case":Int64":case":Int64?":return n.toString();case":DateTimeOffset":case":DateTimeOffset?":return n.__edmType="Edm.DateTimeOffset",n.__offset||(n.__offset=vt(n)),n;case":DateTime":case":DateTime?":case":Date":case":Date?":return n=new Date(n.valueOf()),n.setMinutes(n.getMinutes()-n.getTimezoneOffset()),n;default:return n}return}function yt(t,r,u,f,e){f===n.added?(r.method="POST",t.newEntities.push(r)):(r.method="MERGE",t.existingEntities.push(r),r.headers.Prefer="return-content");var v=r.data={},o,s,c,l,a,h,y,p;i.each(u.properties.all(),function(i,w){w instanceof ot&&(o=w._entry.serviceName,w instanceof k?(w.isChanged||f===n.added&&e.hasOwnProperty(o))&&(y=w.getModel(),p=br(y.propertyType).primitiveType,v[o]=kt(e[o],p.id)):w._entry.kind==="reference"&&(f===n.added||w.isChanged)&&(s=f===n.added?ll(u,w):w.value,s?(c=s.details,l=c.entityState,a=c._,h=l===n.added?"$"+a.__contentID:a.__metadata.uri,f===n.added&&l===n.added?t.links.push({method:"PUT",requestUri:"$"+e.__contentID+"/$links/"+o,data:{uri:h}}):v[o]={__metadata:{uri:h}}):f===n.modified&&t.links.push({method:"DELETE",requestUri:r.requestUri+"/$links/"+o})))})}function dt(t,r){o(s.saveDataStart);var f=t.details,a=f.dataWorkspace.details,l,c,v=t.details._serviceUri+"/$batch",e={newEntities:[],existingEntities:[],links:[]},h;if((l=a._nestedChangeSets.length>0)||(c=t.details.getChanges()).length===0)if(o(s.saveDataEnd),l)fu(u("dataService_save_with_nested_changes"));else{r.complete();return}c.forEach(function(n,t){n.details._.__contentID=t.toString()}),c.forEach(function(t){var r=t.details,u=r.entityState,l=r.entitySet,o=r._,i={recognizeDates:!0},s=i.headers={},h,c;s["Content-ID"]=o.__contentID,s.DataServiceVersion="3.0",u===n.added?(i.requestUri=l._requestUri.substr(f._serviceUri.length+1),yt(e,i,r,u,o)):(h=o.__metadata,i.requestUri=h.uri.substr(f._serviceUri.length+1),c=h.etag,c&&(s["If-Match"]=c),u===n.modified?yt(e,i,r,u,o):u===n.deleted&&(i.method="DELETE",e.existingEntities.push(i)))}),cu.request({requestUri:v,method:"POST",data:{__batchRequests:[{__changeRequests:[].concat(e.newEntities,e.existingEntities,e.links)}]},recognizeDates:!0},r.code(function(t){var l=t.__batchResponses[0].__changeResponses,a=[],e,u,v;l.length===1&&(h=nt(l[0],f)),h||(i.each(l,function(t,r){var l=r.headers,w=l&&l["Content-ID"],v,o,s,f,h,y,p;w&&(e=c[parseInt(w,10)],u=e.details,o=u.entityState,s=u.entitySet,f=u._,h=[],v={entity:e,oldEntityState:o,oldHasEdits:u.hasEdits,newEntityData:r.data},o===n.added?(b(r.data),i.each(u.properties.all(),function(n,t){t instanceof k?r.data[t._entry.serviceName]!==t.value&&h.push(t):al(u,t,r.data)}),v.changedProperties=h,u._=r.data,f=u._,i.each(s._addedEntities,function(n){return this===e?(s._addedEntities.splice(n,1),!1):!0}),s._loadedEntities[f.__metadata.uri]=e):o===n.modified?(y=f.__original,i.each(u.properties.all(),function(n,t){var i;t instanceof ot&&t.isChanged&&(t instanceof k?(i=t._entry.serviceName,y[i]=f[i]):vl(u,t),h.push(t))}),v.changedProperties=h,p=l&&l.ETag,p&&(y.__metadata.etag=p),u._=y):o===n.deleted&&(delete s._loadedEntities[f.__metadata.uri],f.__entityState=n.discarded),a.push(v))}),i.each(f._linkSets,function(n,t){t.resetAfterSave()}),i.each(f.dataWorkspace.details._linkSets,function(n,t){t.resetAfterSave()}),i.each(a,function(t,r){e=r.entity,u=e.details;switch(r.oldEntityState){case n.added:i.each(r.changedProperties,function(){this.dispatchChange("value"),e.dispatchChange(this.name),f.dispatchEvent("contentchange",this)}),r.oldHasEdits&&u.dispatchChange("hasEdits"),u.dispatchChange("entityState");break;case n.modified:i.each(r.changedProperties,function(){this.dispatchChange("originalValue"),this.dispatchChange("isChanged"),this.dispatchChange("isEdited")}),v=r.newEntityData,v&&ls(e,r.newEntityData),u.dispatchChange("hasEdits"),u.dispatchChange("entityState");break;case n.deleted:u.dispatchChange("hasEdits"),u.dispatchChange("entityState"),f.dispatchEvent("contentchange",e)}f._changeCount--}),f.dispatchChange("hasChanges")),o(s.saveDataEnd),h?r.error(h):r.complete()}),r.code(function(n){h=nt(n,f),o(s.saveDataEnd),r.error(h)}),cu.batchHandler)}function gt(){var i=this,t,n;if(t=at(function(t){try{dt(i,t)}catch(r){n=r;throw r;}}),n)throw n;return t}function ni(){var t=[];return i.each(this.properties.all(),function(){var r=this.value;t=t.concat(r._addedEntities),i.each(r._loadedEntities,function(){this.details.entityState!==n.unchanged&&t.push(this)})}),t}function ti(){i.each(this.getChanges(),function(){this.details.discardChanges()})}function ri(){var n=this.dataService,f=null,s=r.services.modelService,t,e,i,u,o;return!!n&&s.isLoaded&&(e=n.details,u=e.dataWorkspace,u&&(o=u.details,i=d(o.properties.all()).first(function(t){return t.value===n}),i&&(t=nf(),t&&(f=eu(t.globalItems,i.name,function(n){return fs(n)}))))),f}function ui(){var u=this._details,t=this._entry,i=u._entitySets,r=t.name,n=i[r];return n||(i[r]=n=new a(this.dataService,t)),n}function fi(){function t(n){p.call(this,n)}return t}function ei(n,t,i,r){var f=n,e=fi(n),u={};return ki(null,null,n,e,v),ut(e,{_serviceUri:t}),i&&i.forEach(function(n){var t=n.name;n.serviceName=t,n.get=function(){return this.details.properties[t].value},u[t]=ar(n,a,et)}),r&&r.forEach(function(n){n.serviceName=n.name,u[n.name]=n}),ut(f,u),f}function oi(n){var t,i;if(n){switch(n.charAt(0)){case"Z":return 0;case"+":t=1;break;case"-":t=-1;break;default:return null}return i=n.substr(1).split(":"),t*(parseInt(i[0],10)*60+parseInt(i[1],10))}return null}function si(n){var i=n,r,t;return!i.__offset||(r=oi(i.__offset))===null?n.getFullYear().toString()+"-"+c(n.getMonth()+1)+"-"+c(n.getDate())+"T"+c(n.getHours())+":"+c(n.getMinutes())+":"+ft(n.getSeconds(),n.getMilliseconds(),i.__ns)+vt(n):(t=new Date(n.valueOf()),t.setUTCMinutes(t.getMinutes()+r),t.getUTCFullYear().toString()+"-"+c(t.getUTCMonth()+1)+"-"+c(t.getUTCDate())+"T"+c(t.getUTCHours())+":"+c(t.getUTCMinutes())+":"+ft(t.getUTCSeconds(),t.getUTCMilliseconds(),i.__ns)+i.__offset)}function c(n){return n<10?"0"+n.toString():n.toString()}function ft(n,t,i){var r;return t||i?(i||(i=0),r=(1e3+t)*1e4+i,c(n)+"."+r.toString().substr(1)):c(n)}function pt(n,t){var i,r;return d(n.details.properties.all()).each(function(n){return d(n.value.details.properties.all()).each(function(n){return(i=n.value,i.getEntityType()===t)?(r={entitySet:i,model:n.getModel()},!1):!0}),!r}),r}var v=r.DataService,p=v.Details,et,a=r.EntitySet,l=r.DataServiceQuery,n=r.EntityState,ot=r.Entity.Details.TrackedProperty,k=r.Entity.Details.StorageProperty,st;st=!!vr&&!!vr.version&&!!vr.version.major&&vr.version.major>=1&&!!vr.version.minor&&vr.version.minor>=1&&!!vr.version.build&&vr.version.build>=1,f(r,"queryable",{filter:function(n){var t=new l(this);return f(t,"_filter",n),t},orderBy:function(n,t){var i=new l(this);return f(i,"_orderBy",n),f(i,"_orderByOnly",t),i},orderByDescending:function(n,t){var i=new l(this);return f(i,"_orderBy",n+" desc"),f(i,"_orderByOnly",t),i},thenBy:function(n){var t=new l(this);return f(t,"_orderBy",n),t},thenByDescending:function(n){var t=new l(this);return f(t,"_orderBy",n+" desc"),t},expand:function(n){var t=new l(this);return f(t,"_expand",n),t},skip:function(n){var t=new l(this);return f(t,"_skip",n),t},top:function(n){var t=new l(this);return f(t,"_take",n),t},includeTotalCount:function(){var n=new l(this);return f(n,"_includeTotalCount",!0),n},merge:function(n){var t=new l(this);return f(t,"__mergeOption",n),t},search:function(n){var t=new l(this);return f(t,"_search",n),t}}),ut(l,r.queryable),hf=function(n){return typeof n=="number"&&n>0},ut(l,{execute:function(){var n=this,t=n,i;do{if(i=t._afterQueryExecuted,ci(i))break;t=t._source}while(t);return i?at(function(t){tt(n)._thenEx(function(r,u){if(r)t.error(r);else{try{i(n,u)}catch(f){t.error(f)}t.complete(u)}}),t.interleave()}):tt(n)},_requestUri:y(function(){var h,n=this,a,r=[],e,o,c,s,u=[],l=!1,f=[],t=[];do{if(n._rootUri){h=n._rootUri;break}typeof n._filter=="string"&&(r.length===0?r.unshift(n._filter):(r.length===1&&(r[0]="("+r[0]+")"),r.unshift("("+n._filter+")"))),typeof n._orderBy=="string"&&(l||(n._orderByOnly&&(l=!0,u=[]),u.unshift(n._orderBy))),typeof n._expand=="string"&&f.push(n._expand.replace(/\./g,"/")),typeof n._search!="string"||!n._search||s||(s=n._search),typeof e!="number"&&hf(n._skip)&&(e=n._skip),typeof o!="number"&&hf(n._take)&&(o=n._take),typeof c!="boolean"&&n._includeTotalCount&&(c=n._includeTotalCount),n=n._source}while(n);return n._queryParameters&&i.each(n._queryParameters,function(n,i){i!=="null"&&t.push(encodeURIComponent(n.toString())+"="+encodeURIComponent(i.toString()))}),r.length>0&&t.push("$filter="+encodeURIComponent(r.join(" and "))),u.length>0&&(u=u.map(function(n){return encodeURIComponent(n).replace(/\%20/g," ").replace(/\%2C/g,",")}),t.push("$orderby="+u.join(","))),f.length>0&&(f=f.map(function(n){return encodeURIComponent(n).replace(/\%2C/g,",").replace(/\%2F/g,"/")}),t.push("$expand="+f.join(","))),typeof e=="number"&&t.push("$skip="+e.toString()),typeof o=="number"&&t.push("$top="+o.toString()),c&&t.push("$inlinecount=allpages"),typeof s=="string"&&(!this._entitySet||!this._entitySet._model||!this._entitySet._model.entityType||it(this._entitySet._model.entityType,":@NotSearchable")||t.push("_search="+encodeURIComponent(s))),t.length>0&&(h+="?"+t.join("&")),h}),_mergeOption:y(function(){var t,n=this;do{if(t=n.__mergeOption,t)break;n=n._source}while(n);return lt(t)})}),tl=function(n,t,i,r){f(n,"_source",t),f(n,"_entitySet",t?t._entitySet:null),f(n,"_rootUri",i),f(n,"_queryParameters",r)},ut(a,r.queryable),ut(a,{canInsert:y(function(){return!!this._model.canInsert}),canUpdate:y(function(){return!!this._model.canUpdate}),canDelete:y(function(){return!!this._model.canDelete}),_mergeOption:y(function(){return lt()}),getModel:function(){return this._model},getEntityType:function(){return this._entityType},load:function(){return tt(this)},addNew:function(){return new(this.getEntityType())(this)}}),nl=function(n,t,i){var r=t.details;n.dataService=t,n.name=i?i.name:null,f(n,"_model",r.properties[i.name].getModel()),f(n,"_entityType",i.elementType),f(n,"_requestUri",r._serviceUri+"/"+encodeURIComponent(i.serviceName)),f(n,"_rootUri",n._requestUri),f(n,"_entitySet",n),f(n,"_addedEntities",[]),f(n,"_loadedEntities",{})},ut(v,{saveChanges:gt}),il=function(n,t){t&&(n.details.dataWorkspace=t)},ut(p,{hasChanges:h(null,function(){return this._changeCount>0}),getChanges:ni,discardChanges:ti,_findModel:ri,contentchange:lr(),dispatchEvent:ts(function(n,t,i){i.call(this,n,t);var f=this.dataWorkspace,r,u;f&&(r=f.details,n==="contentchange"?r.dispatchEvent("contentchange",t):n===ff&&t==="hasChanges"&&(u=this.hasChanges?++r._changeCount==1:--r._changeCount==0,u&&r.dispatchChange("hasChanges")))})}),rl=function(n,t){n.dataService=t,f(n,"_entitySets",{}),f(n,"_linkSets",{}),f(n,"_changeCount",0)},kl=function(n){i.each(n.getChanges(),function(){sl(this.details)})},dl=function(n){var t=0;return i.each(n.getChanges(),function(){ol(this.details)&&t++}),t},e(p,"EntitySetProperty",function(n,t){dr.call(this,n,t),this.dataService=this.owner},dr,{value:y(ui),_findModel:function(){return eu(this._details.getModel().entitySets,this._entry.name)}}),et=p.EntitySetProperty,le=function(n,i){var u,l,a,o,r,f,s,h,e;if(n===t||n===null)return"null";i.charAt(0)!==":"&&(i=":"+i);switch(i){case":Binary":case":Binary?":return"binary'"+n+"'";case":Date":case":DateTime":case":Date?":case":DateTime?":return u=n,"datetime'"+u.getFullYear().toString()+"-"+c(u.getMonth()+1)+"-"+c(u.getDate())+"T"+c(u.getHours())+":"+c(u.getMinutes())+":"+ft(u.getSeconds(),u.getMilliseconds(),u.__ns||0)+"'";case":DateTimeOffset":case":DateTimeOffset?":return l=n,"datetimeoffset'"+si(l)+"'";case":Decimal":case":Decimal?":return n+"M";case":Guid":case":Guid?":return"guid'"+n+"'";case":Int64":case":Int64?":return n+"L";case":Single":case":Single?":return n+"f";case":String":case":String?":return"'"+n.replace(/'/g,"''")+"'";case":TimeSpan":case":TimeSpan?":return a=n,o="",r=a.ms,r<0&&(o="-",r=-r),f=Math.floor(r/864e5),r-=864e5*f,s=Math.floor(r/36e5),r-=36e5*s,h=Math.floor(r/6e4),r-=6e4*h,e=Math.floor(r/1e3),r-=e*1e3,"time'"+o+"P"+(f>0?f.toString()+"D":"")+"T"+s.toString()+"H"+h.toString()+"M"+(r>0?(e+r/1e3).toString():e.toString())+"S'";case":Byte":case":Byte?":case":Boolean":case":Boolean?":case":Double":case":Double?":case":Int16":case":Int16?":case":Int32":case":Int32?":case":SByte":case":SByte?":return n.toString();default:return}return},w("DataService",v),w("_toODataString",le),w("EntitySet",a),w("DataServiceQuery",l),w("_defineDataService",ei),gr=function(n,t){var i=pt(n,t);return i?i.entitySet:null},el=function(n,t){var r=pt(n,t),i=r.model;return!(i.canDelete||i.canInsert||i.canUpdate)}}(),function(){function p(){return this._changeCount>0}function b(n){var t=n._owner._nestedChangeSets;return t.length<=0?!1:n===t[t.length-1]}function o(n,t){var i=n.hasNestedChanges;n._changeCount+=t,i!==n.hasNestedChanges&&n.dispatchChange("hasNestedChanges")}function l(n,t,i){o(n,-n._changeCount),t&&o(t,i)}function a(n,t){var r=n._owner,i=r._nestedChangeSets,u;i.pop(),i.length>0&&(u=i[i.length-1]),l(n,u,t),i.length===0&&r.dispatchChange("hasNestedChangeSets")}function v(n){var t=0;return i.each(n._owner._dataServices,function(n,i){t+=dl(i.details)}),t}function k(){var t=this._owner.getChanges(),r=this._owner._nestedChangeSets.indexOf(this),n=[];return i.each(t,function(){for(var t=this.details._;t;){if(t.__changeSetIndex===r){n.push(this);break}t=t.__parent}}),n}function s(n){b(n)||fu(u("nestedChangeSet_not_last"))}function d(){s(this);var i=v(this),r=this._owner,n=r._nestedChangeSets,t;n.length>1&&(t=n[n.length-2]),l(this,t,i)}function g(){s(this),a(this,v(this))}function nt(){s(this),i.each(this._owner._dataServices,function(n,t){kl(t.details)}),a(this,0)}function tt(){return this._changeCount>0}function it(){return this._nestedChangeSets.length>0}function rt(){var n=[];return i.each(this._dataServices,function(){n=n.concat(this.details.getChanges())}),n}function ft(){return eu(nf().globalItems,"DataWorkspace")}function et(){var t=this._details,i=this._entry,r=t._dataServices,u=i.name,n=r[u];return n||(r[u]=n=new i.type(t.dataWorkspace)),n}function ot(){function i(n){t.call(this,n)}return i}function st(t,i){var r=t,f=ot(t),u={};return ki(null,null,t,f,n),i&&(i.forEach(function(n){var t=n.name;n.serviceName=t,n.get=function(){return this.details.properties[t].value},u[t]=ar(n,n.type,c)}),ut(r,u)),r}var n=r.DataWorkspace,t=n.Details,c;e(n,"NestedChangeSet",function(n){f(this,"_owner",n)},null,{_changeCount:0,hasNestedChanges:h(null,p),getNestedChanges:k,applyNestedChanges:d,commitNestedChanges:g,cancelNestedChanges:nt}),ul=function(){},cs=function(n){var t=n.details,i=t._nestedChangeSets,u=new r.DataWorkspace.NestedChangeSet(t);return i.push(u),i.length===1&&t.dispatchChange("hasNestedChangeSets"),u},ut(t,{hasChanges:h(null,tt),hasNestedChangeSets:h(null,it),getChanges:rt,_findModel:ft,contentchange:lr()}),fl=function(n,t){n.dataWorkspace=t,f(n,"_dataServices",{}),f(n,"_linkSets",{}),f(n,"_nestedChangeSets",[]),f(n,"_changeCount",0)},lu=function(n,t,i){var r=n._nestedChangeSets;0<=t&&t<r.length&&o(r[t],i)},e(t,"DataServiceProperty",function(n,t){dr.call(this,n,t),this.dataWorkspace=this.owner},dr,{value:y(et),_findModel:function(){return eu(this._details.getModel().members,this._entry.name)}}),c=t.DataServiceProperty,w("DataWorkspace",n),w("_defineDataWorkspace",st)}(),function(){function n(n,t){f(this,"_collectionChangeCallback",n),f(this,"_invalidatedCallback",t)}function i(){throw t;}function u(){throw t;}function o(){throw t;}function s(){throw t;}e(r,"CollectionLoader",function(n){n||(n=45),f(this,"_pageSize",n)},null,{canLoadNext:!1,subscribe:n,loadNext:i,reset:u,addNewItem:o,deleteItem:s}),vf=r.CollectionLoader}(),pe=0,function(){function s(n,t,r,u,f){if(this.bindingPath=n,this.bindingSource=t,this.targetProperty=r,this.bindingTarget=u,this.bindingMode=f?f:pt.twoWay,this._resetting=!1,this._lastSourceNode=null,this._lastSourceProperty=null,this._callbacks=[],i.isFunction(u)&&(this.bindingMode===pt.twoWay||this.bindingMode===pt.oneWayFromTarget))throw"Binding initialization error. Invalid binding mode.";}function u(n,t,i){this.host=n,this.propertyName=t,this.callback=i}function h(){var t=this,r=t.bindingTarget;n(t,!1),uc(t)||(r&&!i.isFunction(r)?fi(r,t):fi(t.bindingSource,t))}function c(){this._isDeactivated&&(this._isDeactivated=!1,this._invalidated&&(n(this,!1),this._invalidated=!1))}function l(){this._isDeactivated=!0}function a(){this.bindingSource=null,n(this,!0),this.bindingTarget=null,this.value=null}function n(i,r){function k(){i._isDeactivated?i._invalidated=!0:(w=f(i,i._lastSourceNode[i._lastSourceProperty]),t(i,l,i.targetProperty,w))}function d(){i._isDeactivated?i._invalidated=!0:n(i,!1)}var p=i.bindingPath?i.bindingPath.split("."):[],e=i.bindingSource,a=i._callbacks,s,h,b,c=i._targetCallback,l=i.bindingTarget,w,y;if(!i._resetting)try{for(pe++,i._resetting=!0,s=0;s<a.length;s++)h=a[s],h.host.removeChangeListener(h.propertyName,h.callback);if(a=[],r)i._lastSourceNode=null,i._lastSourceProperty=null,i.value=null;else{for(s=0;s<p.length;s++){if(y=p[s],e&&o(e)&&(i.bindingMode===pt.twoWay||i.bindingMode===pt.oneWayFromSource)&&(h=s===p.length-1?k:d,e.addChangeListener(y,h),a.push(new u(e,y,h))),i._lastSourceNode=e,i._lastSourceProperty=y,!e)break;if(e=e[y],!e&&s<p.length-1){i._lastSourceNode=null;break}}w=f(i,e),t(i,l,i.targetProperty,w)}c&&c.host.removeChangeListener(c.propertyName,c.callback),c=null,r||!!l&&o(l)&&(i.bindingMode===pt.twoWay||i.bindingMode===pt.oneWayFromTarget)&&(b=function(){i._isDeactivated?i._invalidated=!0:v(i)},l.addChangeListener(i.targetProperty,b),c=new u(l,i.targetProperty,b))}finally{i._resetting=!1,pe--,i._callbacks=a,i._targetCallback=c}}function v(n){var r=n._lastSourceProperty,i;n._resetting||(n._resetting=!0,i=y(n,n.bindingTarget[n.targetProperty]),t(n,n._lastSourceNode,n._lastSourceProperty,i),n._resetting=!1)}function f(n,t){var r=n.converter;return!r||!i.isFunction(r.convert)?t:r.convert(t)}function y(n,t){var r=n.converter;return!r||!i.isFunction(r.convertBack)?t:r.convertBack(t)}function o(n){return n.addChangeListener&&n.removeChangeListener}function t(n,t,r,u){uf(n.value,u)&&n._isTargetInitialized||(n.value=u,i.isFunction(t)?t.call(n,u):!t||!r||t[r]===u||(t[r]=u),n._isTargetInitialized=!0)}vt("data",{DataBindingMode:{twoWay:1,oneWayFromSource:2,oneWayFromTarget:3,once:4}}),pt=r.data.DataBindingMode,e("data","DataBinding",s,null,{value:null,bind:h,activate:c,deactivate:l,_onDispose:a})}(),function(){function n(n){return e(null,null,function(){},r.BoundArguments,{length:n})}function t(){for(var t=[],n=0,i=this.length;n<i;n++)t.push(this["arg"+n.toString()]);return t}au=function(t,u){var e=n(u.length),o=new e,f={},s,c=[];return i.each(u,function(n){var i="arg"+n.toString(),l=this.optional,u=this.binding,e=this.value;u?(f[i]=h(e),s=new r.data.DataBinding(u,t,i,o),c.push(s)):f[i]=ns(e),l&&(f[i+".optional"]=!0)}),ut(e,f),c.forEach(function(n){n.bind()}),o},e(r,"BoundArguments",function(){},null,{getCurrentValues:t}),uu(r.BoundArguments)}(),function(){function n(){}function t(n){for(var u=/\{(.*)\}/,t,r=u.exec(this.format),i=this.format,f;!!r;)t=r[1],f=t==="value"?n:this[t]?this[t]:"",i=i.replace("{"+t+"}",f),r=u.exec(i);return i}function i(n){return n}function r(n,t){rs(n,"convert"),this._convert=n,this._convertBack=t}function u(n){return this._convert.call(this,n)}function f(n){return this._convertBack?this._convertBack.call(this,n):n}e("ui.converters","TextFormatConverter",n,null,{convert:t,convertBack:i}),e("ui.converters","GenericConverter",r,null,{convert:u,convertBack:f})}(),function(){function t(n){var t=n._activeQuery,i=t.execute||t.load;return i.call(t)}function n(n){var t,i;return n&&(t=n.details._)&&(i=t.__metadata)&&i.uri}function i(t,i,r){var u=r,f={};return!i||i.length<=0||!r||r.length<=0?u:(u=[],i.forEach(function(t){var i=n(t);i&&(f[i]=!0)}),r.forEach(function(t){var i=n(t);i&&f[i]||u.push(t)}),u)}function r(n,r){var u=this,f=u._activePromise,e;return f||(f=u._activePromise=at(function(o){function c(n,t,r,f){if(e=!0,u._activePromise=null,u._activeQuery=null,t)f.error(t);else{var s=r.results,h=s.length,o,c;u._isFirstPage?(o=s,c=u._getAddedEntities(),!!c&&c.length>0&&(o=c.slice(0).reverse().concat(o)),u._skipCount=h,u._serverCount=u._disablePaging||h<u._pageSize?h:Number.MAX_VALUE,u._isFirstPage=!1):(o=i(u,n,s),u._skipCount+=h,s.length<u._pageSize&&(u._serverCount=u._skipCount)),f.complete(o)}}f=u._activePromise=o.promise();var s=u._baseQuery,l=u._skipCount,h;u.canLoadNext&&!!s?(u._orderBy&&(u._orderBy.sortDirection===sf.ascending?s=s.orderBy(u._orderBy.key,u._orderBy.only):u._orderBy.sortDirection===sf.descending&&(s=s.orderByDescending(u._orderBy.key,u._orderBy.only))),h=u._pageSize,u._disablePaging||(s=s.skip(l).top(h)),n&&(s=s.merge(n)),typeof u._search!="string"||!u._search||(s=s.search(u._search)),typeof u._itemLimit=="number"&&u._itemLimit>0&&(s=s.top(u._itemLimit)),u._activeQuery=s,t(u)._thenEx(function(n,t){u._activeQuery!==s?o.complete():c(r,n,t,o)}),o.interleave()):c(r,null,{totalCount:0,results:[]},o)}),e&&(u._activePromise=null)),f}function u(){this._activePromise=null,this._activeQuery=null,this._isFirstPage=!0,this._skipCount=0}we=function(n){ut(n,{_isFirstPage:!0,_serverCount:0,_skipCount:0,_orderBy:null,_search:null,_itemLimit:null,canLoadNext:y(function(){var n=this;return n._isFirstPage||!n._itemLimit&&!!n._baseQuery&&n._skipCount<n._serverCount}),loadNext:r,reset:u,setOrderBy:function(n){var t=this;t._orderBy=n}})}}(),function(){e(r,"DropdownMenu",function(n){this.items=n},null,{}),e(r,"DropdownItem",function(n,t){this._displayName=n,this._command=t},null,{execute:function(){this._command()},displayName:y(function(){return this._displayName})})}(),function(){function s(t){return n(t,l)}function h(t){return n(t,a)}function n(n,t){var f=new r.ExpressionInfo,i;return cc(n)?(i=n,u(i.links||[],t)):u([n],t)}function u(i,u){var f=new r.ExpressionInfo,y,k,w,ut,g,o,b,p,a,ot,v,s;if(i.length===1&&lc(i[0]))return f.constantValue=i[0].value,f.isConstant=!0,f;if(f.valueBindingPath=u(i),i.length===0)return f.isBinding=!0,f;for(y=0;y<i.length;y++){var e=i[y],c,l,rt=ac(e),st=hc(e),ht=y===i.length-1;if(rt)c=e.member,typeof e.member=="string"?(l=e.member,c=null):l=c.name;else if(st)c=e.target,l=c.name,f.valueBindingPath==="screen"&&l==="showDialog"&&(l="showPopup");else return f;if(k=ii(l),w=f.valueBindingPath,f.valueBindingPath=t(w,k),ht)if(f.lastModelItem=c,f.lastObjectBindingPath=w,rt)ut=t(w,"details","properties",k),f.detailsBindingPath=ut;else{g=it(e,":@AssociatedCollection"),g&&(f.associatedCollection=g.collection),f.createNewEntities=gu(e,":@CreateNewEntity")||[],f.argumentBindings=[],f.isCall=!0;for(var h=e.target.parameters,nt=e.target.source,tt,ft,ct=e,et=ct.arguments||[];nt;)if(!(tt=nt.member))break;else!(ft=tt.parameters)||(h=ft.concat(h||[])),nt=tt.source;if(h){for(o=f.argumentBindings,b=0;b<et.length;b++)p=et[b],a=h.indexOf(p.parameter),a<0||!p.value?o[a]=null:(ot=p.value,v=n(ot,u),v.isConstant?o[a]={value:v.constantValue}:v.isCall||v.isBinding&&(o[a]={binding:v.valueBindingPath}),ou(p.parameter.parameterType)&&(o[a].optional=!0));for(s=0;s<h.length;s++)o[s]||(o[s]={},(ou(h[s].parameterType)||d(f.createNewEntities).any(function(n){return n.targetParameter===h[s]}))&&(o[s].optional=!0))}}}return f.isBinding=!0,f}function c(){return null}function l(n){var t="data";if(n.length===0)return t;switch(f(n[0])){case"Screen":return"screen";case"Application":return"application";case"EntityType":return t;default:return null}}function a(n){if(n.length===0)return"";switch(f(n[0])){case"Screen":return"";case"EntitySets":return"";default:return null}}function f(n){var u=n.member||n.target,t,i;return u&&(i=u.id.replace(/[\/].*/,""),t=r.services.modelService.tryLookupById(i),!t&&nf().name===i)?"Application":ss(t)?"Application":pc(t)?"Screen":he(t)?"EntityType":fs(t)?"EntitySets":void 0}function t(){var n=null;return i.each(arguments,function(t,i){!i||(n=!n?i:[n,i].join("."))}),n}var o="";e(r,"ExpressionInfo",function(){},null,{isConstant:!1,isBinding:!1,detailsBindingPath:null,valueBindingPath:o}),be=s,bs=h,gl=function(t){var i=n(t,c);return i.constantValue},pv=t}(),function(){function i(n){var t={result:n};switch(n){case g.cancel:t.text=u("dialogService_cancel"),t.icon="back";break;case g.ok:t.text=u("dialogService_ok"),t.icon="check";break;case g.yes:t.text=u("dialogService_yes"),t.icon="check";break;case g.no:t.text=u("dialogService_no"),t.icon="delete";break;default:return}return t}function e(n){var t=[];return n&&(Array.isArray(n)?t=n:typeof n=="number"&&nc(nu,n)&&[g.ok,g.yes,g.no,g.cancel].forEach(function(r){(n&r)===r&&t.push(i(r))})),t}var n,t;f(r,"modal",{}),ti=r.modal,vt(ti,{DialogResult:{none:0,cancel:1,ok:2,yes:4,no:8}}),g=ti.DialogResult,vt(ti,{DialogButtons:{none:0,ok:g.ok,okCancel:g.ok|g.cancel,yesNo:g.yes|g.no,yesNoCancel:g.yes|g.no|g.cancel}}),nu=ti.DialogButtons,f(ti,"show",function(n){return at(function(t){n.buttons=e(n.buttons),ti._modalView.show(n).then(function(n){t.complete(n)})})}),f(ti,"close",function(){ti._modalView.close()}),f(ti,"isOpen",function(){return ti._modalView.isOpen()}),ke=function(n,t){function f(n){return n&&n.message&&typeof n.message=="string"?n.message:typeof n=="string"?n:null}var r="Error",u,i;return n.noErrorDialog?l.Promise.as():(n.title&&typeof n.title=="string"?r=n.title:!t||typeof t!="string"||(r=t),Array.isArray(n)?(i="",u=n,u.forEach(function(n){var t=f(n);t&&(i&&(i+="\r\n"),i+=t)})):i=f(n),ti.show({title:r,message:i,buttons:nu.ok}))},vt(r,{MessageBoxButtons:{ok:nu.ok,okCancel:nu.okCancel,yesNo:nu.yesNo,yesNoCancel:nu.yesNoCancel}}),n=r.MessageBoxButtons,vt(r,{MessageBoxResult:{ok:g.ok,yes:g.yes,no:g.no,cancel:g.cancel}}),t=r.MessageBoxResult,w("MessageBoxButtons",r.MessageBoxButtons),w("MessageBoxResult",r.MessageBoxResult),w("showMessageBox",function(i,r){r=r||{};var f=r.buttons||n.ok,u=r.defaultResult;if(!u)switch(f){case n.ok:u=t.ok;break;case n.okCancel:u=t.cancel;break;case n.yesNo:u=t.no;break;case n.yesNoCancel:u=t.cancel;break;default:u=t.cancel}return ti.show({title:r.title,message:i,buttons:f,defaultResult:u})})}(),ks="CommandProgressStart",de="CommandProgressComplete",function(){function o(){var i=n<=0;n++,i&&tt(ks)}function s(){n--,n<=0&&tt(de)}function f(){var r=this,e=r._method,o=r._executionContext,f=r._argumentValues,s=!1,n,u;return!e||!o||!f?!1:(i.each(f,function(n,i){return(i===t||i===null)&&!r._isOptional(n)?(s=!0,!1):!0}),s)?!1:(n=e.canExecute,u=i.isFunction(n)?!!n.apply(o,f):typeof n=="boolean"?n:!0)}function c(){return!1}function a(t){var i=this;return n?l.Promise.as():(o(i),i._isExecuting=!0,at(function(n){var r,f;i._computeCanExecute()||wr("cannotExecuteError",u("command_cannot")),ds=t;try{r=i._method.apply(i._executionContext,i._argumentValues)}finally{ds=null}l.Promise.is(r)?(f=r,f.then(function(t){n.complete(t)},function(t){n.error(t)})):n.complete(r)})._thenEx(function(n,t){if(i._isExecuting=!1,s(i),n)throw n;return t}))}var n=0;e(r,"Command",function(n,t,i){this._method=n,this._executionContext=t,this._argumentValues=i,this.options={}},null,{_method:h(null),_executionContext:h(null),_argumentValues:h(null),_isExecuting:h(!1),canExecute:ei(function(){return!this._isExecuting&&f.call(this)}),execute:a,_computeCanExecute:f,_isOptional:c})}(),function(){e(r,"BoundCommand",function(n,t,i){var u,o,e,s;r.Command.prototype.constructor.call(this,null,null,null),rs(t,"bindingSource"),u=this,o=new r.data.DataBinding(n,t,"_method",u),o.bind(),e=n.replace(/[.][^.]+$/,""),n===e?u._executionContext=t:(s=new r.data.DataBinding(e,t,"_executionContext",u),s.bind()),!!i&&i.length>0?(f(u,"_boundArguments",i),u._argumentValues=u._boundArguments.getCurrentValues(),i.addChangeListener(null,function(){u._argumentValues=u._boundArguments.getCurrentValues()})):u._argumentValues=[]},r.Command,{_isOptional:function(n){return!!this._boundArguments["arg"+n.toString()+".optional"]},_onDispose:function(){var n=this;n._boundArguments&&(k(n._boundArguments),n._boundArguments=null)}})}(),function(){vt(r,{BoundaryOption:{none:"none",nested:"nested",save:"save"}}),ft=r.BoundaryOption,vt(r,{NavigateBackOption:{none:"none",saveBoundary:"saveBoundary",beforeSaveBoundary:"beforeSaveBoundary"}}),di=r.NavigateBackOption,vt(r,{NavigateBackAction:{cancel:"cancel",commit:"commit"}}),ge=r.NavigateBackAction,w("NavigateBackAction",ge)}(),function(){function i(t,i){var u=i.defaultValueSource,r;u&&n(t,u),r=i.isReadOnly,typeof r!="undefined"&&(t._isReadOnly=!!r)}function n(n,t){t&&(n._defaultValue=gl(t))}function t(n){var t=new r.PropertyDescription(n.propertyDefinition);return t._defaultValue=n._defaultValue,t._isReadOnly=n._isReadOnly,t}function u(n){var r=t(this);return i(r,n),r}function f(i){var r=t(this);return n(r,i),r}function o(n){var i=t(this);return i._defaultValue=n,i}e(r,"PropertyDescription",function(t){this.propertyDefinition=t;var i=t.propertyType;i&&!yc(i),n(this,t.defaultValueSource),this._isReadOnly=!!t.isReadOnly},null,{_defaultValue:null,isReadOnly:y(function(){return this._isReadOnly}),defaultValue:y(function(){return this._defaultValue}),propertyType:y(function(){return this.propertyDefinition.propertyType}),isAttachable:y(function(){return!!this.propertyDefinition.isAttachable}),isInheritable:y(function(){return!!this.propertyDefinition.isInheritable}),propertyId:y(function(){return this.propertyDefinition.id}),propertyName:y(function(){return this.propertyDefinition.name}),applyPropertyOverrides:u,applyDefaultValueOverride:f,applyDefaultValueOverrideFromConstant:o})}(),function(){function t(t,i){t in this.values&&n(this,t,i)}function n(n,t,i){var f=r.services.modelService.tryLookupById(t),u=ii(f.name,!0);u in n.values&&(delete n.values[u],delete n.values[t]),rt.defineProperty(n.values,u,{configurable:!0,enumerable:!0,writable:!1,value:i}),rt.defineProperty(n.values,t,{configurable:!0,enumerable:!0,writable:!1,value:i})}e(r,"PropertyDictionary",function(t,r){var u=this;this.descriptions=t,this.values={},this.contentItemName=r,i.each(t,function(t,i){n(u,i.propertyId,i.defaultValue)})},null,{setValue:t})}(),function(){function c(n){return w(this),k(this,n),d(this,n),g(this,this._parentView),nt(this,this._placeholderInParent),this._stateIsResolved=!0,this._properties}function l(n,t){var r,i;if(!t||!(r=oc(t)))return!1;for(i=n._parentView;i;){if(r.id===i.id)return!0;i=i.baseControl}return!1}function a(n){if(!t){t=[],u=[];var f=v(n);i.each(f,function(n,i){i.isAttachable&&i.attachedPropertyAvailability==="ImmediateChildren"?u.push(new r.PropertyDescription(i)):t.push(new r.PropertyDescription(i))})}return t}function v(){var r=[],u=us(vc);return i.each(u,function(n,t){t.properties&&i.each(t.properties,function(n,t){t.isInheritable&&!t.isAttachable,t.isAttachable&&r.push(t)})}),!n||!n.properties||i.each(n.properties,function(n,t){t.isAttachable||r.push(t)}),r}function y(n){var t=a(n).slice(0);return i.each(u,function(i,r){l(n,r.propertyDefinition)&&t.push(r)}),t}function p(n,t){var i=t;!i||s(n,i)}function s(t,u){var f=u.baseControl;f||(f=n),f&&(n&&f.id===n.id||s(t,f)),u.propertyOverrides&&i.each(u.propertyOverrides,function(n,i){var r=i.property.id,u=t._properties[r];!u,t._properties[r]=u.applyPropertyOverrides(i)}),u.properties&&i.each(u.properties,function(n,i){i.isAttachable||(t._properties[i.id]=new r.PropertyDescription(i))})}function w(n){var t=y(n);i.each(t,function(t,i){var r;!i.isInheritable||!n._ownerPropertyValues||!(r=n._ownerPropertyValues[i.propertyDefinition.id])||(i=i.applyDefaultValueOverrideFromConstant(r)),n._properties[i.propertyDefinition.id]=i})}function b(n,t,i){var r=t.id,u=n._properties[r];u&&(n._properties[r]=u.applyDefaultValueOverride(i))}function k(n,t){t&&p(n,t)}function d(n,t){!t||!t.propertySources||o(n,t.propertySources)}function g(n,t){!t||!t.childItemPropertySources||o(n,t.childItemPropertySources)}function nt(n,t){!t||!t.propertySources||o(n,t.propertySources)}function o(n,t){i.each(t,function(t,i){b(n,i.property,i.source)})}var h=":RootControl",n,t,u;wv=function(){n=null,t=null,u=null},e(r,"PropertyDefaultsResolver",function(t,i,u,e){f(this,"_ownerPropertyValues",i),f(this,"_placeholderInParent",u),f(this,"_parentView",e),f(this,"_properties",{}),n||(n=r.services.modelService.tryLookupById(h))},null,{_stateIsResolved:!1,resolveProperties:c})}(),function(){ki(r,"Screen",function(n,t,i){hu.call(this),na(this,n,t,i)},function(n){ef.call(this,n),ta(this,n)},hu),e(r,"VisualCollection",function(n,t){ra(this,n,t)})}(),th=ot("IsDynamicTile","TileList"),no=ot("WidthSizingMode"),function(){function ut(){var n=this;n.children.forEach(k),n.children=null,n.commandItems.forEach(k),n.commandItems=null,n._binding=null,n._detailsBinding=null,n._choicesSourceBinding=null,n._externalBindings=null,n.parent=null,n._view=null,n.__details=null,n.__screen=null,n.__value=null,n.__data=null,n.__choicesSource=null}function ft(n){var t=this,i=t.model,r=i.choicesSource,u;t.kind=i.kind,t.name=i.name,t.displayName=rr(i.displayName),t.description=rr(i.description),r&&(u=be(r),t._choicesSourceBindingPath=u.valueBindingPath),t._initializeCore(n)}function et(n){var t=this,r=t.model,i;t.data=n,t.children=[],t.commandItems=[],t._parseDataSource(),!t.parent||t.parent.kind==="Collection"||(t.data=t.parent.value),t._resolveProperties(),ui(t),t._parseChoiceList(),t.kind===ht.value&&t.valueModel&&(i=it(t.valueModel,":@MaxLength"),!i||(t.maxLength=i.value)),!!t.parent&&t.parent._isActivated&&t._activate(),t._isUnderList=!!t.parent&&(t.parent.kind===ht.collection||t.parent._isUnderList)}function st(){var n=this,t,i,r;if(n._bindingInitialized){if(!n._detailsBinding||n._detailsBinding.activate(),!n._binding||n._binding.activate(),!n._choicesSourceBinding||n._choicesSourceBinding.activate(),r=n._externalBindings,!!r)for(t=0,i=r.length;t<i;t++)r[t].activate()}else f(n,"_bindingInitialized",!0),ti(n);for(t=0,i=n.children.length;t<i;t++)n.children[t]._activate();for(t=0,i=n.commandItems.length;t<i;t++)n.commandItems[t]._activate();n._isActivated=!0}function ct(){var n=this,t,i,r;if(!n._detailsBinding||n._detailsBinding.deactivate(),!n._binding||n._binding.deactivate(),!n._choicesSourceBinding||n._choicesSourceBinding.deactivate(),r=n._externalBindings,!!r)for(t=0,i=r.length;t<i;t++)r[t].deactivate();for(t=0,i=n.children.length;t<i;t++)n.children[t]._deactivate();for(t=0,i=n.commandItems.length;t<i;t++)n.commandItems[t]._deactivate();n._isActivated=!1}function lt(){var n=this,t,r,i;if(!!n._stringValueConversionError)try{n._doNotUpdateValue=!0,a(n)}finally{n._doNotUpdateValue=!1}for(i=n.children,t=0,r=i.length;t<r;t++)i[t]._refreshStringValue()}function at(n){this.parent=n,n.children.push(this)}function yt(n){this.parent=n,n.commandItems.push(this)}function wt(n){var r=0,t,u=this._isClone,i;if(this.name===n)return this;if(!!this.children)while(r<this.children.length)if(i=this.children[r++],i._isClone===u&&(t=i.findItem(n),!!t))return t;if(r=0,!!this.commandItems)while(r<this.commandItems.length)if(i=this.commandItems[r++],i._isClone===u&&(t=i.findItem(n),!!t))return t;return t}function o(n,t,i){var r,f=n.details,e=n.children,u,s;if(!f||n.kind!==ht.value||to(n)||(r=ps(f,n.value,i)),r?(!n._stringValueConversionError||r.push(n._stringValueConversionError),c(n,r)):l(n),t)for(u=0,s=e.length;u<s;u++)o(e[u],t,i)}function bt(n){o(this,n,!0)}function kt(n){return this.validationResults.length?!0:n?d(this.children).any(function(){return this.hasValidationErrors(n)}):!1}function dt(n,t){if(!t||!i.isFunction(t))throw u("databinding_invalid_callback");var e=new r.data.DataBinding(n,this,"",t,pt.oneWayFromSource);e.bind(),this._externalBindings?this._externalBindings.push(e):f(this,"_externalBindings",[e])}function p(n){return n.pageKind!==gi.none}function gt(){var n=this,i=n.model,r=!!n.parent&&n.parent.kind!=="Collection",t;i.dataSource?n.kind===ht.command?(n.bindingPath=null,f(n,"_detailsBindingPath",null)):(t=be(i.dataSource),n.bindingPath=t.valueBindingPath,n.bindingPath==="data"&&r?f(n,"_detailsBindingPath","parent.details"):f(n,"_detailsBindingPath",t.detailsBindingPath),n.valueModel=t.lastModelItem):(n.bindingPath="data",r&&f(n,"_detailsBindingPath","parent.details"))}function ti(n){function u(){var t=n.details,i=t&&t.owner,u=i&&i.details;n.kind===ht.value&&(n._stringValueUpdating||!!t&&(t.isChanged||!!u&&u.entityState===r.EntityState.added)?o(n,!1,!1):l(n)),n._validated=!0}var i;!n._detailsBindingPath||(f(n,"_detailsBinding",new s(n._detailsBindingPath,n,"details",n,pt.oneWayFromSource)),n._detailsBinding.bind()),!n.bindingPath||(f(n,"_binding",new s(n.bindingPath,n,"value",n)),n._binding.bind()),i=n._choicesSourceBindingPath,i&&(f(n,"_choicesSourceBinding",new s(i,n,"choicesSource",n)),n._choicesSourceBinding.bind()),n.addChangeListener("details",function(){n._validated=!1,ni(function(){n._validated||u()})}),n.addChangeListener("value",function(){n._valueUpdating=!0;try{if(n._stringValueUpdating||n.kind!==ht.value||a(n),u(),n.kind!==ht.collection){var e=n.value,r=n.children,f=n.commandItems,t,i;if(r)for(t=0,i=r.length;t<i;t++)r[t].data=e;if(f)for(t=0,i=f.length;t<i;t++)f[t].data=e}}finally{n._valueUpdating=!1}}),n.addChangeListener("stringValue",function(){if(!n._stringValueUpdating){n._stringValueUpdating=!0;try{n._valueUpdating||n._doNotUpdateValue||n.kind!==ht.value||li(n)}finally{n._stringValueUpdating=!1}}}),n.value!==t&&n.dispatchChange("value")}function ri(){var n=this,t=n.parent,u=n.model,e=t?t.properties:{},o=null,s=new r.PropertyDefaultsResolver(n.name||n.displayName,e,o,n.parent?n.parent.controlModel:null),h=s.resolveProperties(n.controlModel);f(n,"_dictionary",new r.PropertyDictionary(h,n.name)),u.propertySources&&i.each(u.propertySources,function(){var t=oi(n,this);n._dictionary.setValue(t.property.id,t.value)})}function ui(n){n.horizontalAlignment=n.properties[b],n.widthSizingMode=n.properties[th]?vi.stretchToContainer:n.properties[no],n.heightSizingMode=n.properties[g],f(n,"_isHStretch",n.widthSizingMode===vi.stretchToContainer),f(n,"_isVStretch",n.heightSizingMode===er.stretchToContainer)}function oi(n,t){var e=t.property,f,i,u,o;return"value"in t?f=t.value:!e.isAction||!t.source||(i=be(t.source),u=au(n,i.argumentBindings),(!!i.associatedCollection||i.createNewEntities.length>0)&&(o=i.lastModelItem,u.length=o.parameters.length,u["arg"+(u.length++).toString()]={canExecute:hi(n,i),beforeShown:ci(n,i)}),f=new r.BoundCommand(i.valueBindingPath,n,u),fi(f,u),fi(n,f)),{property:e,value:f}}function hi(t,i){return function(){var r=!0,e=i.createNewEntities,s=t.screen.details.dataWorkspace,u=i.associatedCollection,f,o;return(u&&(f=t.screen[ii(u.name)]),r=d(e).all(function(){var t;if(u||!this.entityType){if(u)return f.addNew.canExecute.apply(f)}else return t=n.msls.application[this.entityType.name],gr(s,t).canInsert;return!0}),!r)?r:(!u||d(e).first(function(){return!this.entityType})||(o=f.selectedItem,r=!!o),r)}}function ci(t,i){return i.createNewEntities.length>0?function(){var f=this,r,e,u;i.createNewEntities.forEach(function(o){i.associatedCollection||!o.entityType?i.associatedCollection&&(e=t.screen[ii(i.associatedCollection.name)],u=e.addNew()):(r=n.msls.application[o.entityType.name],u=new r(gr(f.details.dataWorkspace,r))),o.targetParameter&&(f[ii(o.targetParameter.name)]=u)})}:null}function c(n,t){t=t||[],t.forEach(function(n){n._isInternal=!0});var i=!n._internalValidationResults||!n._internalValidationResults.length,r=!!t&&!t.length;i&&r||(n._internalValidationResults=t,n.dispatchChange(v))}function l(n){c(n,[])}function a(n){var u="",r=n.value,f=!1,e;yf(n),r!==t&&r!==null&&(n.choiceList&&i.each(n.choiceList,function(){return this.value===r?(u=this.stringValue,f=!0,!1):!0}),f||(n.details?(e=n.details.getModel(),u=af(r,e)):u=r.toString())),n.stringValue=u}function li(n){var r=n.stringValue,u=!1,f,t,e;n.choiceList&&i.each(n.choiceList,function(){return this.stringValue===n.stringValue?(r=this.value,u=!0,!1):!0}),u||!n.details?n.value=r:(f=n.details.getModel(),t=ys(r,f),t.error?(e=new ai(n.details,t.error),io(n,e)):(yf(n),n.value===t.value&&o(n,!1,!1),n.value=t.value,a(n)))}function yi(){var n=this,u,t,f,r;n.kind===ht.value&&n.valueModel&&(t=gu(n.valueModel,":@SupportedValue"),t&&(n.choiceList=[],r=it(n.valueModel,":@Required"),r||n.choiceList.push({value:"",stringValue:""}),i.each(t,function(){n.choiceList.push({value:this.value,stringValue:rr(this.displayName)||this.value})})))}function pi(){return this.kind===ht.tab?gi.tab:this.kind===ht.popup?gi.popup:gi.none}function wi(){var t=this.details,i,u,n,f,o,e;return!t&&!this.value?!1:this.kind===ht.command&&!!(i=this.properties[tt])&&!i.canExecute&&!i._isExecuting?!1:(u=t&&t.owner,n=u&&u.details,n&&"entityState"in n&&(f=n.entityState,f===r.EntityState.deleted||f===r.EntityState.discarded))?!1:(o=this._backingIsEnabled,typeof this._backingIsEnabled=="boolean")?o:(e=this.parent,!!e&&!p(this))?e.isEnabled:!0}function bi(n){this._backingIsEnabled=n}function ki(){var n=this,i=n.details,r=i&&i.isReadOnly,u=n._backingIsReadOnly,t=n.parent;return typeof r=="boolean"&&r?!0:typeof u=="boolean"?u:!!t&&!p(n)&&t.kind!==ht.collection?t.isReadOnly:!1}function di(n){this._backingIsReadOnly=n}function nr(){var n=this._backingIsVisible,t;return typeof n=="boolean"?n:this.properties[rt]&&!this.isEnabled?!1:(t=this.model,!t.isHidden)}function tr(n){this._backingIsVisible=n}function ir(){var n,t;return this.kind===ht.command?!1:(n=this.details,n&&(t=n.isLoaded,typeof t=="boolean"))?!t&&!n.loadError&&!this.displayError:!1}function ur(){if(this.kind===ht.command)return!1;if(this._backingDisplayError)return this._backingDisplayError;var n=this.details;return n?n.loadError:null}function fr(n){this._backingDisplayError=n}function or(){return this.isVisible?this.displayError?nt.hasDisplayError:this.isLoading?nt.loading:this.isEnabled?this.isReadOnly?nt.readOnly:!this.validationResults.length||this.kind===ht.command?nt.normal:nt.hasValidationError:nt.disabled:nt.hidden}var s=r.data.DataBinding,b=ot("HorizontalAlignment"),g=ot("HeightSizingMode"),tt=ot("Tap"),rt=ot("HiddenIfDisabled","RootCommand"),v="validationResults";vt(r,{AttachedLabelPosition:{leftAligned:"LeftAligned",rightAligned:"RightAligned",topAligned:"Top",hidden:"Hidden",none:"None"}}),si=r.AttachedLabelPosition,vt(r,{HorizontalAlignment:{left:"Left",right:"Right"}}),nh=r.HorizontalAlignment,vt(r,{WidthSizingMode:{stretchToContainer:"StretchToContainer",fitToContent:"FitToContent",fixedSize:"FixedSize"}}),vi=r.WidthSizingMode,vt(r,{HeightSizingMode:{stretchToContainer:"StretchToContainer",fitToContent:"FitToContent",fixedSize:"FixedSize"}}),er=r.HeightSizingMode,vt(r,{ContentItemKind:{collection:"Collection",command:"Command",value:"Value",details:"Details",group:"Group",screen:"Screen",tab:"Tab",popup:"Popup"}}),ht=r.ContentItemKind,vt(r,{PageKind:{none:"None",tab:"Tab",popup:"Popup"}}),gi=r.PageKind,vt(r,{VisualState:{hidden:"hidden",loading:"loading",hasDisplayError:"hasDisplayError",disabled:"disabled",readOnly:"readOnly",hasValidationError:"hasValidationError",normal:"normal"}}),nt=r.VisualState,to=function(n){var t=n.controlModel;return t?t.isViewer:!1},io=function(n,t){n._stringValueConversionError=t,c(n,[t])},yf=function(n){n._stringValueConversionError&&(n._stringValueConversionError=null,l(n))},e(r,"ContentItem",function(n,t){this.screen=n,this.model=t},null,{application:y(function(){return n.msls.application}),choicesSource:h(),data:h(),details:h(),displayName:h(),description:h(),isEnabled:ei(wi,bi),isReadOnly:ei(ki,di),isLoading:ei(ir),displayError:ei(ur,fr),isVisible:ei(nr,tr),_isActivated:h(),_visualState:ei(or),_backingIsEnabled:h(),_backingIsReadOnly:h(),_backingIsVisible:h(),_backingDisplayError:h(),pageKind:y(pi),properties:y(function(){return this._dictionary.values}),stringValue:h(),value:h(null,function(){return this.__value},function(n){var i,r,t;typeof n=="number"&&!!(i=this.valueModel)&&(r=i.propertyType)&&!!(t=br(r).primitiveType.id)&&(t===":Decimal"||t===":Int64")&&(n=n.toString()),n!==this.__value&&(this.__value=n,this.dispatchChange("value"))}),controlModel:y(function(){var n=this.model;return n.view}),validationResults:h(null,function(){var n=this._internalValidationResults&&this._internalValidationResults.slice(0)||[],t=this._userValidationResults;return t&&(n=n.concat(t)),n},function(n){var t,i,u,f;n?Array.isArray(n)||(n=[n]):n=[],t=this,i=n.map(function(n){return typeof n=="string"?new r.ValidationResult(null,n):n}),i=i.filter(function(n){return!n._isInternal}),u=!t._userValidationResults||!t._userValidationResults.length,f=!i.length,u&&f||(t._userValidationResults=i,t.dispatchChange(v))}),_stringValueConversionError:h(),_alwaysShowValidationResults:ei(function(){var n,t;return n=this._alwaysShowValidationResultsValue||!!this.parent&&this.parent._alwaysShowValidationResults||!!this._stringValueConversionError,n||(t=this.details,n=!!t&&t.isEdited),n},function(n){this._alwaysShowValidationResultsValue=n}),_alwaysShowValidationResultsValue:h(),findItem:wt,validate:bt,hasValidationErrors:kt,dataBind:dt,handleViewDispose:function(n){if(n!==null&&!i.isFunction(n))throw u("view_dispose_invalid_handler");this._customViewDisposeHandler=n},_initialize:ft,_activate:st,_deactivate:ct,_initializeCore:et,_refreshStringValue:lt,_setParent:at,_setCommandItemParent:yt,_parseDataSource:gt,_resolveProperties:ri,_parseChoiceList:yi,_onDispose:ut}),w("ContentItem",r.ContentItem),w("HorizontalAlignment",nh),w("WidthSizingMode",vi),w("HeightSizingMode",er),w("ContentItemKind",ht),w("PageKind",gi)}(),function(){function n(n){var t=this._template,i=t._choicesSourceBindingPath;this.kind=t.kind,this.name=t.name,this.displayName=t.displayName,this.model=t.model,this.screen=t.screen,i&&(this._choicesSourceBindingPath=i),this._initializeCore(n)}function t(){this.bindingPath=this._template.bindingPath,this._detailsBindingPath=this._template._detailsBindingPath,this.valueModel=this._template.valueModel}function i(){this._dictionary=this._template._dictionary}function u(){this.choiceList=this._template.choiceList}e("ui","ContentItemClone",function(n){this._template=n},r.ContentItem,{_initialize:n,_parseDataSource:t,_resolveProperties:i,_parseChoiceList:u,_isClone:!0})}(),function(){function u(){}function o(t,i,r,u){return n(t,i,r,null,u)}function n(t,u,f,e,o){var s,h=new r.ContentItem(t,u),c,a,l,v;if(f?h._setParent(f):!e||h._setCommandItemParent(e),h._initialize(o),i.isArray(u.childContentItems))for(s=0;s<u.childContentItems.length;s++)c=u.childContentItems[s],a=n(t,c,h,null);if(i.isArray(u.commandItems))for(s=0;s<u.commandItems.length;s++)l=u.commandItems[s],v=n(t,l,null,h);return h}function s(n,i,r){return t(n,i,null,r)}function t(n,i,u,f){var e,o=new r.ui.ContentItemClone(n),s,c,h,l;for(i?o._setParent(i):!u||o._setCommandItemParent(u),o._initialize(f),e=0;e<n.children.length;e++)s=n.children[e],c=t(s,o,null);for(e=0;e<n.commandItems.length;e++)h=n.commandItems[e],l=t(h,null,o);return o}e("ui","ContentItemService",u,null,{createContentItemTree:o,cloneContentItemTree:s}),f(r.services,"contentItemService",new u)}(),function(){function s(n){return n.screen["__"+this.name]}function c(n,t){var i=this.name,u=n.properties[i],r=n.screen;f(r,"__"+i,t),u.dispatchChange("value"),r.dispatchChange(i)}function o(n){var t=this.name,i=n.properties[t],r=n._propertyData[t],u=!0;return!i.isLoaded&&u?i.load():l.Promise.as(r._value)}function a(n,t){var i=n._propertyData[t.name];return gs(n,t,i)}function v(t,i,u){var h=t,l=b(t),f={};return ki(null,null,t,l,n),i&&i.forEach(function(n){var i=n.name;typeof n.kind!="string"&&(n.kind="local");switch(n.kind){case"local":n.type||(n.type=String),f[i]=ar(n,n.type,e.LocalProperty),n.getValue=s,n.setValue=c;break;case"reference":n.type||(n.type=r.Entity),f[i]=ar(n,n.type,e.ReferenceProperty),n.async=!0,n.getValue=o;break;case"collection":n.type=ia(t,n),n.elementType||(n.elementType=r.Entity),f[i]=ar(n,n.type,e.CollectionProperty),n.async=!0,n.getValue=o,n.rawGet=a}n.get=function(){return n.getValue(this.details)},n.setValue&&(n.set=function(t){n.setValue(this.details,t)})}),u&&u.forEach(function(n){n.value?f[n.name]=n:(f[n.name]=function(){var t=h[n.name+"_execute"],i;return ci(t)&&(i=t.call(null,this)),i},f[n.name].canExecute=function(){var t=!0,i=h[n.name+"_canExecute"];return ci(i)&&(t=!!i.call(null,this)),t})}),ut(h,f),h}function p(n,i){var f,e,u,r;return n===t||n===null?"null":(f="",e=i.propertyType,he(e)?(u=[],e.properties.forEach(function(t){os(t)&&u.push({key:t.name,value:le(n[t.name],t.propertyType.id)})}),u.length===1?f=u.pop().value:u.length>1&&(r="",u.forEach(function(n){r!==""&&(r=r+","),r=r+n.key+"="+n.value}),f=r)):f=af(n,i),f)}function b(){function t(n){e.call(this,n)}return t}var n=r.Screen,e=n.Details;ua=function(n,t,r){var u;return!i.isFunction(n)||!!r&&!i.isArray(r)?u:(u=rt.create(n.prototype),n.call(u,r,t),u)},na=function(n,t,i,e){var rt=n,ut=rt.constructor,s=n.details,c,l,v,b,k,a,g,y,w=!1,nt=!1,tt=!1,h,o;s.dataWorkspace=t,f(s,"_modelId",i),h=s.getModel(),h&&(n.details.displayName=rr(h.displayName),n.details.description=rr(h.description)),o="",e&&h.properties&&(l=d(h.properties).where(function(n){return!!it(n,":@IsParameter")}).array,e.length>l.length&&fu(u("screen_too_many_parameter_values")),e.forEach(function(i,u){c=ii(l[u].name),v=s.properties[c],nt=v instanceof r.Screen.Details.LocalProperty,tt=v instanceof r.Screen.Details.ReferenceProperty,i instanceof r.Entity?(b=i,k=b.details,a=k.entitySet,!a||!a.dataService||(g=a.dataService.details,!t||g.dataWorkspace!==t||(w=!0))):w=!0,w&&(nt?f(n,"__"+c,i):tt&&(y=s._propertyData[c],y._value=i,y._isLoaded=!0),o!==""&&(o=o+"/"),o=o+encodeURIComponent(p(i,l[u])))}),f(s,"_dataUrl",o))},ta=function(n,t){n.screen=t,f(n,"_model",null),n.serverErrors=[],f(n,"_propertyData",{}),i.each(n.properties.all(),function(){n._propertyData[this.name]={}})},ut(n,{showTab:function(n,t){var i=t?t.beforeShown:null;return r.shell.showTab(n,null,i)},showPopup:function(n){return r.shell.showPopup(n)},closePopup:function(){return r.shell.closePopup()},findContentItem:function(n){return this.details.rootContentItem.findItem(n)}}),f(n.prototype.showTab,"canExecute",function(n,t){return!!t&&ci(t.canExecute)?t.canExecute.apply(this,arguments):!0}),f(n.prototype.showPopup,"canExecute",function(n,t){return!!t&&ci(t.canExecute)?t.canExecute.apply(this,arguments):!0}),ut(e,{displayName:h(),description:h(),serverErrors:h(),saveChangesTo:y(function(){var n=this,t;return n._saveChangesToValue||(t=gu(n.getModel(),":@SaveChangesTo"),f(n,"_saveChangesToValue",[]),t&&i.each(t,function(){var t;!this.property||!(t=this.property.name)||n._saveChangesToValue.push(n.dataWorkspace[ii(t)])})),n._saveChangesToValue}),startPage:y(function(){var n;return this._startPageValue||(n=it(this.getModel(),":@StartPage"),n?f(this,"_startPageValue",this.screen.findContentItem(n.value)):f(this,"_startPageValue",this.pages[0])),this._startPageValue}),validate:function(){var n=[],t,u;return!!this.saveChangesTo&&this.saveChangesTo.length>0&&(t=this.saveChangesTo[0],!t||(u=t.details.getChanges(),i.each(u,function(){i.each(this.details.properties.all(),function(){this instanceof r.Entity.Details.StorageProperty&&(n=n.concat(ps(this,this.value,!0)))})}))),n},rootContentItem:y(function(){if(!this._rootContentItem){var n=this.getModel();f(this,"_rootContentItem",r.services.contentItemService.createContentItemTree(this.screen,n.rootContentItem,null))}return this._rootContentItem}),pages:y(function(){var r=this.rootContentItem,t,i=[],n;if(!!r&&!!(t=r.children))for(n=0;n<t.length;n++)i=i.concat(t[n].children.slice(0));return i}),_findModel:function(){return r.services.modelService.tryLookupById(this._modelId)},_onDispose:function(){this._rootContentItem&&(k(this._rootContentItem),this._rootContentItem=null),this._startPageValue&&(this._startPageValue=null),this._propertyData=null}}),w("_defineScreen",v),w("Screen",n)}(),function(){e(r,"ShellCommandViewModel",function(n,t,i){this.command=n,this.displayName=t,this.name=i},null,{}),or=function(n,t,i,u,f){var e=new r.BoundCommand(n,t,i),o=new r.ShellCommandViewModel(e,u,f);return fi(o,e),o}}(),function(){var n=ot("ScreenType","Screen");e(r,"NavigationUnit",function(n){this.shell=n,this._pageUiControls=[]},null,{boundaryOption:ft.none,popup:!1,nestedChangeSet:null,dialogTitle:h(),pageName:h(),isBrowseMode:function(){var t=this;return!t.isPopupPage&&t.screen.details.rootContentItem.properties[n]==="Browse"},hasChanges:y(function(){var n=this.boundaryOption;return n===ft.save?this.screen.details.dataWorkspace.details.hasChanges:n===ft.nested?!!this.nestedChangeSet&&this.nestedChangeSet.hasNestedChanges:!1}),registerPageUiControl:function(n){this._pageUiControls.push(n)},cleanPageUiControls:function(){this._pageUiControls.forEach(k),this._pageUiControls=[]},_onDispose:function(){var n=this;n.cleanPageUiControls(),n.contentItemTree=null,n.screen=null,n.task=null}}),e(r,"TaskViewModel",function(n,t,i){this.shell=n,this.screen=t,this.taskBoundaryOption=i},null,{screenTitle:h(),_onDispose:function(){var n=this,t=n.tabCommands,i,r;t&&(t.forEach(k),n.tabCommands=null),n.screen=null}})}();var et,fa="activeNavigationUnitChanged",ea="mslsnavigationcomplete",oa,sa="shellCommandStart",ha="shellCommandComplete";(function(){function ht(){return st||(st=nf()),st}function nt(n){return n._startNavigationOperation(null,function(t){var i=v(n,{screenDefinition:n._homeScreen,boundaryOption:ft.save});c(t,b(n,i,!1))})}function ir(t,i,u){var f=gr(u,n.msls.application[t]);return new r.DataServiceQuery({_entitySet:f},f._rootUri+i).execute()}function rr(t){var h,l,a,c,u,v,y,p,w,b="DataWorkspace",o,f="",s,e;return(t=decodeURI(t),o=t.split("/"),o.length!==2)?null:(y=o[0],f=o[1],e=f.indexOf("("),e<=0)?null:(p=f.substr(0,e),w=f.substr(e,f.length-e),s=new n.msls.application[b],!s)?null:(i.each(s.details.properties.all(),function(){var n=this.getModel();if(n.entityContainer.name===y)return c=this.value,!1}),!c)?null:(i.each(c.details.properties.all(),function(){var n=this.getModel();if(n.name===p)return u=this.value,!1}),!u)?null:(v=u.getModel(),h=it(v.entityType,":@DefaultScreen"),!h)?null:(l=h.value.name,a=r.services.modelService.tryLookupById(l),{entityQuery:new r.DataServiceQuery({_entitySet:u},u._rootUri+w),screenDefinition:a,dataWorkspace:s})}function ur(t,i,f){var e=this,h="DataWorkspace",s=e.activeNavigationUnit?e.activeNavigationUnit.screen.details.dataWorkspace:new n.msls.application[h],o=r.services.modelService.tryLookupById(t);if(!o)throw u("shell_invalid_1args",t);return fr(o,i,s).then(function(n){if(e.activeNavigationUnit)return e.showScreen(t,n.arguments,null,null,null,null,f);var i={boundaryOption:ft.save,requestedPageId:f,screenArguments:n.arguments,screenDefinition:o,dataWorkspace:s};return tt(p,1),e._startNavigationOperation(null,function(n){var t=v(e,i);c(n,b(e,t,!1))})})}function fr(n,t,i){return new l.Promise(function(r){var f=[],e;n.properties&&(e=d(n.properties).where(function(n){return!!it(n,":@IsParameter")}).array,e.forEach(function(r,u){var e,o;t&&t[u]&&(t[u]==="null"?f.push({results:[],totalCount:0}):he(r.propertyType)?(e="("+t[u]+")",f.push(ir(n.properties[u].elementType.name,e,i))):(o=ys(t[u],r),f.push({results:[o.value],totalCount:1})))})),l.Promise.join(f).then(function(n){var t=[];n.forEach(function(n){t.push(n.results[0])}),r({arguments:t,dataWorkspace:i})})})}function er(n,t){var r=null,u,i;try{i=rr(t),i&&(r=i.entityQuery.execute().then(function(t){return u=t.results[0],u?(tt(p,1),n._startNavigationOperation(null,function(t){var r=v(n,{boundaryOption:ft.save,screenArguments:[u],screenDefinition:i.screenDefinition,dataWorkspace:i.dataWorkspace});c(t,b(n,r,!1))})):(tt(p,2),nt(n))},function(){return nt(n)})),tt(p,3)}catch(f){r=null}return r?r:nt(n)}function sr(t,i){var f=this,o=pr("entity"),e;return(f.saveCommand=or("commitChanges",this,null,u("shell_saveChanges_btn"),"save"),f.discardCommand=or("cancelChanges",this,null,u("shell_discardChanges_btn"),"discard"),f.okCommand=or("commitChanges",this,null,u("shell_acceptNested_btn"),"ok"),f.cancelCommand=or("cancelChanges",this,null,u("shell_cancelNested_btn"),"cancel"),f.homeCommand=or("navigateHome",this,null,u("shell_home_btn"),"home"),f.backCommand=or("navigateBack",this,null,u("shell_back_btn"),"back"),f.closeCommand=or("navigateBack",this,null,u("shell_close_btn"),"close"),f.logoutCommand=or("logout",this,null,u("shell_logout_btn"),"logout"),t=t||ht(),f.logoPath=wu+t.logo,f.beforeFirstPageNavigationUnit=new r.NavigationUnit(f),f.beforeFirstPageNavigationUnit.boundaryOption=ft.none,f.beforeFirstPageNavigationUnit.index=-1,i&&(f._homeScreen=r.services.modelService.tryLookupById(i)),f._homeScreen||(f._homeScreen=t?t.homeScreen:null),!f._homeScreen)?l.Promise.wrapError(u("shellViewModel_noHomeScreen")):(e=re(n.location),e.screenName?f.showScreenWithParameterQueryStrings(e.screenName,e.screenParameters,e.pageId):o?er(f,o):(tt(p,0),nt(f)))}function hr(){var n=this;return n._currentNavigationOperation?n._currentNavigationOperation.promise():at(function(t){ni(t.code(function(){n._currentNavigationOperation?c(t,n._currentNavigationOperation.promise()):t.complete()}))})}function cr(n,t,i,u,f,e,o){var v=r.services.modelService,s,h,c=this.activeNavigationUnit,l,a;return typeof n=="string"?s=n:h=n,l=c.isBrowseMode()&&c.boundaryUnit.boundaryOption===ft.save?ft.save:ft.nested,u=!!u,a={screenId:s,screenDefinition:h,pageName:i,screenArguments:t,boundaryOption:l,popup:u,beforeShown:f,afterClosed:e,requestedPageId:o},lt(this,a)}function lr(n){o(s.getPopupContentStart);var r=ds,i=this.activeNavigationUnit.screen,t=vt(i,n,!0);return ci(t,i),t._activate(),o(s.getPopupContentEnd),this.shellView.showPopup(t,function(){t._deactivate()},r)}function ar(){return this.shellView.closePopup()}function vr(n,t,i){var r=this,u;if(n===r.activeNavigationUnit.pageName)return oi();var f=vt(r.activeNavigationUnit.screen,n,!1),e=f.pageKind,o=e===gi.popup?ft.nested:ft.none;return t=typeof t=="string"?t:o,u={screen:r.activeNavigationUnit.screen,pageName:n,boundaryOption:t,popup:!1,beforeShown:i,isShowTab:!0},lt(r,u)}function yr(n){ai(this,this.activeNavigationUnit,n)}function br(){var n=this,t=di.none;return n.canApplyNestedChanges?n.applyNestedChanges(t):n.saveChanges(t)}function kr(){var n=this,t=di.beforeSaveBoundary;return n.canApplyNestedChanges?n.applyNestedChanges(t):n.saveChanges(t)}function dr(){var n=this;return n.canCancelNestedChanges?n.cancelNestedChanges():n.discardChanges(di.beforeSaveBoundary)}function kt(n){var t=this;return t.canSaveChanges||rt(),n=bi(t,n),t._startNavigationOperation("saveChanges",function(i){var r=1;ui(function(){li(t,i,function(){var r=yt(t),u=ki(t,n);c(i,a(t,r,!0,u))})},r)})}function dt(n){var t=this;return this.canDiscardChanges||rt(),n=bi(t,n),t._startNavigationOperation(null,function(i){ui(i.code(function(){var f=t.activeNavigationUnit,r=yt(t),u=ki(t,n);c(i,a(t,r,!1,u))}),1)})}function gt(n){this.canApplyNestedChanges||rt();var t=this;return t._startNavigationOperation(null,function(i){t.validateActivePage(i.code(function(u){if(u)i.error(u);else{var e=wi(t,n),f=yt(t);n===r.NavigateBackOption.none&&(f.onlyApplyNestedChanges=!0),c(i,a(t,f,!0,e))}}))})}function ii(){this.canCancelNestedChanges||rt();var n=this;return n._startNavigationOperation(null,function(t){var i=wi(n),r=ut(n,n.activeNavigationUnit,i,!1);c(t,a(n,r,!1,i))})}function nu(){var t=this,u=ht().navigationItems,n,o=u.length,f=[],e,i;if(!t._navigationMenu){for(n=0;n<o;n++)e=u[n].method,i=e[":@ShowScreenMethod"].targetScreen,f[n]=new r.DropdownItem(i.displayName,tu(t,i.name));t._navigationMenu=new r.DropdownMenu(f)}return t._navigationMenu}function tu(n,t){return function(){n.activeNavigationUnit.screen.details.getModel().name!==t&&n.showScreen(t)}}function iu(){return this._homeScreen}function ru(){return"navigationItems"in ht()}function uu(){this.shellView.showNavigationMenu()}function ri(){var n={screenId:null,screenDefinition:this._homeScreen,pageName:null,screenArguments:null,boundaryOption:ft.save,popup:!1,beforeShown:null,afterClosed:null,requestedPageId:null};return lt(this,n)}function fu(n){var t=this,r,i,u;return n=n||1,r=t.activeNavigationUnit.index,i=r-n,(n<=0||i<0)&&oe(null,n,"distance"),u=t.navigationStack[i],t._startNavigationOperation(null,function(n){c(n,t._requestNavigateBack(u))})}function eu(n){var t=this;if(n!==this.activeNavigationUnit)return at(function(i){var r=ut(t,t.activeNavigationUnit,n,!1);pi(t,r,n).then(function(){ni(function(){i.complete()})},function(n){i.error(n||u("command_exec_err"))})})}function ou(n){var t=this,i;return n&&n!==this.activeNavigationUnit?(i=ut(t,t.activeNavigationUnit,n,!0),a(t,i,!1,n)):new l.Promise(function(n){n()})}function fi(){this.shellView.logout()}function su(){for(var n in this.navigationStack)if(this.navigationStack[n].hasChanges)return!0;return!1}function rt(){wr("CannotExecuteError",u("command_cannot"))}function t(n,t){n&&n(t||null)}function c(n,t){t.then(function(t){n.complete(t)},function(t){n.error(t)})}function hu(n,t){o(s.navigationStart);var i=this;return i._currentNavigationOperation&&wr("AlreadyNavigatingError",u("shell_already_nav")),at(function(r){i.shellView.commitActiveElement(),n&&tt(sa,{name:n}),i._currentNavigationOperation=r,t(r),t=null})._thenEx(function(t){if(i._currentNavigationOperation=null,n&&tt(ha,{name:n,error:t}),t)throw t;})}function oi(n){return at(function(t){ni(function(){t.complete(n)})})}function ct(n,t){return n.navigationStack[t]}function si(n,t){return t.index>0?ct(n,t.index-1):null}function cu(n){for(var r=[],i,t=0;t in this.navigationStack;t++)i=this.navigationStack[t],(!n||n(i))&&r.push(i);return r}function hi(n,t){return at(function(i){function r(n){if(n.length===0)i.complete();else{var u=n[0],f=null,e=n.slice(1);try{t(u,i.code(function(n){f=n,f?i.error({error:f,errorElement:u}):r(e)}))}catch(o){i.error({error:o,errorElement:u})}}}r(n)})}function lu(n,t){if(!!t.screenId&&!t.screenDefinition&&(t.screenDefinition=r.services.modelService.tryLookupById(t.screenId),!t.screenDefinition))throw u("shell_invalid_1args",t.screenId);}function v(t,u){var e=i.extend({},v.defaults,u),p=!!e.popup,nt=!!e.isShowTab,l,h,tt,it,w=e.dataWorkspace,a=e.boundaryOption,c,y,f,k,b,g;return o(s.loadScreenStart),e.screen?h=e.screen:(w||(w=t.activeNavigationUnit?t.activeNavigationUnit.screen.details.dataWorkspace:null),l=n.msls.application[e.screenDefinition.name],h=ua(l,w,e.screenArguments)),c=vt(h,e.pageName,!1),c.isVisible=!0,y=d(is(t.navigationStack).map(function(n){return n.task})).first(function(n){return n.screen===h}),y||(y=hf(t,h,a)),nt?(f=t.activeNavigationUnit,f.contentItemTree&&f.contentItemTree._deactivate(),c._activate(),f.contentItemTree=c,f.pageName=c.name,f.requestedPageId=u.requestedPageId):(f=new r.NavigationUnit(t),k=t.activeNavigationUnit?t.activeNavigationUnit.index:-1,b=k+1,f.index=b,f.boundaryOption=a,f.popup=p,f.popupDepth=(t.activeNavigationUnit?t.activeNavigationUnit.popupDepth:0)+(p?1:0),f.screen=h,f.contentItemTree=c,f.pageName=c.name,f.requestedPageId=u.requestedPageId,f.task=y,a===ft.none?t.activeNavigationUnit&&(f.boundaryUnit=t.activeNavigationUnit.boundaryUnit):f.boundaryUnit=f,p&&(g=new r.data.DataBinding("screenTitle",f.task,"dialogTitle",f,pt.oneWayFromSource),g.bind()),t.navigationStack[b]=f,a===ft.nested&&(f.nestedChangeSet=cs(h.details.dataWorkspace)),f.afterClosed=e.afterClosed),e.beforeShown&&e.beforeShown.call(h,h),!l||!l.created||l.created.call(null,h),ci(c,h),o(s.loadScreenEnd),f}function ci(n,t){n.data!==t&&(n.data=t,n.screen=t)}function lt(n,t){var s=n.activeNavigationUnit,h,i,o=!t.isShowTab,f,r,e,u;if(lu(n,t),o){if(f=t.screen?t.screen.details.getModel():t.screenDefinition,r=f.rootContentItem.propertySources,r)for(i=0;i<r.length;i++)if(r[i].property.name==="ShowAsDialog"&&(u=r[i].value,typeof u=="boolean"&&u)){e=!0;break}e&&(t.popup=!0),t.isShowTab||!n.activeNavigationUnit||!n.activeNavigationUnit.popupDepth||(t.popup=!0),n.activeNavigationUnit||(t.popup=!1),yi.enableModalScrollRegions||(t.popup=!1)}return n._startNavigationOperation(null,function(i){var r=sf(n,n.activeNavigationUnit,t.boundaryOption);pi(n,r,null)._thenEx(function(r){if(r)i.error(r);else{var f=v(n,t);c(i,b(n,f,!1))}}).then(null,function(n){i.error(n)})})}function vt(n,t,i){var r,f;if(t){if(r=n.findContentItem(t),f=!1,r)switch(r.pageKind){case gi.tab:f=!i;break;case gi.popup:f=i}f||wr(i?"PopupNotFoundError":"TabNotFoundError",u(i?"shell_popupnotfound_2args":"shell_tabnotfound_2args",t,n.details.getModel().name))}else r=n.details.startPage;return r}function vu(n,i,r,u,f){if(!r.isBackward||!u){t(f);return}var o=i.screen,h="constructor",c=o[h],s=c.beforeApplyChanges,e;if(!s){t(f);return}try{e=s.call(null,o)}catch(a){t(f,a)}e===!1?t(f,new l.ErrorFromName(ot)):l.Promise.is(e)?e._thenEx(function(n,i){n?t(f,n):i===!1?t(f,new l.ErrorFromName(ot)):t(f)}):t(f)}function yu(n,i,r,u,f){var e,o,s;r.isBackward&&i.boundaryOption===ft.nested?(e=i.nestedChangeSet,e&&(u?r.onlyApplyNestedChanges?e.applyNestedChanges():e.commitNestedChanges():e.cancelNestedChanges(),r.onlyApplyNestedChanges||(i.nestedChangeSet=null)),i.contentItemTree._alwaysShowValidationResults=!1,u||i.contentItemTree._refreshStringValue(),t(f)):(o=r.isForward&&r.crossesSaveBoundary||r.isBackward&&i.boundaryOption===ft.save,o?(s=i.screen.details.dataWorkspace.details,u?pu(n,i,function(n){n||(i.contentItemTree._alwaysShowValidationResults=!1),t(f,n)}):(bu(n,i),i.contentItemTree._alwaysShowValidationResults=!1,i.contentItemTree._refreshStringValue(),t(f))):(u||i.contentItemTree._refreshStringValue(),t(f)))}function a(n,t,r,f){function e(n,t){if(n)try{n.call(t,t,r?ge.commit:ge.cancel)}catch(i){}}return at(function(o){var s=t.navigationUnitsCrossedOver.reverse(),h,c;hi(s,function(i,u){vu(n,i,t,r,function(n){u(n)})})._thenEx(function(i){var u=i&&i.error;return u?(u.name===ot&&(u={userCanceled:!0,noErrorDialog:!0}),bt(o,u),!0):hi(s,function(i,u){yu(n,i,t,r,function(n){t.isBackward&&(i!==s[s.length-1]?e(i.afterClosed,i.screen):(h=i.afterClosed,c=i.screen)),u(n)})})})._thenEx(function(r,s){if(!s){var l=null;r&&r.error&&(f&&(f=r.errorElement),l=r.error||u("shell_unknown_save")),t.isForward&&i.each(t.navigationUnitsCrossedOver,function(n,t){t.boundaryOption!==ft.nested||t.nestedChangeSet||(t.nestedChangeSet=cs(t.screen.details.dataWorkspace))}),!f||f===n.activeNavigationUnit?bt(o,l):b(n,f,t.isBrowserMode)._thenEx(function(n){n&&!l&&(l=n),bt(o,l),h&&ni(function(){at(function(n){e(h,c),n.complete()},!0)})})}})})}function pu(n,r,f){var s=r.screen.details,a=s.dataWorkspace.details,e,h,c,l,o,v;if(!a.hasChanges){t(f);return}if(e=oa(),!e){for(h=a.properties.all(),o=0,v=h.length;o<v;o++)if(c=h[o],c.value.details.hasChanges){if(l){t(f,{title:u("screen_save_failed"),message:u("screen_save_multiple_data_sources")});return}l=c.value}e=l.saveChanges()}e._thenEx(function(n){var c=!n,e=[],o="",h,l;c||(i.each(n,function(n,t){n>0&&(o+="\r\n"),o+=t.message,h=t.validationResult,h&&e.push(h)}),l={title:u("screen_save_failed"),message:o}),s.serverErrors.length===0&&e.length===0||(s.serverErrors=e),c&&(r.contentItemTree._alwaysShowValidationResults=!1),t(f,l)}).then(null,function(n){t(f,n)})}function bu(n,t){for(var e=t.screen.details,o=e.dataWorkspace.details,u=o.properties.all(),r,i=0,f=u.length;i<f;i++)r=u[i].value.details,r.hasChanges&&r.discardChanges()}function li(n,t,i){var r=n.activeNavigationUnit;ai(n,r,t.code(function(u){u?t.error(u):ku(n,r.screen,t.code(function(n){n?t.error(n):i()}))}))}function yt(n){var i=n.activeNavigationUnit.boundaryUnit,t=null;return t=i.index===0?n.beforeFirstPageNavigationUnit:si(n,i),ut(n,n.activeNavigationUnit,t,!1)}function ai(n,i,r){var f=i.contentItemTree,e=u("shell_validation_errors");f.validate(!0),f.hasValidationErrors(!0)?(f._alwaysShowValidationResults=!0,t(r,e)):t(r)}function ku(n,r,u){var e=r.details.validate(),s=r.details.rootContentItem,f,o;e.length>0?(f=[],i.each(e,function(){f.push(this.property.name+": "+this.message)}),o=f.join("\r\n"),t(u,o)):t(u)}function vi(n){return d(n).any(function(){return this.details.hasEdits})}function du(n){var i,t;switch(n.boundaryOption){case ft.save:return i=n.screen.details.dataWorkspace,i.details.hasChanges&&vi(i.details.getChanges());case ft.nested:return t=n.nestedChangeSet,!!t&&t.hasNestedChanges&&vi(t.getNestedChanges());default:return!1}}function gu(n,t){return t&&n.screen.details.dataWorkspace.details.hasChanges?!0:!1}function tf(n,t){if(t.isForward)return gu(t.sourceNavigationUnit,t.crossesSaveBoundary);for(var i=0;i<t.navigationUnitsCrossedOver.length;i++)if(du(t.navigationUnitsCrossedOver[i]))return!0;return!1}function pi(n,t,i){var r,f,e;return tf(n,t)?(r=t.crossesSaveBoundary?{message:u("shell_save_message"),title:u("shell_save_title"),buttons:[{text:u("shell_save_btn"),icon:"check",result:g.yes},{text:u("shell_discard_btn"),icon:"delete",result:g.no},{text:u("shell_stay_btn"),icon:"back",result:g.cancel}]}:{message:u("shell_apply_message"),title:u("shell_apply_title"),buttons:[{text:u("shell_apply"),icon:"check",result:g.yes},{text:u("shell_discard_btn"),icon:"delete",result:g.no},{text:u("shell_stay_btn"),icon:"back",result:g.cancel}]},r.defaultResult=g.cancel,e=!1,at(function(u){ti.show(r).then(function(r){function e(){c(u,a(n,t,f,i))}r===g.yes||r===g.no?(f=r===g.yes?!0:!1,f?li(n,u,e):e()):r===g.cancel?u.error({message:"User canceled the navigation by clicking Cancel button",userCanceled:!0,noErrorDialog:!0}):r===g.none?u.error({message:"User canceled the navigation without clicking any buttons",userCanceled:!0,noErrorDialog:!0}):u.error({message:"Cancel the navigation due to unexpected result.",userCanceled:!0,noErrorDialog:!0})})})):t.isBackward?a(n,t,!1,i):oi()}function b(n,t,i){return t===n.beforeFirstPageNavigationUnit&&(t=n.navigationStack[0]),at(function(r){function f(){n.activeNavigationUnit=t,i||nr(n),n.finishNavigation()._thenEx(function(i){i||(tt(fa,n),n.shellView.completeNavigation(t))}),r.complete()}n.activeNavigationUnit!==t&&(o(s.pageActivationStart),n.activeNavigationUnit&&n.activeNavigationUnit.contentItemTree._deactivate(),t.contentItemTree._activate(),o(s.pageActivationEnd)),i?(n.shellView.awaitBrowserNavigation(t).then(function(){nr(n)}),f()):n.shellView.navigate(t).then(f,function(n){r.error(n||u("shell_nav_failed"))})})}function wi(n,t){var i=n.activeNavigationUnit.boundaryUnit,r;return t===di.none?null:(!i||i.boundaryOption!==ft.nested||(r=si(n,i)),r)}function bi(n,t){switch(t){case di.none:case di.saveBoundary:case di.beforeSaveBoundary:return t}return tr}function ki(n,t){var i=n.activeNavigationUnit.boundaryUnit,r;return!i||i.boundaryOption!==ft.save?null:(t===di.none?r=null:t===di.saveBoundary?r=i:(r=i,i.index>0&&(r=ct(n,i.index-1))),r)}function rf(){var n=this.activeNavigationUnit;if(n){var t=n.screen.details,i=t.dataWorkspace.details;return!i.hasNestedChangeSets}return!1}function uf(){return this.canSaveChanges}function ff(){var t=this.activeNavigationUnit,n;return t?(n=t.boundaryUnit,n.boundaryOption===ft.nested&&!!n.nestedChangeSet):!1}function ef(){return this.canApplyNestedChanges}function nr(n){var u=n.activeNavigationUnit.index,t=[],r;o(s.cleanNavigationStackStart),i.each(n.navigationStack,function(n,i){i.index>u&&t.push(i)}),r=t.sort(function(n,t){return t.index-n.index}),i.each(r,function(t,i){of(n,i)}),o(s.cleanNavigationStackEnd)}function of(n,t){delete n.navigationStack[t.index];var i=n.shellView.onNavigationUnitClosed;i&&i.call(n.shellView,t)}function wt(){this.navigationUnitsCrossedOver=[]}function ut(n,t,i,r){var s=i===n.beforeFirstPageNavigationUnit,u=new wt,f,e,o;for(u.sourceNavigationUnit=t,u.targetNavigationUnit=i,u.isBackward=!0,u.isBrowserMode=r,f=t;f;){if(f===i)break;u.navigationUnitsCrossedOver.push(f);switch(f.boundaryOption){case ft.nested:u.crossesNestedBoundary=!0;break;case ft.save:u.crossesSaveBoundary=!0}e=f.index-1,o=ct(n,e),f=o}return u.navigationUnitsCrossedOver=u.navigationUnitsCrossedOver.reverse(),u}function sf(n,t,i){var r=new wt,f,u;if(r.sourceNavigationUnit=t,r.isForward=!0,r.crossesSaveBoundary=i===ft.save,r.crossesNestedBoundary=i===ft.nested,r.crossesSaveBoundary)for(f in n.navigationStack)u=n.navigationStack[f],u.screen===t.screen&&r.navigationUnitsCrossedOver.push(u);else r.navigationUnitsCrossedOver.push(t);return r}function hf(n,t,i){var u=new r.TaskViewModel(n,t,i),o,f,h,c;for(u.home=t.details.getModel().id===n._homeScreen.id,u.tabCommands=[],o=t.details.pages.filter(function(n){return n.pageKind===gi.tab}),f=0;f<o.length;f++){var e=o[f],l=e.name,s=or("showTab",t,au(null,[{value:e.name}]),e.displayName,l),a=new r.data.DataBinding("displayName",e,"displayName",s);a.bind(),u.tabCommands.push(s)}return h=t,c=new r.data.DataBinding("displayName",h.details,"screenTitle",u,pt.oneWayFromSource),c.bind(),u}function bt(n,t){t?n.error(t):n.complete()}var tr=di.beforeSaveBoundary,p="shellShowHomeScreen",cf="AlreadyNavigatingError",ot="Canceled",st;kt.canExecute=function(){return this.canSaveChanges},dt.canExecute=function(){return this.canDiscardChanges},gt.canExecute=function(){return this.canApplyNestedChanges},ii.canExecute=function(){return this.canCancelNestedChanges},ri.canExecute=function(){return!0},fi.canExecute=function(){var n=this;return n._isFormsAuthEnabled},v.defaults={screenId:null,screenDefinition:null,screen:null,pageName:null,dataWorkspace:null,prepend:!1,screenArguments:[]},wt.prototype={isForward:!1,isBackward:!1,isBrowserMode:!1,sourceNavigationUnit:null,targetNavigationUnit:null,navigationUnitsCrossedOver:null,crossesSaveBoundary:!1,crossesNestedBoundary:!1,onlyApplyNestedChanges:!1},e(r,"ShellViewModel",function(){var n=this,t=r.securityDataService;n.navigationStack={},t.getAuthenticationType().then(function(i){n._isFormsAuthEnabled=i===t.AuthenticationType.forms})},null,{activeNavigationUnit:h(),logoPath:h(),canSaveChanges:ei(rf),canDiscardChanges:ei(uf),canApplyNestedChanges:ei(ff),canCancelNestedChanges:ei(ef),applyChanges:br,commitChanges:kr,cancelChanges:dr,saveChanges:kt,discardChanges:dt,applyNestedChanges:gt,cancelNestedChanges:ii,showScreen:cr,showScreenWithParameterQueryStrings:ur,showTab:vr,showPopup:lr,closePopup:ar,navigateBack:fu,navigateHome:ri,logout:fi,openNavigationMenu:uu,hasNavigationMenu:ru,getNavigationMenu:nu,getHomeScreen:iu,_requestNavigateBack:eu,synchronizeAfterBrowserNavigation:ou,validateActivePage:yr,initialize:sr,findNavigationUnits:cu,navigationInProgress:y(function(){return!!this._currentNavigationOperation}),finishNavigation:hr,_startNavigationOperation:hu,anyNavigationUnitHasChanges:su,_isFormsAuthEnabled:h(),_onDispose:function(){var n=this;k(n.saveCommand),k(n.discardCommand),k(n.okCommand),k(n.cancelCommand),k(n.backCommand),k(n.closeCommand),k(n.logoutCommand)}}),f(r,"shell",new r.ShellViewModel),et=r.shell,w("showProgress",function(n){n&&et.shellView.showProgress(n)})})(),function(){function t(n,t){var i=n.getModel();return i?eu(i.properties,t.name):null}function s(n,t){var i,r=[],u;return!t||!(i=t.source)||(u=bs(i),r=u.argumentBindings),au(n.screen,r)}function i(n){var t=n._invalidatedCallback;t&&t()}function a(n,t,i){t.addChangeListener(null,function(){n._delayingInvalidation||(n._delayingInvalidation=!0,setTimeout(function(){n._delayingInvalidation=!1,i()},250))})}function u(n,t){var i=n._entitySet,r;return i||(r=n._baseQuery,r?i=r._entitySet:(t||(t=n._entry.elementType),i=gr(n._screenDetails.dataWorkspace,t)),n._entitySet=i),i}function h(n){var t=n._entry.elementType,i=u(n,t);return new t(i)}function c(n){var t=n._entry.elementType,i=u(n,t);return i.canInsert}function v(n,t){var i=n._collectionChangeCallback,r;i&&t instanceof n._entry.elementType&&(r=t.details.entityState,r===o.added?i(st.add,t):r===o.discarded&&i(st.remove,t))}function p(n,t){var r=n._collectionChangeCallback,i=t.action;!r||i!==st.add&&i!==st.remove||r(i,t.items[0])}function l(n){var t=n._collectionProperty,i=n._collectionChangeHandler,u="collectionchange",r;i&&k(i),t=n._collectionProperty=n._entry.getNavigationProperty.apply(n._screenDetails),t&&(r=yl(t),n._collectionChangeHandler=ku(r,u,n,function(t){p(n,t.detail)}))}var n,o=r.EntityState;ca=function(n,i){return s(n,t(n,i))},e(r,"ScreenCollectionPropertyLoader",function(n,r){var u=this,e=t(n,r),o=!!e.disablePaging;vf.call(u,e.pageSize),f(u,"_screenDetails",n),f(u,"_entry",r),f(u,"_arguments",s(n,e)),o&&f(u,"_disablePaging",!0),a(u,u._arguments,function(){i(u)})},vf,{deleteItem:function(n){n.deleteEntity()},_onDispose:function(){k(this._arguments)}}),n=r.ScreenCollectionPropertyLoader,e(r,"ScreenQueryPropertyLoader",function(t,i){var r=this;n.call(r,t,i),ku(r._screenDetails.dataWorkspace.details,"contentchange",r,function(n){v(r,n.detail)})},n,{_baseQuery:y(function(){return this._entry.createQuery.apply(this._screenDetails,this._arguments.getCurrentValues())}),_getAddedEntities:function(){return u(this)._addedEntities},addNewItem:function(){return h(this)}}),we(r.ScreenQueryPropertyLoader),f(r.ScreenQueryPropertyLoader.prototype.addNewItem,"canExecute",function(){return c(this)}),e(r,"ScreenNavigationPropertyLoader",function(r,u){var f=this,h,c,a,v=[],e,o,y,p,s;n.call(f,r,u),!(h=t(f._screenDetails,f._entry))||!(c=h.query)||!(a=c.source)||(s=bs(a),v.push({binding:s.lastObjectBindingPath})),e=au(r.screen,v),e.addChangeListener(null,function(){l(f),i(f)}),fi(f,e),l(f),!f._collectionProperty||(o=f._collectionProperty._entry.data,y=o.associationSet.ends,p=o.model.fromEnd.name,y.forEach(function(n){if(n.name===p&&!!n.properties){n.properties.forEach(function(n){if(!!n.entityProperty){var t=[],e=n.entityProperty.name,u;t.push({binding:s.lastObjectBindingPath+"."+e}),u=au(r.screen,t),u.addChangeListener(null,function(){var n="__"+f._collectionProperty.name,t=f._collectionProperty._details[n];t.query=null,i(f)})}});return}}))},n,{_baseQuery:y(function(){var t=this,i=t._collectionProperty,n=i&&i.query,r=t._entry.appendQuery;return!n||!r||(n=r.apply(n,t._arguments.getCurrentValues())),n}),_getAddedEntities:function(){var n=[],t=this._collectionProperty;return t&&(n=pl(t)),n},addNewItem:function(){var r=this,n=r._collectionProperty,u=h(r),t,i;return!n||(t=n._entry.data,!t||(i=t.toPropertyName,!i||(u[i]=n.owner))),u}}),we(r.ScreenNavigationPropertyLoader),f(r.ScreenNavigationPropertyLoader.prototype.addNewItem,"canExecute",function(){return c(this)})}(),function(){e(r,"ScreenScalarPropertyLoader",function(n,t,i){var r=this;f(r,"_screenDetails",n),f(r,"_entry",t),f(r,"_arguments",ca(n,t)),r._arguments.addChangeListener(null,i)},null,{load:function(){var n=this,t=n._activePromise,i,r;return t||(t=n._activePromise=at(function(t){i=n._entry.createQuery.apply(n._screenDetails,n._arguments.getCurrentValues()),i.execute()._thenEx(function(i,u){r=!0,n._activePromise=null,i?t.error(i):t.complete(u.results[0])}),t.interleave()}),r&&(n._activePromise=null)),t}})}(),function(){function u(){return this._entry.get.call(this._details.owner)}function v(n){this._entry.set.call(this._details.owner,n)}function f(n,t,i){var r=t._loadPromise;return r||(t._isLoaded&&(t._isLoaded=!1,n.dispatchChange("isLoaded")),t._loading=!0,n.loadError&&(n.loadError=null),r=t._loadPromise=at(i,!!pe),t._loading||(t._loadPromise=null)),r}function o(n,t,i){t._loading=!1,t._isLoaded=!0,n.dispatchChange("isLoaded"),i&&(n.loadError=i),t._loadPromise=null}function p(n,t){return t.getNavigationProperty?new r.ScreenNavigationPropertyLoader(n,t):new r.ScreenQueryPropertyLoader(n,t)}var s=r.Screen,n=s.Details,t,c,i,l,a,w;e(n,"Property",function(n,t){of.call(this,n,t),this.screen=this.owner},of),t=n.Property,e(n,"LocalProperty",function(n,i){t.call(this,n,i)},t,{value:h(null,u,v)}),c=n.LocalProperty,e(n,"RemoteProperty",function(n,i){t.call(this,n,i)},t,{isLoaded:h(!1,function(){var n=this._details,t=n._propertyData[this.name];return!!t._isLoaded}),loadError:h(null),value:h(null,u)}),i=n.RemoteProperty,e(n,"ReferenceProperty",function(n,t){i.call(this,n,t)},i,{load:function(){var n=this,i=n._details,u=n.name,t=i._propertyData[u],e;return e=f(n,t,function(f){var e=t._loader;e||(e=t._loader=new r.ScreenScalarPropertyLoader(i,n._entry,function(){i.properties[u].load()})),e.load()._thenEx(function(i,r){o(n,t,i),t._value!==r&&(t._value=r,n.dispatchChange("value"),n.screen.dispatchChange(u)),i?f.error(i):f.complete(r)}),f.interleave()})}}),l=n.ReferenceProperty,gs=function(n,t,i){var r=i._value,u;return r||(u=p(n,t),r=i._value=new t.type(n,u),fi(r,u),fi(n,r)),r},e(n,"CollectionProperty",function(n,t){i.call(this,n,t)},i,{isReadOnly:y(function(){return el(this._details.dataWorkspace,this._entry.elementType)}),load:function(){var n=this,i=n._details,t=i._propertyData[n.name],r;return r=f(n,t,function(r){function f(i){o(n,t,i),i?r.error(i):r.complete(u)}var u=gs(i,n._entry,t);u.canLoadMore?(u.load()._thenEx(f),r.interleave()):f(null)})}}),a=n.CollectionProperty}(),function(){function p(n){n._loadOperation?n._loadOperation.code(function(){nt(n)})():v(n,!1,n._mergeOption)}function ct(t,r,u){var f=t._data,e=-1;r===st.add?(f.splice(0,0,u),n(t,"change","count"),n(t,"collectionchange",new su(r,[u],-1,0))):(i.each(f,function(n,t){return t===u?(f.splice(n,1),e=n,!1):!0}),e>=0&&(t.selectedItem===u&&(t.selectedItem=null),n(t,"change","count"),n(t,"collectionchange",new su(st.remove,[u],e,-1))))}function b(n){n._deferEvents=!0}function d(n){var t=n._deferredEvents;n._deferEvents=!1,i.each(t,function(){this.type==="change"?n.dispatchChange(this.e):n.dispatchEvent(this.type,this.e)}),t.length=0}function n(n,t,i){n._deferEvents?n._deferredEvents.push({type:t,e:i}):t==="change"?n.dispatchChange(i):n.dispatchEvent(t,i)}function a(t,i,r,u){t[i]!==r&&(t[i]=r,n(t,"change",u))}function lt(){return this._selectedItem}function yt(n){a(this,"_selectedItem",n,"selectedItem")}function g(n,t){a(n,"_isLoaded",t,"isLoaded")}function c(n,t){a(n,"_loadError",t,"loadError")}function v(t,i,r){function s(){e||(e=!0,n(t,"change","state"),n(t,"change","canLoadMore"),c(t,null))}var u=t._loadPromise,e,o;return u?u:(t._loadMorePromise=null,f(t,"_mergeOption",r),u=t._loadPromise=at(function(n){o=!0,t._loadOperation=n,u=t._loadPromise=n.promise(),s(),nt(t)},i),o&&!t._loadOperation&&(t._loadPromise=null),s(),u)}function pt(n){return v(this,n)}function wt(){return v(this,!1,ae.unchangedOnly)}function nt(n){var i=n._loader,t=n._loadOperation,r;if(!i){t&&t.complete();return}i.reset(),r=n._activeLoaderPromise=i.loadNext(n._mergeOption),r._thenEx(function(t,i){n._activeLoaderPromise===r&&bt(n,i,t)}),t&&t.interleave()}function bt(t,r,u){o(s.fillCollectionStart);var f=t._data,e=t._loadOperation;t._loadOperation=null,t._loadPromise=null;try{b(t),u?c(t,u):(c(t,null),f.length=0,i.each(r,function(){f.push(this)}),n(t,"change","state"),n(t,"change","count"),n(t,"collectionchange",new su(st.refresh)),g(t,!0),n(t,"change","canLoadMore"),t.selectedItem=null),d(t)}finally{u?e.error(u):e.complete(t.count),o(s.fillCollectionEnd)}}function kt(t){function o(){if(!i.canLoadMore){var n;n=i._loadPromise?u("visualCollection_load_pending"):u("visualCollection_already_loaded"),fu(n)}}function s(){f||(f=!0,n(i,"change","state"))}var i=this,r=i._loadMorePromise,f,e;return r?r:(o(),r=i._loadMorePromise=at(function(n){var u=i._loader,t;if(!u){n.complete();return}o(),e=!0,i._loadMoreOperation=n,r=i._loadMorePromise=n.promise(),s(),t=i._activeLoaderPromise=u.loadNext(i._mergeOption,i._data),t._thenEx(function(n,r){i._activeLoaderPromise===t&&dt(i,r,n)}),n.interleave()},t),e&&!i._loadMoreOperation&&(i._loadMorePromise=null),s(),r)}function dt(t,r,u){o(s.fillCollectionStart);var f=t._data,e=f.length,h=t._loadMoreOperation;t._loadMoreOperation=null,t._loadMorePromise=null;try{b(t),u?c(t,u):(c(t,null),i.each(r,function(){f.push(this)}),n(t,"change","state"),r.length>1&&(n(t,"change","count"),n(t,"collectionchange",new su(st.add,r,-1,e))),g(t,!0),t.canLoadMore||n(t,"change","canLoadMore")),d(t)}finally{u?h.error(u):h.complete({items:r,startIndex:e}),o(s.fillCollectionEnd)}}function tt(){var n=this._loader.addNewItem();return this.selectedItem=n,n}function rt(){var n=this.selectedItem;n?this._loader.deleteItem(n):fu(u("visualCollection_no_sel"))}function ft(){this.enableSearch=!0}function ot(n){var t=n.details.entitySet.getModel();return it(t.entityType,":@DefaultScreen")}function ht(){var n=this.selectedItem,t=ot(n);return at(function(i){!t||(et.showScreen(t.value.id,[n]),i.complete()),i.error("Navigation to default screen failed. No default screen exists for selected item.")})}var e=r.VisualCollection,l=r.EntityState,t;vt(e,{State:{idle:"idle",loading:"loading",loadingMore:"loadingMore"}}),t=e.State,ra=function(n,t,i){var r=n;r.screen=t?t.owner:null,f(r,"_loader",i),f(r,"_data",[]),f(r,"_deferredEvents",[]),f(r,"_search",null),f(r,"_enableSearch",!1),i.subscribe(function(n,t){ct(r,n,t)},function(){p(r)})},tt.canExecute=function(){var n=this,i=n._loader,r=i.addNewItem.canExecute;return n.state===t.idle&&(!r||r.apply(i))},rt.canExecute=function(){var t=this.selectedItem,n,i;return!!t&&!!(n=t.details)&&!!(i=n.entitySet)&&n.entityState!==l.deleted&&n.entityState!==l.discarded&&(n.entityState===l.added||!!i.canDelete)},ft.canExecute=function(){if(!!this.screen&&!!this.screen.details&&!!this.screen.details.dataWorkspace&&!!this._loader&&!!this._loader._entry&&!!this._loader._entry.elementType){var n=gr(this.screen.details.dataWorkspace,this._loader._entry.elementType)._model.entityType;if(!!n&&!!it(n,":@NotSearchable"))return!1}return!0},ht.canExecute=function(){var n=this.selectedItem;return!!n&&!!ot(n)},ut(e,{_deferEvents:!1,_isLoaded:!1,_loadError:null,_selectedItem:null,canLoadMore:h(null,function(){return!this._loadPromise&&this._loader.canLoadNext}),data:y(function(){return this._data.slice(0)}),count:h(null,function(){return this._data.length}),search:h(null,function(){return this._search},function(n){this._search!==n&&(this._search=n,this._loader._search=n,p(this))}),enableSearch:h(null,function(){return this._enableSearch},function(t){t||(this.search=null);var i="_enableSearch";this[i]=t,n(this,"change","enableSearch")}),isLoaded:h(null,function(){return this._isLoaded}),state:h(t.idle,function(){return this._loadPromise?t.loading:this._loadMorePromise?t.loadingMore:t.idle}),loadError:h(null,function(){return this._loadError}),selectedItem:h(null,lt,yt),load:pt,loadMore:kt,refresh:wt,addNew:tt,deleteSelected:rt,showSearch:ft,viewSelected:ht,_onDispose:function(){var n=this,t=n._loader;t&&(k(t),n._loader=null),n.screen=null,n._data=[]},setOrderBy:function(n){var t=this,i=t._loader;i.setOrderBy(n)},collectionchange:lr()}),ia=function(){return e},w("VisualCollection",e)}();var wt="a",pf="ui-page-active",bv="msls-presenter-content",sp="msls-presenter",tu="ui-btn-active",ih="msls-list-empty",kv="msls-list-loading",hi="msls-extra-option",rh="msls-list-empty",dv="msls-list-loading",la="msls-overlay",vu="msls-overlay-active",gv="msls-id-dialog-overlay",ny="msls-id-progress-overlay",aa="msls-progress-icon",hp="data-msls-weight",cp="msls-hstretch",lp="msls-hauto",ro="msls-vstretch",uo="msls-vauto",wf="msls-vscroll",ty="msls-columns-layout",va="msls-rows-layout",fo="msls-layout-ignore",ya="msls-layout-ignore-children",ap="msls-viewer",bf="msls-label",vp="msls-label-host",iy="msls-state-overlay",eo="ui-disabled",bt="msls-collapsed",pa="msls-executing",ry="msls-display-error",uy="msls-display-error-icon",wa="msls-display-error-text",fy="msls-loading",uh="msls-read-only",ey="msls-validation-error",ba="msls-validation-error-text",oy="msls-screen-tab",fh="msls-screen-tab-active",ka="msls-content",sy="."+ka,da="msls-tab-content",oo="msls-tab-content-active",hy="msls-header",ga="msls-footer",cy="msls-footer-content",so="msls-footer-content-active",ly="msls-page-expired",nv="#msls-id-app-loading",ay="taskHeaderTemplate",vy="tabsBarTemplate",yy="dialogHeaderTemplate",py="screenFooterTemplate",wy="dialogFooterTemplate",by="footerContentTemplate",tv="contentTemplate",iv="msls-background-page",ho="msls-control-header",co="msls-control-search",rv="msls-dialog",yp="msls-id-animation-timekeeper",uv="msls-logo",ky="msls-enable-modal-scroll-regions",dy="msls-show-background-screen",gy="msls-full-animation",np="msls-quick-animation",yu="msls-dialog-transition",lo="msls-nested-dialog-transition",tp="msls-opening-transition",eh="msls-screen-transition",ip="msls-tab-transition",fv="msls-in",oh="msls-out",ev="msls-reverse",ao="msls-stage1",ov="msls-stage2",sv="msls-stage3",rp="msls-sharepoint-chrome",up="msls-sharepoint-enabled",sh="msls-sharepoint-chrome-link",gt="tabindex",hh,kf;(function(){function e(){var n=navigator.userAgent,t=n.match(/Android/);return!!t}function h(){var n=navigator.userAgent.toLowerCase();return n.indexOf("iphone")!==-1||n.indexOf("windows phone")!==-1}function f(){return et.navigateHome()}function c(n,t,i){return et.showScreen(n,t,null,!1,i?i.beforeShown:null,i?i.afterClosed:null)}function a(){return et.applyChanges()}function v(){return et.commitChanges()}function p(){return et.cancelChanges()}function b(){return et.navigateBack()}function k(t){tc(),!n.performance||!n.performance.timing.domContentLoadedEventStart||o(s.applicationDomLoaded,new Date(n.performance.timing.domContentLoadedEventStart)),o(s.applicationRun);var u=i("body");return yi.enableModalScrollRegions&&u.addClass(ky),yi.showContentBehindDialog&&u.addClass(dy),yi.transitionAnimationLevel===kf.full?u.addClass(gy):u.addClass(np),new l.Promise(function(n,u){function f(n){u("The application could not be loaded.  Please try refreshing the page.\r\n"+n)}i(nv+" img").on("error",function(){i(this).hide()});var e=fc();i(function(){e.then(function(){r.services.modelService.load().then(function(){et.initialize(null,t).then(function(){n()},function(n){u(n)})},function(n){var t="Failed to load model: "+n;f(t)}).then(null,function(n){f(n)})},function(n){f(n)})})})}var t,u;vt(r,{TransitionAnimationLevel:{full:"Full",simple:"Simple"}}),kf=r.TransitionAnimationLevel,t=e(),u=h(),yi.enableModalScrollRegions=!t&&!u,yi.showContentBehindDialog=!t&&!u,yi.transitionAnimationLevel=t||!!navigator.userAgent.match(/Opera/)?kf.simple:kf.full,f.canExecute=function(){return et.navigateHome.canExecute.call(et)},ru("application",{activeDataWorkspace:y(function(){var n=et.activeNavigationUnit;return n||(n=et.navigationStack[0]),n.screen.details.dataWorkspace}),rootUri:ie,options:yi,navigateHome:f,showScreen:c,applyChanges:a,onsavechanges:y(function(){return this._listeners&&this._listeners.savechanges},function(n){var t=this;t._listeners&&(t._listeners.savechanges=null),l.Utilities.eventMixin.addEventListener.call(t,"savechanges",n)}),commitChanges:v,cancelChanges:p,navigateBack:b}),hh=r.application,oa=function(){var t={promise:null};return l.Utilities.eventMixin.dispatchEvent.call(n.msls.application,"savechanges",t),t.promise},w("_defineShowScreen",function(n){return n.canExecute=function(){var t=arguments[n.length-1];return!!t&&!!t.canExecute?t.canExecute.apply(this,arguments):!0},n}),w("application",rt.create(hh)),w("_run",k),w("TransitionAnimationLevel",kf)})(),ri={taskHeaderTemplate:'<div class="msls-header-area"><div class="titles-bar"> LOGO-BACK-PLACEHOLDER<div class="msls-buttons-row msls-screen-buttons"> BUTTONS-PLACEHOLDER LOGOUT-PLACEHOLDER<\/div><div class="msls-title-area"><div class="msls-title-container"><h1 class="subControl ui-title msls-title" control="Text" data-ls-text="text:{data.task.screenTitle}"><\/h1><\/div><\/div><\/div> TAB-BUTTONS-PLACEHOLDER<\/div>',screenLogoTemplate:'<div class="msls-logo-back-area"><div class="msls-logo"><a href="HOMESCREEN-PLACEHOLDER" target="_top"><img src="Content/Images/user-logo.png" /><\/a><\/div><\/div>',screenHomeTemplate:'<div class="msls-back-button-contain"><div class="subControl msls-home-button msls-large-icon" control="ShellButton" tabindex="0" data-icon="msls-home" data-iconpos="notext" data-role="button" data-ls-content="content:{data.shell.homeCommand.displayName}" data-ls-isenabled="isEnabled:{tap.canExecute}" data-ls-tap="tap:{data.shell.homeCommand.command}"><\/div><\/div>',screenSaveDiscardTemplate:'<div class="subControl msls-save-button msls-large-icon" control="ShellButton" tabindex="-1" data-icon="msls-save" data-iconpos="notext" data-role="button" data-ls-content="content:{data.shell.saveCommand.displayName}" data-ls-isenabled="isEnabled:{tap.canExecute}" data-ls-tap="tap:{data.shell.saveCommand.command}"><\/div><div class="subControl msls-discard-button msls-large-icon" control="ShellButton" tabindex="-1" data-icon="msls-cancel" data-iconpos="notext" data-role="button" data-ls-content="content:{data.shell.discardCommand.displayName}" data-ls-isenabled="isEnabled:{tap.canExecute}" data-ls-tap="tap:{data.shell.discardCommand.command}"><\/div>',screenOkTemplate:'<div class="subControl msls-ok-button msls-large-icon" control="ShellButton" tabindex="-1" data-icon="msls-ok" data-iconpos="notext" data-role="button" data-ls-content="content:{data.shell.okCommand.displayName}" data-ls-isenabled="isEnabled:{tap.canExecute}" data-ls-tap="tap:{data.shell.okCommand.command}"><\/div>',screenOkCancelTemplate:'<div class="subControl msls-ok-button msls-large-icon" control="ShellButton" tabindex="-1" data-icon="msls-ok" data-iconpos="notext" data-role="button" data-ls-content="content:{data.shell.okCommand.displayName}" data-ls-isenabled="isEnabled:{tap.canExecute}" data-ls-tap="tap:{data.shell.okCommand.command}"><\/div><div class="subControl msls-cancel-button msls-large-icon" control="ShellButton" tabindex="-1" data-icon="msls-cancel" data-iconpos="notext" data-role="button" data-ls-content="content:{data.shell.cancelCommand.displayName}" data-ls-isenabled="isEnabled:{tap.canExecute}" data-ls-tap="tap:{data.shell.cancelCommand.command}"><\/div>',screenLogoutTemplate:'<div class="subControl msls-logout-button msls-large-icon" control="ShellButton" tabindex="-1" data-icon="msls-logout" data-iconpos="notext" data-role="button" data-ls-content="content:{data.shell.logoutCommand.displayName}" data-ls-isvisible="isVisible:{tap.canExecute}" data-ls-isenabled="isEnabled:{tap.canExecute}" data-ls-tap="tap:{data.shell.logoutCommand.command}"><\/div>',screenNavigationMenuTemplate:'<div class="msls-navmenu-button msls-large-icon" data-role="button" data-icon="msls-dropdown" data-iconpos="notext"><\/div>',dialogHeaderTemplate:'<div class="msls-header-area"><div class="msls-buttons-row msls-dialog-buttons msls-hauto"> BUTTONS-PLACEHOLDER<\/div><div class="msls-title-container"><h1 class="subControl ui-title msls-title" control="Text" data-ls-text="text:{data.dialogTitle}"><\/h1> TAB-BUTTONS-PLACEHOLDER<\/div><\/div>',dialogSaveDiscardTemplate:'<div class="subControl msls-save-button msls-large-icon" control="ShellButton" tabindex="-1" data-icon="msls-save" data-iconpos="notext" data-role="button" data-ls-content="content:{data.shell.saveCommand.displayName}" data-ls-isenabled="isEnabled:{tap.canExecute}" data-ls-tap="tap:{data.shell.saveCommand.command}"><\/div><div class="subControl msls-discard-button msls-large-icon" control="ShellButton" tabindex="-1" data-icon="msls-discard" data-iconpos="notext" data-role="button" data-ls-content="content:{data.shell.discardCommand.displayName}" data-ls-isenabled="isEnabled:{tap.canExecute}" data-ls-tap="tap:{data.shell.discardCommand.command}"><\/div>',dialogOkTemplate:'<div class="subControl msls-ok-button msls-large-icon" control="ShellButton" tabindex="-1" data-icon="msls-ok" data-iconpos="notext" data-role="button" data-ls-content="content:{data.shell.okCommand.displayName}" data-ls-isenabled="isEnabled:{tap.canExecute}" data-ls-tap="tap:{data.shell.okCommand.command}"><\/div>',dialogOkCancelTemplate:'<div class="subControl msls-ok-button msls-large-icon" control="ShellButton" tabindex="-1" data-icon="msls-ok" data-iconpos="notext" data-role="button" data-ls-content="content:{data.shell.okCommand.displayName}" data-ls-isenabled="isEnabled:{tap.canExecute}" data-ls-tap="tap:{data.shell.okCommand.command}"><\/div><div class="subControl msls-cancel-button msls-large-icon" control="ShellButton" tabindex="-1" data-icon="msls-cancel" data-iconpos="notext" data-role="button" data-ls-content="content:{data.shell.cancelCommand.displayName}" data-ls-isenabled="isEnabled:{tap.canExecute}" data-ls-tap="tap:{data.shell.cancelCommand.command}"><\/div>',dialogCloseTemplate:'<div class="subControl msls-close-button msls-large-icon" control="ShellButton" tabindex="-1" data-icon="msls-cancel" data-iconpos="notext" data-role="button" data-ls-content="content:{data.shell.closeCommand.displayName}" data-ls-isenabled="isEnabled:{tap.canExecute}" data-ls-tap="tap:{data.shell.closeCommand.command}"><\/div>',tabsBarTemplate:'<div class="subControl msls-tabs-bar" control="ScreenTabs" data-ls-task="task:{data.task}" data-ls-activetab="activeTab:{data.pageName}" data-ls-hidetabtitles="hideTabTitles:{data.task.screen.properties.hideTabTitles}"><\/div>',screenFooterTemplate:'<div class="msls-footer" data-role="footer" data-position="fixed" data-track-persistent-toolbars="false" data-update-page-padding="false" data-tap-toggle="false" ><\/div>',dialogFooterTemplate:'<div class="msls-footer msls-vauto" data-role="footer"><\/div>',footerContentTemplate:'<div class="msls-vauto msls-footer-content msls-buttons-row"><\/div>',contentTemplate:'<div data-role="content" class="msls-content"><\/div>',popupTemplate:'<div data-role="popup" class="msls-popup"><div class="msls-popup-content"><\/div><div class="msls-clear"><\/div><\/div>',modalViewTemplate:'<div class="msls-modalview msls-collapsed"><\/div>'},function(){function n(n,t){var i=this;i.control=n,i.setKeyBindings(t);this.control.getView().on("keydown",function(n){return i.handleKeyDown(n)})}e("ui.controls","KeyboardDispatcher",n,null,{handleKeyDown:function(n){return this.keyBindings[n.which]?this.keyBindings[n.which](this.control,n,this):!0},setKeyBindings:function(n){this.keyBindings=i.extend({},n)}}),hv=r.ui.controls.KeyboardDispatcher}(),function(){function h(n){return i.ajax({url:n,cache:!0,dataType:"script"})}function it(t){var r=!1,i;if(i=rt(),!!i)try{r=i.ViewDocument(t)}catch(u){}if(!r)try{n.location.href=t+"?Web=1"}catch(u){}}function rt(){var o=!1,s,r=navigator.userAgent.toLowerCase(),u=navigator.appVersion.toLowerCase(),f="application/x-sharepoint",e="application/x-sharepoint-webkit",t={activeXEnabled:!!n.ActiveXObject,chrome:r.indexOf("chrome")!==-1,firefox:r.indexOf("firefox")!==-1,safari:r.indexOf("webkit")!==-1,windows:u.indexOf("win")!==-1,mac:u.indexOf("mac")!==-1},i;if(t.activeXEnabled)try{i=new ActiveXObject("SharePoint.OpenDocuments.5")}catch(h){try{i=new ActiveXObject("SharePoint.OpenDocuments.4")}catch(h){}}else t.windows&&(t.firefox||t.chrome)&&g(f)?i=nt(f):t.mac&&(t.firefox||t.safari)&&g(e)&&(i=nt(e));return i}function g(n){return!!navigator.mimeTypes&&!!navigator.mimeTypes[n]&&navigator.mimeTypes[n].enabledPlugin}function nt(n){var t=document.getElementById(n);return t||(t=document.createElement("object"),t.id=n,t.type=n,t.width="0",t.height="0",t.style.setProperty("visibility","hidden",""),i("body").append(t)),t}function tt(n){if(!n)return"";var t=n.split(".");return t.length===1?"":t.pop().toLowerCase()}function ut(n,t){var r=i.Deferred();return n.ready(function(){var i=n.appWeb.mapToIcon("."+t,"",kt.Utilities.IconSize.size32);n.context.executeQueryAsync(function(){function e(i){i.type!=="load"&&(u=n.getDefaultFileIcon()),y[t]=u,r.resolve(u)}var f=new Image,u=a+i.get_value();f.onload=e,f.onerror=e,f.src=u})}),r.promise()}function ft(n){var e=this,u=i.Deferred(),r=tt(n),f=y[r],t;return f?u.resolve(f):(t=p[r],t||(t=ut(e,r),p[r]=t),t.then(u.resolve)),u.promise()}function et(){var n=this;return a+"lg_icgen.gif"}var r=pr("SPHostUrl"),t=pr("SPAppWebUrl"),v,f=pr("SPChromeColors"),y=[],p=[],w,b,k="/_layouts/15/",a=r+k+"images/",e,u,d,l;(r=r?decodeURIComponent(r):null,t=t?decodeURIComponent(t):null,r&&t)&&(v=i.mobile.path.parseUrl(r).domain,f=f?decodeURIComponent(f):null,/^[0-9a-fA-F]{16}$/.test(f)&&(w=f.substring(2,8),b=f.substring(10,16)),e=t+k,i("script[type='text/javascript']").each(function(){var n=i(this).attr("src"),t=n?n.toLowerCase():"";return t.endsWith("microsoftajax.debug.js")?(u=".debug.js",!1):t.endsWith("microsoftajax.js")?(u=".js",!1):void 0}),u)&&(o(s.loadSharePointStart),d=h(e+"SP.RequestExecutor"+u).then(function(){return h(e+"init"+u)}).then(function(){return h(e+"SP.Runtime"+u)}).then(function(){return h(e+"SP"+u)}).then(function(){return h(e+"SP.UserProfiles"+u)}).then(function(){var u,f;if(!(kt=n.SP)||!kt.ProxyWebRequestExecutorFactory||!kt.ClientObject||!kt.ClientContext)return i.Deferred().reject();u=new kt.ClientContext(t),f=new kt.ProxyWebRequestExecutorFactory(t),u.set_webRequestExecutorFactory(f),c.context=u,c.hostWeb=new kt.AppContextSite(u,r).get_web(),c.appWeb=new kt.AppContextSite(u,t).get_web(),c.executor=new kt.RequestExecutor(t)}).always(function(){o(s.loadSharePointEnd)}),c={hostUrl:r,appWebUrl:t,serverUrl:v,chromeBackgroundColor:w,chromeLinkFontColor:b,sharePointImagesUrl:a,context:null,hostWeb:null,appWeb:null,executor:null,ready:d.then,process:function(){var t=this,r=t.context,n;return l||(n=i.Deferred(),l=n.promise(),ni(function(){r.executeQueryAsync(function(){n.resolve()},function(t){n.reject(t)}),l=null})),l},load:function(){var n=this,t=n.context,u=i.Deferred(),r=Array.prototype.slice.call(arguments,0);return r.forEach(function(n){t.load(n)}),n.process()},openDocument:it,getFileIconUrl:ft,getDefaultFileIcon:et,getFileExtension:tt})}(),function(){function f(n){var t=i(n);return t.filter(":visible").length>0&&t.parents().addBack().filter(function(){return i(this).css("visibility")==="hidden"}).length<=0}function o(){var n=this,s=parseInt(i.attr(n,gt),10),t=!isNaN(s),r=n.nodeName.toLowerCase(),u,e,o;return t&&s<0?!1:r==="area"?(u=n.parentNode,e=u.name,!n.href||!e||u.nodeName.toLowerCase()!=="map")?!1:(o=i("img[usemap=#"+e+"]")[0],!!o&&f(o)):(/input|select|textarea|button|object/.test(r)?!n.disabled:r==="a"?!!n.href||t:t)&&f(n)}function r(n,t,i){this._element=n,this._trueClassName=t,this._falseClassName=i}var u=Array.prototype.slice,t=/\s+/;lt=function(n,r,u,f){var s,h,l,y,c,e,p,a,o,v;for(r?(s=!u?null:u.split(t),h=!f?null:f.split(t)):(h=!u?null:u.split(t),s=!f?null:f.split(t)),l=0,y=n.length;l<y;l++)if(c=n[l],c.nodeType===1)if(e=c.className,e||!s||s.length!==1){if(a=!1,e=(" "+e+" ").replace(t," "),s)for(o=0,v=s.length;o<v;o++)s[o]&&e.indexOf(" "+s[o]+" ")<0&&(e+=s[o]+" ",a=!0);if(h){for(p=e.length,o=0,v=h.length;o<v;o++)h[o]&&(e=e.replace(" "+h[o]+" "," "));e.length<p&&(a=!0)}a&&(c.className=i.trim(e))}else c.className=s[0]},fp=function(n){n.addClass(u.call(arguments,1).join(" "))},vo=function(n){n.removeClass(u.call(arguments,1).join(" "))},ch=function(n){var t=document.createElement("div");return t.innerHTML=n,t.firstChild},pu=function(n,t){n.length&&(n[0].innerHTML=""),t&&n[0].appendChild(document.createTextNode(t))},tf=function(n){n.keydown(function(n){var t=i.mobile.keyCode,r=n.which;if(r===t.ENTER||r===t.SPACE)return i(n.target).trigger("vclick"),!1})},cv=function(n){return n.on("focus",function(){n.addClass("ui-focus")}).on("blur",function(){n.removeClass("ui-focus")})},df=function(n){var t=n[0];(n.focus(),t._keyDownEventHooked)||(n.keydown(function(r){if(r.keyCode===i.mobile.keyCode.TAB){var u=r.target,f=r.shiftKey,e=i("*",n).filter(o),s=e.first(),h=e.last();return(u===s[0]||u===t)&&f?(h.focus(),!1):(u===h[0]||u===t)&&!f?(s.focus(),!1):void 0}}),t._keyDownEventHooked=!0)},rf=function(n,t,r){var u=i.mobile.keyCode,f=r?u.UP:u.LEFT,e=r?u.DOWN:u.RIGHT;i(t,n).first().attr(gt,"0"),n.keydown(function(r){var s=r.which;if(s===f||s===e){var h=i(t,n),o=i(t+":focus",n),u=h.index(o),c=h.length-1;s===f?u-=1:u+=1,u<0?u=c:u>c&&(u=0),o.attr(gt,"-1"),o=i(h[u]),o.attr(gt,"0"),o.focus(),r.stopPropagation(),r.preventDefault()}})},lh=function(n,t,r){var u=i(t,n),e=u.index(r)>=0,f;e?f=u.length===1:r.attr(gt)==="0"&&(r.attr(gt,"-1"),f=!0),f&&u.first().attr(gt,"0")},ah=function(n,t){t>0&&t!==n.scrollTop()&&bu(ea,function(){n.scrollTop(t)})},yo=function(t){var e,o,s,u,h,f,c,r;e=i.mobile.activePage,u=i(n),h=u.scrollTop(),c=t.offset().top-h,o=i("div[data-role='header']",e).outerHeight(),o&&(r=c-o,f=r<0),f||(s=i("div[data-role='footer']",e).outerHeight(),s&&(r=t.outerHeight()-(u.height()-c-s),f=r>0)),f&&u.scrollTop(h+r)},e("ui.helpers","ObservableCssClass",r,null,{value:h(null,function(){function n(n,t){return n===null||n===t}var t=i(this._element),r=!!this._trueClassName&&t.hasClass(this._trueClassName),u=!!this._falseClassName&&t.hasClass(this._falseClassName);return n(r,!0)&&n(u,!1)?!0:n(r,!1)&&n(u,!0)?!1:null},function(n){var t=this,r=i(t._element),u=t._trueClassName,f=t._falseClassName,e=t.onvaluechange;u&&lt(r,n,u),f&&lt(r,!n,f),!u&&!f||!e||e(r)})}),e("ui.helpers","ObservableVisibility",function(n){r.call(this,n,null,"msls-collapsed")},r,{})}(),function(){function u(r,u){for(var c=i("<div id='msls-navmenu' class='msls-navmenu' data-role='popup' data-corners='false' data-shadow='false' data-history='false'><\/div>").data(n,r).on("vclick","li",f).on("popupbeforeposition",h).on("popupafterclose",s).on("repositionhack",o).attr("data-theme",wt),y=i("<ul data-role='listview'>").appendTo(c).hide(),l,a,v=u.items,p=v.length,e=0;e<p;e++)l=v[e],a=i("<li>").appendTo(y).addClass("ui-btn").data(t,l).text(rr(l.displayName)).attr("data-theme",wt),tf(a);rf(c,"li",!0),r._menu&&r._menu.remove(),r._menu=c}function f(n){return i(n.delegateTarget).data(r,i(n.currentTarget).data(t)).popup("close"),!1}function o(t){var r=i(t.currentTarget),u={positionTo:"origin"},o=r.data(n),f=o._target,e=f.offset();u.x=e.left+r.width()/2,u.y=e.top+f.height()+r.height()/2,r.data("repositionHack",!0),r.popup("reposition",u)}function s(n){var t=i(n.currentTarget),u=t.data(r);t.remove(),u&&u.execute()}function h(n){var r=i(n.currentTarget);df(r),r.data("repositionHack")?r.data("repositionHack",null):setTimeout(function(){r.trigger("repositionhack")},1)}var n="msls-dropdownMenuView",t="msls-dropdownItem",r="msls-dropdownItemToExecute";e("ui.controls","DropdownMenuView",function(n){this.viewModel=n},null,{show:function(n){u(this,this.viewModel);var t=this._menu,i=t.children("ul");this._target=n,t.appendTo(n.parent()).popup(),i.listview(),t.popup("open"),i.slideDown()}})}(),sr="LayoutUpdating",oi="LayoutUpdated",function(){function k(){var n=l,o=u,t=r,f=a,e;g(!0),o?(e=i(w),y(e,!1,f)):!t||y(t,!1,f),!n||y(n,!0,!0)}function d(){function n(){if(h){h=!1,t=ui(n,1);return}k()}if(t!==null){h=!0;return}c>0||(t=ui(n,1))}function g(n){t!==null&&(ko(t),t=null),h=!1,n&&(l=null),r=null,u=!1,a=!1}function nt(n){return n.length===1&&(n.hasClass("ui-page")||n.hasClass("msls-tab-content"))}function ht(n){return nt(n)&&n.data("lastWindowWidth")===f&&n.data("lastWindowHeight")===e}function ct(n){if(nt(n)&&(n.data("lastWindowWidth",f),n.data("lastWindowHeight",e),n.hasClass("ui-page"))){var t=n.find(".msls-tab-content.msls-tab-content-active");t.data("lastWindowWidth",f),t.data("lastWindowHeight",e)}}function y(n,t,i){if(!(c>0)&&!v){if(ht(n)){if(!i)return}else ct(n);try{v=!0,o(s.layoutStart),tt(sr,n),n=n.filter(":visible"),at(n,t);var u=yt(n,t),r=it(u);ut(r),t||b===0||ut(r),o(s.layoutEnd),tt(oi,n),o(s.layoutEndNotified)}finally{v=!1}}}function it(n){for(var c=[],e=[],i=[],l=[],u,r,o,s,h,f=n.length,t=0;t<f;t++)n[t].msls_layout_index=t+1,c[t]=-1,e[t]=0;for(t=f-1;t>=0;t--){for(u=n[t].parentNode;u;){if(r=u.msls_layout_index,r){c[t]=--r,e[r]++;break}u=u.parentNode}n[t].msls_layout_index=0}for(h=f,o=0,t=f-1;t>=0;t--)e[t]===0&&(i.push(t),h--);while(h>0){if(s=i.length,s===o)break;for(i.push(-1),t=o;t<s;t++)r=c[i[t]],r>=0&&--e[r]==0&&(i.push(r),h--);o=s+1}for(t=i.length-1;t>=0;t--)l.push(i[t]>=0?n[i[t]]:null);return l.push(null),l}function rt(n){for(var t=0;t<n.length;t++)n[t].call()}function at(n,t){var r=n.filter(".msls-vstretch").add(i(".msls-vstretch",n)),f,u;t||(r=r.not(".msls-layout-ignore-children .msls-vstretch, .msls-columns-layout > .msls-vstretch")),r=r.filter(":visible"),i.each(r,function(){i(this.parentNode).data("msls-rows-updated",!1)}),f=it(r),u=[],f.forEach(function(n){var t,r,o,s,f,e;if(!n){rt(u),u=[];return}(t=n.parentNode,r=0,i(t).data("msls-rows-updated"))||(i.each(dt(t),function(){r+=gt(this)}),f=0,o=ni(t),s=o-r,e=i(t).children(".msls-vstretch").filter(":visible"),i.each(e,function(){f+=p(this)}),vt(t,e,s,f,u),i(t).data("msls-rows-updated",!0))})}function vt(t,r,u,f,e){i.each(r,function(){var v=this,g=i(this),y,w,r,d,o,b,s,h,c,l,k,a;y=i(t).hasClass("msls-columns-layout")||t.tagName==="BODY",w=p(this),r=n.getComputedStyle(this),d=parseFloat(r.minHeight),o=u*(y?1:w/f),b=parseFloat(r.marginTop)+parseFloat(r.marginBottom),s=parseFloat(r.paddingTop)+parseFloat(r.paddingBottom),h=parseFloat(r.borderTopWidth)+parseFloat(r.borderBottomWidth),o-=b,o<0&&(o=0),o<s+h&&(o=s+h),c=ot(r),l=c==="content-box",k=c==="padding-box",o-=(k||l?parseFloat(r.borderTopWidth)+parseFloat(r.borderBottomWidth):0)+(l?parseFloat(r.paddingTop)+parseFloat(r.paddingBottom):0),o=Math.floor(o),a=o+"px",v.style.height!==a&&e.push(function(){v.style.height=a})})}function yt(n,t){var r=n.filter(".msls-columns-layout:not(.msls-static-layout)").add(i(".msls-columns-layout:not(.msls-static-layout)",n)),u=[];return t||(r=r.not(".msls-layout-ignore-children .msls-columns-layout")),r=r.filter(":visible"),i.each(r,function(){var n=i(this);(!!n.children(".msls-hstretch").length||n.hasClass("msls-dynamic-padding"))&&u.push(this)}),i(u)}function ut(n){var t=[];n.forEach(function(n){if(!n){rt(t),t=[];return}var u=i(n),r=ft(n);pt(n,r,t)})}function pt(t,r,u){var a=0,e,f,v=0,o,s,l=[],c,y,h=!1,w=t.children;w.length!==0&&(i.each(w,function(){var n=i(this);n.hasClass("msls-hauto")?(f=vh(this),a+=f,l.push({element:this,isAuto:!0,requiredWidth:f})):n.hasClass("msls-hstretch")&&(e=p(this),v+=e,l.push({element:this,isAuto:!1,weight:e}),h=!0)}),h&&(o=r-a,o=o>0?o:0,c=[],h=!1,s=i(t).hasClass("msls-overflow-columns"),i.each(l,function(){var r=this.element,y=i(r);if(r.offsetWidth!==0||r.offsetHeight!==0){var u=n.getComputedStyle(r),a=parseFloat(u.marginLeft)+parseFloat(u.marginRight),l=0;this.isAuto?f=this.requiredWidth:(e=this.weight,f=o*(e/v),l=parseFloat(u.minWidth),s&&f<l&&(f=l),h=!0),this.totalWidth=Math.floor(f+a),c.push(this)}}),h&&(s?(y=wt(c,r),i.each(y,function(){bt(this,r,s,u)})):i.each(c,function(){this.isAuto||et(this.element,this.totalWidth,s,u)}))),i(t).hasClass("msls-dynamic-padding")&&kt(t,u))}function wt(n,t){for(var i=0,o=0,f,e=[],r,u;i<n.length;){f=t,r=[];do if(u=n[i],r.length===0||u.totalWidth<=f)r.push(u),f-=u.totalWidth,i++;else break;while(i<n.length);e.push(r),o++}return e}function bt(n,t,r,u){var o=[],e=0,s=0,h=0,f=0;i.each(n,function(t){var c=t===0,f=t===n.length-1,r=i(this.element.nextSibling);this.isAuto?e+=this.totalWidth:(s+=this.totalWidth,o.push(this),h+=this.weight),r.hasClass("msls-hempty")&&u.push(function(){lt(r,f,"msls-clear")})}),f=t-e-s,i.each(o,function(){var o=(t-e)*(this.weight/h),n=o-this.totalWidth,i=this.totalWidth;n=n>f?f:n,n>0&&(i+=n,f-=n),et(this.element,i,r,u)})}function kt(n,t){var f=[],e=-1,r=[],u=!1;(i(n).children(":visible").each(function(){var n=i(this);(n.hasClass("msls-hauto")||n.hasClass("msls-hstretch"))&&r.push({element:this,offsetTop:this.offsetTop,rowIndex:0,addClassString:"",removeClassString:""})}),r.length!==0)&&(u=r[0].offsetTop!==r[r.length-1].offsetTop,i.each(r,function(){u?this.addClassString+=" msls-overflow":this.removeClassString+=" msls-overflow"}),t.push(function(){i.each(r,function(){lt(i(this.element),!0,this.addClassString,this.removeClassString)})}))}function dt(n){var t=i(n);return t.hasClass("msls-columns-layout")?[]:t.children(".msls-vauto")}function p(n){var t,r=i(n).attr("data-msls-weight");return t=r?parseFloat(r):1}function gt(t){var r=0,i=0,u=n.getComputedStyle(t),f=parseFloat(u.height);return r=t.offsetHeight+(isNaN(f)?0:f-Math.round(f)),i=parseFloat(u.marginTop)+parseFloat(u.marginBottom),!isNaN(i)&&i>0&&(r+=i),Math.ceil(r)}function ft(t){var i=0,r=n.getComputedStyle(t),u=parseFloat(r.width);return i=t.clientWidth+(isNaN(u)?0:u-Math.round(u)),i-=parseFloat(r.paddingLeft)+parseFloat(r.paddingRight),i=isNaN(i)?0:i,Math.floor(i)}function ni(t){var i=0,r=n.getComputedStyle(t),u=parseFloat(r.height);return i=t.clientHeight+(isNaN(u)?0:u-Math.round(u)),i-=parseFloat(r.paddingTop)+parseFloat(r.paddingBottom),i=isNaN(i)?0:i,Math.floor(i)}function et(t,i,r,u){var f=n.getComputedStyle(t),e=i,c=parseFloat(f.minWidth),s=ot(f),h=s==="content-box",l=s==="padding-box",o;e-=parseFloat(f.marginLeft)+parseFloat(f.marginRight)+(l||h?parseFloat(f.borderLeftWidth)+parseFloat(f.borderRightWidth):0)+(h?parseFloat(f.paddingLeft)+parseFloat(f.paddingRight):0),e=Math.floor(e),o=e+"px",t.style.width!==o&&u.push(function(){t.style.width=o}),!r&&c>e&&t.style.minWidth!==o&&u.push(function(){t.style.minWidth=o})}function ot(n){return n.boxSizing||n.MozBoxSizing||n.webkitBoxSizing}function ti(n){for(var t=n,f,r,u;!!t&&(!r||!u);)t.tagName==="LI"?r=u=t:(f=(" "+t.className+" ").replace(/\s+/," "),!r&&(f.indexOf(" msls-vstretch ")>=0||f.indexOf(" msls-fixed-height ")>=0)&&(r=t,u=u&&t),!u&&(f.indexOf(" msls-hstretch ")>=0||f.indexOf(" msls-fixed-width ")>=0)&&(u=t,r=r&&t)),t=t.parentNode;return(t=u||r,!t)?null:i(t)}function ii(){var t=i("body"),n=i('<div style="height: 100px; width: 100px; visibility: hidden" class="msls-vscroll msls-hscroll"><\/div>').appendTo(t),r=i('<div style="height: 200px; width: 200px;"><\/div>').appendTo(n);yh=b=n[0].offsetHeight-n[0].clientHeight,st=n[0].offsetWidth-n[0].clientWidth,n.remove()}var ri=[],fi=0,t=null,c=0,l=null,r=null,u=!1,a=!1,v=!1,w="body > div:not(.msls-layout-ignore):not(.ui-loader)",f=-1,e=-1,b=0,st=0,h;yr=function(n){c++,n?t!==null&&(ko(t),t=null):g()},tr=function(n){n=typeof n=="boolean"?n:!0,c--,n&&d()},lv=function(n,t){r=n?n:i(w),a=!t,k()},h=!1,nr=function(n,t){v||(n?n.first().closest(".msls-layout-ignore-children").length?(l=l?l.add(n):n,o(s.layoutPartialRequest)):u||(r?n.filter(r).length!==n.length&&(u=!0,a=!0,o(s.layoutFullRequest)):(r=n,o(s.layoutPartialRequest))):u||c!==0||(u=!0,o(s.layoutFullRequest)),t||(a=!0),h=!1,d())},vh=function(t){var r=0,i=0,u=n.getComputedStyle(t),f=parseFloat(u.width);return r=t.offsetWidth+(isNaN(f)?0:f-Math.round(f)),i=parseFloat(u.marginLeft)+parseFloat(u.marginRight),!isNaN(i)&&i>0&&(r+=i),Math.ceil(r)},av=ft,i(function(){var t=i(n);f=t.width(),e=t.height(),n.addEventListener("resize",function(){var n=t.width(),i=t.height();(n!==f||i!==e)&&(f=n,e=i,nr())},!1)}),i(document).ready(function(){ii();i("body").on("updatelayout",function(n){if(!n.target||n.target.tagName!=="UL"){var t=ti(n.target);t&&nr(t)}})})}(),function(){function c(n,i){var o=n.constructor,r=this,e={},u,s=r.onChanged,h=r.needPropertyEvents,c=r.contentItemProperty;h&&(uu(o),e[i+"_"+ff]=lr(!0)),u="__"+i,r.initialValue!==t&&(e[u]={enumerable:!ir,value:r.initialValue}),e[i]=y(function(){return this[u]},function(n){if(this[u]!==n&&(f(this,u,n),s&&s.call(this,n),h)){var t=this;t.dispatchChange(i)}}),ut(o,e)}function l(n){var t=this;t.children=[],n&&n.length||(t._view=i("<div />")),t._view=n}function w(){var n=this,t=n._tapElement;n._isViewCreated&&!!n.tap&&(t||(t=n.getView()),po(t,n,"tap","ButtonClickPromise"),t.addClass("msls-tap"),tf(t))}function d(){var n=this,f=n.children,u,t,e,r=n.data;for(!!r&&i.isFunction(r._customViewDisposeHandler)&&(r._customViewDisposeHandler(),r._customViewDisposeHandler=null),n.children=null,t=0,e=f.length;t<e;t++)u=f[t],u._parent=null,k(u);n.parent=null,n.__tap=null,n.__data=null}function g(){return this._view}function nt(n){this._isViewCreated||(this._isViewCreated=!0,this._attachViewCore(n),this.isRendered=!0)}function it(){if(!this._isViewCreated){var i=this.constructor,n={},t=i._fillTemplate;t&&t(this.getView(),this.data,n),this.attachView(n)}}function rt(){}function ft(){this._registerTapAction()}var et=0,u="clickActionExecuted",n;b=function(n,t,i){return{onChanged:n,initialValue:t,needPropertyEvents:i,defineOn:c}},e("ui","Control",l,null,{controlName:"Undefined",data:b(function(n){this._onDataChanged&&this._onDataChanged(n)},null),isRendered:h(!1),tap:b(function(){this._isViewCreated&&this._registerTapAction()}),parent:y(function(){return this._parent},function(n){var t;this._parent!==n&&(!this._parent||!this._parent.children||(t=this._parent.children.indexOf(this),t>=0&&this._parent.children.splice(t,1)),this._parent=n,!n||this._parent.children.push(this))}),_onDispose:d,getView:g,attachView:nt,render:it,_attachViewCore:ft,_registerTapAction:w},{_fillTemplate:rt,_skipEnhance:!1}),a=r.ui.Control,a.prototype._propertyMappings={},a.prototype._editableProperties={},v=function(n,t){for(var r=n[0],i=t[0],u=[],e=[],f;i!==r&&!!i;)u.push(i),i=i.parentNode;if(!!i)while(u.length>0){for(i=u.pop(),r=r.firstChild,f=0;r!==i;)r=r.nextSibling,f++;e.push(f)}return e},p=function(n,r,u){if(!r||!r.length)return r===t&&!!u?yt(n,u):n;for(var s=r.length,o,f=n[0],e=0;e<s&&!!f;e++)for(o=r[e],f=f.firstChild;f;){if(f.tagName==="B"&&i(f).hasClass("ui-table-cell-label")||o--,o<0)break;f=f.nextSibling}return i(f)},yt=function(n,t){return n.is(t)?n:n.find(t)},n={a:null,input:null,textarea:null},po=function(t,i,r,f,e){t.off("touchend").on("touchend",function(){});t.off("vclick").on("vclick",function(t){var c,h,l,a,v,y,p;o(s.userTap),c=[],h=i;do c.push(h),h=h.parent;while(h);do if(h=c.pop(),h._onBeforeTap&&h._onBeforeTap(t)===!1)return;while(c.length);l=i[r],!!l&&l.canExecute&&(a=t.target,v=a.tagName.toLowerCase(),e&&!e(t)||v in n&&(v!=="a"||a.href)||(y=i.data,p=y.isEnabled===!1,p||(o(s.executeActionStart),i.getView().addClass(pa),tt(f,l.execute({originalEvent:t})._thenEx(function(n,t){tt(u,{control:i,result:t,error:n}),!n||ke(n),i.getView().removeClass(pa),o(s.executeActionEnd)})))),!t.originalEvent||t.originalEvent.type==="click"||t.preventDefault(),t.stopPropagation())})},vt("ui",{Orientation:{horizontal:"horizontal",vertical:"vertical"}})}(),function(){var f=r.ui.Control.prototype._attachViewCore,o=ot("Icon","RootCommand"),s=r.ui.Orientation,t;(function(){function n(n){var t=this;a.call(t,n)}function t(n){this._isViewCreated&&(pu(this._textElement,this.text),n&&this._textElement.trigger("updatelayout"))}function u(n,t,r){i('<div class="msls-text"><span class="id-element"><\/span><\/div>').appendTo(n),r.idElement=v(n,yt(n,".id-element"))}function o(n){f.call(this,n),this._textElement=p(this.getView(),n.idElement,".id-element"),this._refreshView()}e("ui.controls","Text",n,a,{controlName:"Text",text:b(function(){this._refreshView(!0)},null,!0),_attachViewCore:o,_refreshView:t},{_fillTemplate:u,_skipEnhance:!0}),r.ui.controls.Text.prototype._propertyMappings={stringValue:"text",properties:{tap:"tap"}}})(),function(){function t(n){var t=this;a.call(t,n),t._updatingText=!1}function r(n,t,r){var u=i('<input type="text" class="id-element" data-mini="true"><\/input>').appendTo(n);t.maxLength&&wo(u,t.maxLength),r.idElement=v(n,u)}function u(n){function r(){t._updatingText=!0,t.text=t._textElement.val(),t._updatingText=!1}var t=this;t._textElement=p(t.getView(),n.idElement,".id-element"),t.placeholderText&&t._textElement.attr("placeholder",t.placeholderText),f.call(t,n),t._textElement.keydown(function(n){n.keyCode===i.mobile.keyCode.ENTER&&r()}),t._textElement.change(r),t._refreshView()}function o(){this._isViewCreated&&(this._updatingText&&this._textElement.val()===this.text||this._textElement.val(this.text))}function s(){this._refreshView()}function h(n){if(n.state===nt.disabled){var t=this._textElement;this._isViewCreated&&!!t&&(t.data("mobile-textinput")?t.textinput(n.activate?"disable":"enable"):n.activate?t.attr("disabled","disabled"):t.attr("disabled","")),n.custom=!0}}wo=function(n,t){t?n.attr("maxlength",t.toString()):n.attr("maxlength")&&n.removeAttr("maxlength")};var n=e("ui.controls","TextBox",t,a,{controlName:"TextBox",text:b(function(){this._onTextChanged()},null,!0),placeholderText:b(),_attachViewCore:u,_refreshView:o,_customVisualStateHandler:h,_onTextChanged:s},{_fillTemplate:r,_isFormElement:!0});n.prototype._propertyMappings={stringValue:"text",properties:{placeholderText:"placeholderText"}},n.prototype._editableProperties={text:"stringValue"}}(),function(){function u(t){n.call(this,t)}function f(n,t,r){i('<textarea class="id-element" data-mini="true"><\/textarea>').appendTo(n),r.idElement=v(n,yt(n,".id-element"))}function o(n){t.call(this,n);var i=this._textElement;rc(sr,this,function(){i.keyup()})}var n=r.ui.controls.TextBox,t=n.prototype._attachViewCore;e("ui.controls","TextArea",u,n,{controlName:"TextArea",_attachViewCore:o,_onDispose:function(){this._textElement.remove()}},{_fillTemplate:f,_isFormElement:!0}),r.ui.controls.TextArea.prototype._propertyMappings={stringValue:"text",properties:{placeholderText:"placeholderText"}}}(),function(){function n(n){a.call(this,n)}function t(n,t,r){var u=i('<a tabIndex="0" class="id-element" data-role="button" data-mini="true" data-theme="'+wt+'"/>').appendTo(n);r.idElement=v(n,u)}function u(n){var t=this.getView();this._element=p(t,n.idElement,".id-element"),f.call(this,n),this._refreshView()}function o(){var n=this;n._isViewCreated&&(n._element.hasClass("ui-btn")?(yt(n._element,".ui-btn-text").text(n.content),n._element.trigger("refresh")):n._element.text(n.content),n._initialized=!0)}function s(){var t=this._element;t&&t.hasClass(eo)&&t.removeClass("ui-btn-hover-a")}e("ui.controls","Button",n,a,{controlName:"Button",content:b(function(){this._refreshView()}),_attachViewCore:u,_refreshView:o,_customVisualStateHandler:s},{_fillTemplate:t}),r.ui.controls.Button.prototype._propertyMappings={displayName:"content",properties:{tap:"tap",hiddenIfDisabled:"hiddenIfDisabled"}}}(),t=r.ui.controls.Button,function(){function n(n){t.call(this,n)}function r(n,t,r){var u=i('<a tabIndex="-1" class="id-element" data-role="button" data-mini="true" data-theme="'+wt+'"/>').appendTo(n);r.idElement=v(n,u)}e("ui.controls","NegativeTabIndexButton",n,t,{controlName:"NegativeTabIndexButton"},{_fillTemplate:r})}(),function(){function n(n){t.call(this,n)}function r(n,t,r){var u=i('<div class="id-element msls-large-icon" tabIndex="-1" data-iconpos="top" data-role="button" data-theme="'+wt+'" data-corners="false" data-mini="true"><\/div>'),f=t.properties[o];u.attr("data-icon",f||"msls-star"),u.appendTo(n),r.idElement=v(n,u)}e("ui.controls","CommandBarButton",n,t,{controlName:"CommandBarButton"},{_fillTemplate:r}).prototype._propertyMappings={displayName:"content",properties:{icon:"icon",tap:"tap",hiddenIfDisabled:"hiddenIfDisabled"}}}(),function(){function n(n){t.call(this,n)}function r(n,t,r){var u=i('<a class="id-element" data-role="button" data-mini="true" data-theme="'+wt+'"/>').appendTo(n);r.idElement=v(n,u)}function u(){if(t.prototype._refreshView.call(this),this._isViewCreated){var n=this._element.closest(".subControl");lt(n,!this.isEnabled,eo),lt(n,!this.isVisible,bt)}}e("ui.controls","ShellButton",n,t,{controlName:"ShellButton",_refreshView:u,isEnabled:b(function(){this._refreshView()},!1),isVisible:b(function(){this._refreshView()},!0),tap:h()},{_fillTemplate:r}).prototype._propertyMappings={displayName:"content"}}(),function(){function u(n){var t=this;a.call(t,n),t._updatingDropdown=!1}function o(){!this._updatingDropdown&&this._isViewCreated&&(n(this),t(this))}function n(n){var r=n._dropdownElement,t;!n._updatingDropdown&&n._isViewCreated&&n.choiceList&&(r.empty(),i.each(n.choiceList,function(){t=i("<option><\/option>"),t.attr("value",this.stringValue),t.text(this.stringValue),r.append(t)}))}function t(n){var f=n._dropdownElement,r,t,u=!0;if(!n._updatingDropdown&&n._isViewCreated){t=n.selectedValue,t===null&&(t=""),i.each(n.choiceList,function(){return this.stringValue===t&&(u=!1),u}),u&&(r=i('<option disabled="disabled"><\/option>'),r.attr("value",t),r.text(t),f.append(r));try{n._updatingDropdown=!0,n._dropdownElement.val(t),n._dropdownElement.change()}finally{n._updatingDropdown=!1}}}function s(n,t,r){var u=i('<select class="id-element" data-mini="true"/>').appendTo(n);r.idElement=v(n,u)}function h(n){var t=this,i;t._dropdownElement=p(t.getView(),n.idElement,".id-element"),f.call(t),t._dropdownElement.change(function(){if(!t._updatingDropdown){i=t._dropdownElement.val(),i===""&&(i=null);try{t._updatingDropdown=!0,t.selectedValue=i}finally{t._updatingDropdown=!1}}}),t._refreshView()}function c(n){if(n.state===nt.disabled||n.state===nt.readOnly){var t=this._dropdownElement;this._isViewCreated&&!!t&&(t.data("mobile-selectmenu")?t.selectmenu(n.activate?"disable":"enable"):n.activate?this._dropdownElement.attr("disabled","disabled"):this._dropdownElement.attr("disabled","")),n.custom=!0}}var r=e("ui.controls","Dropdown",u,a,{controlName:"Dropdown",selectedValue:b(function(){t(this)},null,!0),choiceList:b(function(){n(this)}),_attachViewCore:h,_refreshView:o,_customVisualStateHandler:c},{_fillTemplate:s,_isFormElement:!0});r.prototype._propertyMappings={stringValue:"selectedValue",choiceList:"choiceList"},r.prototype._editableProperties={selectedValue:"stringValue"}}(),function(){function s(n){var t=this;u.call(t,n)}function c(n,t,r){i('<div class="msls-text '+(t.heightSizingMode!==er.fitToContent?"msls-vstretch ":"")+'"><p class="id-element"><\/p><\/div>').appendTo(n),r.idElement=v(n,yt(n,".id-element"))}function l(n){var i=this,r=i.data;u.prototype._refreshView.call(i,n),this._isViewCreated&&r._isUnderList&&!this._needLayoutText&&r.heightSizingMode!==er.fitToContent&&(this._needLayoutText=!0,t.length===0&&dt(oi,f),t.push(this))}function a(){if(this._needLayoutText){var n=t.indexOf(this);n>=0&&(t.length===1?(t=[],li(oi,f)):t.splice(n,1))}}function y(t){var s=t.text,h=t._textElement,y=h[0],i,r,c,l,p=0,k,w,b,e,u,a,v=0,o,f,d;return s?(i=h.parent(),r=i[0].clientHeight,c=i[0].clientWidth,r===0||c===0)?null:i.data("msls-last-height")===r&&i.data("msls-last-width")===c?null:(i.data("msls-last-height",r),i.data("msls-last-width",c),w=n.getComputedStyle(i[0]),e=parseFloat(w.paddingTop)+parseFloat(w.paddingBottom),e=isNaN(e)?0:e,r=Math.floor(r-e),b=n.getComputedStyle(y),u=parseFloat(b.marginTop)+parseFloat(b.marginBottom),u=isNaN(u)?0:u,a=Math.ceil(y.offsetHeight+u),k=s.length,o=k-1,l=r-a,l<0)?{applyChange:function(){v<o?(f=v+o>>1,pu(h,s.substr(0,f+1)+"...")):f!==p&&(d=s.substr(0,p+1),pu(h,d+"..."))},needContinue:function(){return v<o?(a=Math.ceil(y.offsetHeight+u),l=r-a,l<0?o=f-1:(v=f+1,p=f),!0):!1}}:null:null}var u=r.ui.controls.Text,t=[],f,o;f=function(){for(var i,r=[],f,n=0,u=t.length;n<u;n++)i=y(t[n]),i&&r.push(i);while((u=r.length)>0){for(n=0;n<u;n++)r[n].applyChange();for(f=[],n=0;n<u;n++)i=r[n],i.needContinue()&&f.push(i);r=f}},o=e("ui.controls","Paragraph",s,u,{controlName:"Paragraph",lines:h(),_refreshView:l,_onDispose:a},{_fillTemplate:c,_skipEnhance:!0}),o.prototype._propertyMappings={stringValue:"text",properties:{tap:"tap"}}}(),function(){function n(n){a.call(this,n)}function t(){var t;if(f.call(this),t=this.data,t){var e=t.screen.constructor,r=e[t.name+"_render"],o=this.getView();if(!!r&&i.isFunction(r))try{r.call(null,o[0],t)}catch(s){t.displayError=u("customControl_renderError_2args",t.name,s)}else t.displayError=u("customControl_noRender_1args",t.name)}}function r(n){var t="Custom",r=this.data,i=r.properties,u=n.state===nt.disabled&&i.disabledRendering===t||n.state===nt.readOnly&&i.readOnlyRendering===t||n.state===nt.hasValidationError&&i.validationRendering===t;u&&(n.custom=!0)}e("ui.controls","CustomControl",n,a,{controlName:"CustomControl",_customVisualStateHandler:r,_attachViewCore:t}).prototype._propertyMappings={stringValue:"displayName",properties:{tap:"tap"}}}()}(),function(){function l(n){var t=this;t._subControls={},t._resources={},t.dataTemplate="<div/>",a.call(t,n)}function v(){this._refreshView()}function y(n){c.call(this,n),this._refreshView(),this._dataTemplateLoaded=!0}function p(){var n=this,t,r=[];n._isViewCreated&&(t=i(n.dataTemplate).appendTo(n.getView()),w(n,t,n._subControls,r,n._resources))}function w(n,t,e,s,h){function ft(n,t){t.bind(),s.push(t)}for(var y,c,rt,ut,b,nt,tt,it,p,et,a,k,ot,w,v,g=t.children(".resource"),l=0;l<g.length;l++)y=g[l],c=i(y),rt=c.attr("type"),ut=c.attr("name"),b=u(rt),!!b&&i.isFunction(b)&&(nt=new b,f(h,y,s,nt,!1)),h[ut]=nt;for(i.each(s,function(){this.bind()}),g.remove(),tt=t.find(".subControl"),l=0;l<tt.length;l++)y=tt[l],c=i(y),it=c.attr("control"),p=r.ui.controls[it],p||(p=u(it)),!!p&&i.isFunction(p)&&(a=new p(c),a.parent=n,k=c.attr("name"),k||(k=l.toString()),w=[],f(h,y,w,a,!1),v=d(w).first(function(n){return n.targetProperty==="data"&&n.bindingTarget===a}),v||(v=o(h,a,"data:{data, bindingMode=[msls.data.DataBindingMode.oneWayFromSource]}")),v&&(v.bindingSource=n,v.bind(),w.push(v)),e[k]=a,c.removeAttr("control"),c.attr("name")&&c.removeAttr("name"),i.each(w,ft),a.render())}function f(n,t,i,r,u){for(var e,s,c,l,h=[],f=0;f<t.attributes.length;f++)e=t.attributes[f],e.name.indexOf("data-ls-")===0&&(s=o(n,r,e.value),s&&i.push(s),u&&h.push(e.name));for(f=0;f<h.length;f++)t.removeAttribute(h[f])}function o(n,t,i){var u,o,p=/^([a-zA-Z_0-9]+):(\S+)$/,w=/^\{(\S*)\}$/,h,f,c,l=[],a,v,e,y;if(e=i.replace(/\s/,""),f=p.exec(e),f&&(v=f[1],e=f[2]),f=w.exec(e),f)for(o=f[1].split(","),h=o[0],u=1;u<o.length;u++)a=o[u].split("="),l.push({option:a[0],value:a[1]});if(h){for(c=new r.data.DataBinding(h,t,v,t),u=0;u<l.length;u++)y=l[u],c[y.option]=s(n,y.value);return c}return t[v]=s(n,e),null}function s(n,r){var f,o=/^\[(\S*)\]$/,e=o.exec(r);return e?(r=e[1],r.indexOf(t)===0?(f=r.substr(t.length),n[f]):r.indexOf("#")===0?i(r):u(r)):r}function u(t){if(!t)return null;for(var f,e=t.split("."),i=n,u=0;u<e.length;u++)if(f=e[u],i=u===0&&f==="msls"?r:i[f],!i)break;return i}var c=a.prototype._attachViewCore,t;e("ui.controls","ContentControl",l,a,{controlName:"ContentControl",dataTemplate:h(),_dataTemplateLoaded:h(!1),_attachViewCore:y,_refreshView:p,_onDataChanged:v},{_fillTemplate:a._fillTemplate}),t="resource:"}();var bo,ph=ot("Width"),hr,iu,vv={},gf={},ne;(function(){function gt(n){var t=this;t._currentVisualState=nt.normal,a.call(t,n)}function ni(n){var t=this,i=t.data,u,f,r;t._container=t.getView(),t._contentContainer=p(t._container,n.contentPath),t.isVisible=i.isVisible,n.labelPath&&n.control.idElement&&(r=i.screen.details._pageId+"-"+i.name,u=p(t._contentContainer,n.control.idElement,".id-element"),u.attr("id",r),f=p(t._container,n.labelPath),f.attr("for",r)),ei(t,n.control),a.prototype._attachViewCore.call(t,n),ft(this)}function ti(){var n=this.data;!n||(n._view=null)}function ri(n){var t=this,i=n;t._contentItemEventHandler&&(k(t._contentItemEventHandler),t._contentItemEventHandler=null),!i||(i._view=t,i.addEventListener&&(t._contentItemEventHandler=ku(i,"change",t,function(n){var f=n.detail,r,e,o,u,s=["_visualState","_alwaysShowValidationResults","validationResults","displayError"];s.indexOf(f)>=0&&ft(t),r=t.underlyingControl,!r||(e=r._propertyMappings,!e||(o=r._editableProperties||{},u=r._propertyMappings[f],!u||typeof u!="string"||u in o||(r[u]=i[f])))}))),ui(t)}function ui(n){n._isViewCreated&&n._container&&n.data&&(n._isViewCreated=!1,n.getView().empty(),n.render())}function fi(n){var r=iu(n),t;return!!r&&(t=gf[r],i.isFunction(t))?t._isFormElement:!1}function ei(n,t){var f=n.data,e=iu(f),u,r;!e||(u=vv[e],i.isFunction(u)&&(r=u(n._contentContainer,f,t),!!r&&i.isFunction(r.render)&&(r.parent=n,n.underlyingControl=r)))}function oi(n,t,r){var w=[],e=bo(t),f=e===si.none,c=e===si.topAligned,a=e===si.leftAligned,y=e===si.rightAligned,o=e===si.hidden,u,s,p=iu(t),h=!t._isUnderList&&!!p&&fi(t),l;return f&&!h?n:(u="<div class='"+bf+(c?" msls-label-align-top msls-clear msls-vauto":"")+(a?" msls-label-align-left":"")+(y?" msls-label-align-right":"")+(o?" msls-label-align-hidden":"")+(f?" msls-label-align-none":"")+"' >",h?((o||f)&&(u+='<div style="height:1px;'+(f?"width:0px;":"")+'">'),u+="<label>"+t.displayName+"<\/label>",(o||f)&&(u+="<\/div>")):u+=o?'<div style="height:1px;"><\/div>':"<label>"+t.displayName+"<\/label>",u+="<\/div>",u+='<div class="'+(c?" msls-clear":"")+'" />',n[0].innerHTML=u,s=i(n[0].lastChild),r.contentPath=v(n,s),h&&(l=o||f?n[0].firstChild.firstChild.firstChild:n[0].firstChild.firstChild,r.labelPath=v(n,i(l))),s)}function hi(n,t,i){var f=t.properties,s=f[et],h=f[st],e=f[ct],c=f[at],a=!t._isVStretch&&t.heightSizingMode===er.fixedSize,v=!t._isHStretch&&t.widthSizingMode===vi.fixedSize,y=f[vt],p=f[ph],l=f[yt],w=t._isHStretch,b=t._isVStretch,u=[],r=[],o;r.push(bv),l&&r.push("msls-font-style-"+l.toLowerCase()),u.push("msls-ctl-"+sc(iu(t))),a?(i.height(y),r.push("msls-fixed-height")):(s&&i.css("min-height",s+"px"),h&&i.css("max-height",h+"px")),v?(i.width(p),r.push("msls-fixed-width")):(e&&(i.css("min-width",e+"px"),n.css("min-width",e+"px")),c&&i.css("max-width",c+"px")),r.push(t._isVStretch?"msls-vstretch":"msls-vauto"),u.push(t._isVStretch?"msls-vstretch":"msls-vauto"),u.push(t._isHStretch?"msls-hstretch":"msls-hauto"),t.properties[kt]&&u.push("msls-compact-padding"),ut(t)||u.push("msls-leaf"),o=t.properties[wt],o==="Right"?r.push("msls-text-align-right"):o==="Center"&&r.push("msls-text-align-center"),b&&r.push("msls-vscroll"),t.kind===ht.value&&u.push("msls-redraw"),w&&r.push("msls-hscroll"),u.length>0&&n.addClass(u.join(" ")),r.length>0&&i.addClass(r.join(" "))}function it(n,t){var r=0;return i.each(n.children,function(){var u,f=i(this),n=i(this.firstChild);n.length===1&&n.hasClass(bf)&&!f.hasClass("msls-collapsed")&&(n.hasClass("msls-label-align-left")||n.hasClass("msls-label-align-right")||n.hasClass("msls-label-align-hidden"))&&(u=n[0].offsetWidth+1,u>r&&(r=u),t.push(n[0]))}),r}function ci(n,t){if(!n)throw u("render_invalid_arg_element");if(!t)throw u("render_invalid_arg_contentItem");var f=new r.ui.controls.ContentItemPresenter(i(n));f.data=t,f.render()}function li(n){return" "+n+" "}function rt(n,t){var f=n.getView(),u=n._contentContainer,r=u.children().filter("."+iy);return r.length>0?t?r:(r.remove(),null):t?r=i("<div class='msls-state-overlay'><\/div>").appendTo(u):null}function ai(n,t){function u(n){var e;i=t(n),i&&r.push(i);for(var f=0,o=n.childNodes,s=o.length;f<s;f++)e=o[f],li(e.className).match(/ msls-presenter /)||u(e)}var r=[],i;return n.length&&u(n[0]),r}function c(n,t){return ai(n,function(n){var i=n.tagName;return i&&t.indexOf(i.toLowerCase())>=0?n:null})}function yi(n,t,r){function f(n){var u=i.attr(n,t);i.data(n,b+t,u),i.attr(n,t,r)}if(n.length===1)f(n[0]);else for(var u=0,e=n.length;u<e;u++)f(n[u])}function pi(n,r){function f(n){var u=b+r,f=i.data(n,u);f===t?n.removeAttribute(r):n.setAttribute(r,f),i.removeData(n,u)}if(n.length===1)f(n[0]);else for(var u=0,e=n.length;u<e;u++)f(n[u])}function f(n,t,i,r){t?yi(n,i,r):pi(n,i)}function l(n){function t(n){if(n.id===":RootCustomControl")return!0;var i=n.baseControl;return i&&t(i)}var i=n.data;return i?t(i.controlModel):!1}function ut(n){var t=n.controlModel;return t?ce(t):!1}function wi(n,t){var r=c(n,["a","area","button","input","object","select","textarea"]);f(i(r),t,dt,"-1")}function y(n,t){var i=rt(n,t);return wi(n.getView(),t),i}function bi(n,t){var f=n.getView(),e=n.data,i,r,u;lt(f,t.activate,bt),e._isUnderList&&(u=f.parent(),u.hasClass("ui-li")&&lt(u,t.activate,bt)),t.activate||(r=bo(e),(r===si.leftAligned||r===si.rightAligned||r===si.hidden)&&(i=n.parent||n,i=i.parent||i,ne(i.getView()))),t.needsLayoutUpdate=!0}function ki(n,t){var r,i,u;t.custom||(r=n.data,r.kind!==ht.command)&&(i=t.activate,u=rt(n,i),lt(n._contentContainer,i,fy))}function di(n,t){function c(n){var t=Array.prototype.slice.call(n||[],0),i=t.map(function(n){return n.message});return i.join("<br/>")}var u=n.data,o,r,h,s,f,e;t.custom||to(u)||(o=u._alwaysShowValidationResults&&t.activate,lt(n._contentContainer,o,ey),r=n._container.children("."+ba),o?(h=c(u.validationResults),r.length||(s="",f=n._container.children("."+bf),!f||!f.length||(e=bo(u),(e===si.leftAligned||e===si.rightAligned||e===si.hidden)&&(s=" style='margin-left:"+vh(f[0]).toString()+"px'")),r=i("<div class='"+ba+" "+uo+"'"+s+"><\/div>").appendTo(n._container)),r.append(h),t.needsLayoutUpdate=!0):r.length&&(r.remove(),t.needsLayoutUpdate=!0))}function gi(n,t){var o=n.data,u=n.getView(),r=t.activate,e;if(t.custom){lt(u,r,eo);return}f(u,r,g,tt),l(n)?y(n,r):(o.kind===ht.command&&f(u.find("a, button"),r,g,tt),e=c(u,["button","fieldset","input","optgroup","option","select","textarea"]),f(i(e),r,h,h)),lt(u,r,eo)}function nr(n,t){var a=n.getView(),u=n.data,e=u.kind,r=t.activate,o,s;if(!t.custom){switch(e){case ht.group:case ht.details:case ht.value:break;default:return}if(l(n))y(n,r);else{if(to(u)||ut(u))return;(e===ht.value||e===ht.details)&&(o=i(c(a,["input","textarea"])),s=i(c(a,["select","option"])),f(o,r,d,d),f(s,r,h,h),lt(o,r,uh),lt(s,r,uh))}lt(n._contentContainer,r,uh)}}function tr(n,t){var u=t.activate,s=y(n,u),f=n._contentContainer,r,e,o;lt(f,u,ry),r=n._contentContainer.children().filter("."+wa),u?(e=n.data,o=e.displayError,r.length||(r=i("<div class='"+wa+"'><\/div>").appendTo(f),s.append("<div class='"+uy+"'><\/div>")),r.text(o),t.needsLayoutUpdate=!0):r.length&&(r.remove(),t.needsLayoutUpdate=!0)}function ft(t){function v(n){switch(n){case nt.loading:case nt.hasDisplayError:case nt.hasValidationError:return!0}return l(t)&&n===nt.readOnly}var r=t.data,e,o;if(r){var u=t.underlyingControl,s=t._currentVisualState,i=r._visualState,h,c,f=u&&u._customVisualStateHandler,a;if(!r._isUnderList||!v(i)){if(s===i)switch(i){case nt.normal:case nt.disabled:case nt.hidden:case nt.loading:case nt.readOnly:return}h=n[s],e={state:s,activate:!1,custom:!1,needsLayoutUpdate:!1},f&&f.call(u,e),h&&h(t,e),t._currentVisualState=i,c=n[i],o={state:i,activate:!0,custom:!1,needsLayoutUpdate:!1},f&&f.call(u,o),c&&c(t,o),a=e.needsLayoutUpdate||o.needsLayoutUpdate,a&&r._isActivated&&t.getView().trigger("updatelayout")}}}var b="msls-previous-",et=ot("MinHeight"),st=ot("MaxHeight"),ct=ot("MinWidth"),at=ot("MaxWidth"),vt=ot("Height"),yt=ot("FontStyle"),pt=ot("AttachedLabelPosition"),wt=ot("TextAlignment"),kt=ot("CompactMargins","RootGroup"),dt="tabIndex",h="disabled",d="readonly",g="aria-disabled",tt="true",n;hr=function(n,t,r){var u,f,e,o;n.addClass("msls-presenter"),u=oi(n,t,r),hi(n,t,u),f=iu(t),!f||(e=gf[f],i.isFunction(e)&&(o=e._fillTemplate,!o||o(u,t,r.control={})))},iu=function(n){var t=n.controlModel;return!t?"NoControl":ii(t.id.replace(/\S*:/,""))},bo=function(n){var i=n.controlModel,t=n.properties[pt];return(!i||i.attachedLabelSupport!=="DisplayedByControl")&&t||(t=si.none),t},ne=function(n){o(s.updateAttachedLabelsStart);for(var l="div.msls-label-host",u=n.find(l).filter(":visible").add(n.filter(l)),e,h,c,a,v,f,r,y=[],p=[],t=0;t<u.length;t++){if(e=u[t],h=e.parentNode,v=i(h).hasClass(ty),f=[],r=it(e,f),v)while(t<u.length-1)if(c=u[t+1],a=c.parentNode,a===h)r=Math.max(r,it(c,f)),t++;else break;r>0&&(y.push(f),p.push(r))}i.each(y,function(n){var t=p[n]+"px";i.each(this,function(){var r=this,n=r.style,u=r.nextSibling,i=u&&u.style;n.width!==t&&(n.width=t),n.minWidth!==t&&(n.minWidth=t),!i||i.marginLeft===t||(i.marginLeft=t)})}),o(s.updateAttachedLabelsEnd)},w("render",ci),n={},n[nt.disabled]=gi,n[nt.hidden]=bi,n[nt.hasValidationError]=di,n[nt.hasDisplayError]=tr,n[nt.loading]=ki,n[nt.readOnly]=nr,e("ui.controls","ContentItemPresenter",gt,a,{controlName:"ContentItemPresenter",suppressLabel:!1,_attachViewCore:ni,_onDataChanged:ri,_onDispose:ti},{_fillTemplate:hr})})(),function(){function lt(n){var t=this;a.call(t,n)}function w(n,t,i,r,u,f,e){if(n>=100||n<0)return new Date(n,t,i,r,u,f,e);var o=new Date(0,0,0,0,0,0,0);return o.setFullYear(n),o.setMonth(t),o.setDate(i),o.setHours(r),o.setMinutes(u),o.setSeconds(f),o.setMilliseconds(e),o}function y(n,t){return w(n,t+1,0,0,0,0,0).getDate()}function at(n,t){return w(n,t,1,0,0,0,0).getDay()}function tt(n,t){while(t>n.length)n="0"+n;return n}function k(n,t){return ct.format(w(t,0,1,0,0,0,0),"yyyy",n.culture)}function vt(n,t){return n.culture.calendars.standard.months.namesAbbr[t]}function rt(n,t){return n.culture.calendars.standard[t][0]}function yt(n,t){var i;switch(n.clock){case"TwelveHour":i=t%12,i===0&&(i=12);break;case"TwentyFourHour":i=t;break;default:i=t}return i.toString()}function ut(n,t){return tt(t.toString(),2)}function c(n,t){var i=document.createElement("option");return i.value=t,i.text=n,i}function f(n,t){var i=c(t,"");return n.insertBefore(i,n.firstChild),i}function o(n,t){if(n.selectedIndex>=0&&n[n.selectedIndex].value===t)return!1;for(var r=0,i=n.firstChild;i!==null;){if(i.tagName==="OPTION"){if(i.value===t)return n.selectedIndex=r,!0;r++}i=i.nextSibling}return!1}function pt(n){var r=n._yearDropdownElement[0],d=n.date,e=n._format,a=!n.date?null:d.getFullYear(),g=n.originalDate,nt=!n.originalDate?null:g.getFullYear(),y=[a,nt].sort(),p,h,t,s,l,w,b,v;for(r.selectedIndex>=0&&(w=r[r.selectedIndex].value),i(r).find("option."+hi).remove(),l=r.firstChild,e._isNullable&&(l=l.nextSibling),h=0;h<y.length;h++)t=y[h],t!==null&&t!==p&&(t<e.minimumYear?(s=c(k(e,t),t.toString()),s.className=hi,r.insertBefore(s,l)):t>e.maximumYear&&(s=c(k(e,t),t.toString()),s.className=hi,r.appendChild(s))),p=t;n.date||e._isNullable||(b=f(r,u("dateTimePicker_emptyYear")),b.className=hi),v=a!==null?a.toString():"",(o(r,v)||w!==v)&&n._yearDropdownElement.change()}function wt(n){var t=n._monthDropdownElement[0],l=n._format,s,h,r,c,e;t.selectedIndex>=0&&(s=t[t.selectedIndex].value),i(t).find("option."+hi).remove(),h=n.date,r=n.date?h.getMonth():null,n.date||l._isNullable||(c=f(t,u("dateTimePicker_emptyMonth")),c.className=hi),e=r!==null?r.toString():"",(o(t,e)||s!==e)&&n._monthDropdownElement.change()}function bt(n,t,i){var f,s=n._format,h=s.culture.calendars.standard,l=h.days,o=l.namesAbbr,r,e=g[t];if(!e)for(g[t]=e=document.createDocumentFragment(),r=1;r<=31;r++){var a=tt(r.toString(),2),v=(t+r-1)%o.length,y=r.toString(),p=u("dateTimePicker_dayNumberAndDayPattern",a,o[v]);e.appendChild(c(p,y))}for(f=e.cloneNode(!0),r=31;r>i;r--)f.removeChild(f.lastChild);return f}function kt(n){var t=n._dayDropdownElement[0],c;i(t).empty();var r=n.date||new Date,l=n._format,e=r.getMonth(),s=r.getFullYear(),a=y(s,e),v=at(s,e),p=bt(n,v,a),h=n.date?n.date.getDate():null;t.appendChild(p),(!n.date||l._isNullable)&&f(t,u("dateTimePicker_emptyDay")),c=h!==null?h.toString():"",o(t,c),n._dayDropdownElement.change()}function dt(n){var h,e,c,r;if(n._hourPeriodDropdownElement){var t=n._hourPeriodDropdownElement[0],l=n._format,s,a=!t.firstChild;t.selectedIndex>=0&&(s=t[t.selectedIndex].value),i(t).find("option."+hi).remove(),h=n.date,e=n.date?h.getHours():null,n.date||l._isNullable||(c=f(t,u("dateTimePicker_emptyPeriod")),c.className=hi),r=e===null?"":e<12?"0":"12",(o(t,r)||s!==r)&&n._hourPeriodDropdownElement.change()}}function gt(n){var t=n._hourNumberDropdownElement[0],e=n._format,s,h,r,c;t.selectedIndex>=0&&(s=t[t.selectedIndex].value),i(t).find("option."+hi).remove(),h=n.date,r=n.date?(h.getHours()%e.totalHourNumbers).toString():"",n.date||e._isNullable||(c=f(t,u("dateTimePicker_emptyHour")),c.className=hi),(o(t,r)||s!==r)&&n._hourNumberDropdownElement.change()}function ni(n){var t=n._minuteDropdownElement[0],s=n._format,p=n.date,l=!p?null:p.getMinutes(),w=n.originalDate,g=!w?null:w.getMinutes(),b=[l,g].sort().reverse(),tt,it,r,e,a,rt,k,v,d,nt=s._isNullable?1:0,h,y;for(t.selectedIndex>=0&&(d=t[t.selectedIndex].value),i(t).find("option."+hi).remove(),v=t.childNodes,h=0;h<b.length;h++)r=b[h],r!==null&&r!==k&&r%s.minuteIncrement>0&&(a=Math.floor(r/s.minuteIncrement)+1+nt,e=c(ut(s,r),r.toString()),e.className=hi,a<v.length?t.insertBefore(e,v[a]):t.appendChild(e)),k=r;n.date||s._isNullable||(e=f(t,u("dateTimePicker_emptyMinute")),e.className=hi),y=l!==null?l.toString():"",(o(t,y)||y!==d)&&n._minuteDropdownElement.change()}function l(n){var t;return n.date?(t=new Date(n.date),t.setMilliseconds(n.date.getMilliseconds())):(t=new Date,n.timePickerEnabled?t.setSeconds(0,0):t.setHours(0,0,0,0)),t}function ti(n,t){if(t===null){n.date=null;return}var i=l(n),r=y(t,i.getMonth());r<i.getDate()&&i.setDate(r),i.setFullYear(t),n.date=i}function ii(n,t){if(t===null){n.date=null;return}var i=l(n),r=y(i.getFullYear(),i.getMonth());i.setDate(t),n.date=i}function ri(n,t){if(t===null){n.date=null;return}var i=l(n),r=y(i.getFullYear(),t);r<i.getDate()&&i.setDate(r),i.setMonth(t),n.date=i}function ft(n,t,i){t?i||(i=0):t=0;var r=l(n);r.setHours(t+i),n.date=r}function ui(n,t,i){if(i===null){n.date=null;return}ft(n,t,i)}function fi(n,t,i){if(t===null){n.date=null;return}ft(n,t,i)}function ei(n,t){if(t===null){n.date=null;return}var i=l(n);i.setMinutes(t,0,0),n.date=i}function t(n){if(!n)return null;var t=n[0],i=t.options[t.selectedIndex].value;return i===""?null:parseInt(i,10)}function s(n,t){var i='<select tabindex="-1" class="msls-text id-element" name="'+n+'" data-icon="false" data-mini="true" style="min-width: 100%; max-width: none;">';return!t||(i+=t.join("")),i+="<\/select>"}function n(n,t){return'<option value="'+t+'">'+n+"<\/option>"}function oi(t){var r=[],i;for(t._isNullable&&r.push(n(u("dateTimePicker_emptyYear"),"")),i=t.minimumYear;i<=t.maximumYear;i++)r.push(n(k(t,i),i.toString()));return s("year",r)}function si(t){var r=[],i;for(t._isNullable&&r.push(n(u("dateTimePicker_emptyMonth"),"")),i=0;i<12;i++)r.push(n(vt(t,i),i.toString()));return s("month",r)}function et(t){var r=[],o=t.totalHourNumbers,f,e,i;for(t._isNullable&&r.push(n(u("dateTimePicker_emptyHour"),"")),i=0;i<o;i++)f=i.toString(),e=yt(t,i),r.push(n(e,f));return s("hour",r)}function ci(t){var i=[],r=rt(t,"AM"),f=rt(t,"PM");return t._isNullable&&i.push(n(u("dateTimePicker_emptyPeriod"),"")),i.push(n(r,"0")),i.push(n(f,"12")),s("period",i)}function ot(t){var r=[],i,o=t.minuteIncrement,f,e;for(t._isNullable&&r.push(n(u("dateTimePicker_emptyMinute"),"")),i=0;i<60;i+=o)f=i.toString(),e=ut(t,i),r.push(n(e,f));return s("minute",r)}function st(n,t){var r,i;return r='<fieldset data-role="controlgroup" data-type="horizontal" data-mini="true" data-inline="true">'+n.join("")+"<\/fieldset>",i=ch(r),t.appendChild(i),i}function li(n){var t={},r,u,f,e=n.properties,i,o,s;t.culture=ct.culture(),t.minimumYear=e.minimumYear,t.maximumYear=e.maximumYear,t.clock=t.culture.calendars.standard.AM?"TwelveHour":"TwentyFourHour",t.minuteIncrement=e.minuteIncrement,(!t.minuteIncrement||t.minuteIncrement<=0)&&(t.minuteIncrement=1),r=n.valueModel,!r||(t._isNullable=!it(r,":@Required"),u=r.propertyType,!u||(f=br(u).primitiveType.id),i=it(r,":@Range"),!i||(i.minimum?(t._minimumDate=f===":DateTimeOffset"?cf(i.minimum):new Date(i.minimum),o=t._minimumDate.getFullYear(),t.minimumYear<o&&(t.minimumYear=o)):t._minimumDate=null,i.maximum?(t._maximumDate=f===":DateTimeOffset"?cf(i.maximum):new Date(i.maximum),s=t._maximumDate.getFullYear(),t.maximumYear>s&&(t.maximumYear=s)):t._maximumDate=null));switch(t.clock){case"TwelveHour":t.totalHourNumbers=12;break;case"TwentyFourHour":t.totalHourNumbers=24;break;default:t.totalHourNumbers=24}return t}function ai(n,r){n._updatingDropdownElements=!1,n._format=r.format;var u=n.getView(),f=p(u,r.containerItem);n.datePickerEnabled&&(n._yearDropdownElement=p(u,r.yearElement),n._monthDropdownElement=p(u,r.monthElement),n._dayDropdownElement=p(u,r.dayElement),n._yearDropdownElement.change(function(){n._updatingDropdownElements||ti(n,t(n._yearDropdownElement))}),n._monthDropdownElement.change(function(){n._updatingDropdownElements||ri(n,t(n._monthDropdownElement))}),n._dayDropdownElement.change(function(){n._updatingDropdownElements||ii(n,t(n._dayDropdownElement))})),n.timePickerEnabled&&(n._hourNumberDropdownElement=p(u,r.hourNumberElement),n._minuteDropdownElement=p(u,r.minuteElement),r.hourPeriodElement&&(n._hourPeriodDropdownElement=p(u,r.hourPeriodElement),n._hourPeriodDropdownElement.change(function(){n._updatingDropdownElements||ui(n,t(n._hourNumberDropdownElement),t(n._hourPeriodDropdownElement))})),n._hourNumberDropdownElement.change(function(){n._updatingDropdownElements||fi(n,t(n._hourNumberDropdownElement),t(n._hourPeriodDropdownElement))}),n._minuteDropdownElement.change(function(){n._updatingDropdownElements||ei(n,t(n._minuteDropdownElement))})),rf(u,"select"),bu(sr,function(){i(n.getView()).find("select").each(function(){i(this).closest("div.ui-btn").addClass("msls-dateTimePicker-"+this.name)})})}function d(n,t,i){var r,u,f,e,o;try{n._updatingDropdownElements=!0,n.datePickerEnabled&&(!t||!i||(r=t.getFullYear()===i.getFullYear(),u=t.getMonth()===i.getMonth(),r&&u&&(f=t.getDate()===i.getDate())),r||pt(n),u||wt(n),f||kt(n)),n.timePickerEnabled&&(!t||!i||(e=t.getHours()===i.getHours(),o=t.getMinutes()===i.getMinutes()),e||(gt(n),n._format.clock==="TwelveHour"&&dt(n)),o||ni(n))}finally{n._updatingDropdownElements=!1}}function h(n,t){n&&(n.data("mobile-selectmenu")&&n.selectmenu(t?"enable":"disable"),t?n.attr("disabled")==="disabled"&&n.removeAttr("disabled"):n.attr("disabled","disabled"))}function vi(n,t){n.datePickerEnabled&&(h(n._yearDropdownElement,t),h(n._monthDropdownElement,t),h(n._dayDropdownElement,t)),n.timePickerEnabled&&(h(n._hourNumberDropdownElement,t),h(n._hourPeriodDropdownElement,t),h(n._minuteDropdownElement,t))}function yi(n){if(n.state===nt.disabled||n.state===nt.readOnly){var t=n.activate;vi(this,!t),n.custom=!0}}function pi(){this._isViewCreated&&d(this)}function wi(n){var t=this;r.ui.Control.prototype._attachViewCore.call(t),ai(t,n),t._refreshView()}function bi(n,t,r){var y=ch('<div class="msls-dateTimePicker-container">'),w=t.properties,h=[],c=[],l,e,u=[],o,d,it,g,f,p,a,k;if(r.format=f=li(t),p=f.culture.calendars.standard,n[0].appendChild(y),w.datePickerEnabled||r.isDatePicker){var nt=p.patterns.d,tt=p["/"],b=nt.split(tt,3);for(a=0;a<b.length;a++){k=b[a].split(" ",1)[0];switch(k){case"M":case"MM":h.push(si(f)),u.push("monthElement");break;case"d":case"dd":h.push(s("day")),u.push("dayElement");break;case"yyyy":case"yy":h.push(oi(f)),u.push("yearElement")}}for(l=st(h,y),e=l.firstChild,o=0;o<u.length;o++)r[u[o]]=v(n,i(e)),e=e.nextSibling}if(w.timePickerEnabled)for(u=[],d=et(f),g=ot(f),c.push(et(f)),u.push("hourNumberElement"),c.push(ot(f)),u.push("minuteElement"),f.clock==="TwelveHour"&&(c.push(ci(f)),u.push("hourPeriodElement")),l=st(c,y),e=l.firstChild,o=0;o<u.length;o++)r[u[o]]=v(n,i(e)),e=e.nextSibling}var g=[],ht=e("ui.controls","DateTimePicker",lt,a,{controlName:"DateTimePicker",datePickerEnabled:b(),timePickerEnabled:b(),date:b(function(n){this._isViewCreated&&d(this,n,this._oldDate),this._oldDate=n},null,!0),originalDate:b(function(n){this._isViewCreated&&d(this,n,this._oldOriginalDate),this._oldOriginalDate=n}),_attachViewCore:wi,_refreshView:pi,_customVisualStateHandler:yi},{_fillTemplate:bi});ht.prototype._propertyMappings={value:"date",properties:{datePickerEnabled:"datePickerEnabled",timePickerEnabled:"timePickerEnabled"},details:{originalValue:"originalDate"}},ht.prototype._editableProperties={date:"value"}}(),function(){function n(n){var t=this;t.timePickerEnabled=!1,t.datePickerEnabled=!0,r.ui.controls.DateTimePicker.call(t,n)}e("ui.controls","DatePicker",n,r.ui.controls.DateTimePicker,{controlName:"DatePicker"},{_fillTemplate:function(n,t,i){i.isDatePicker=!0,r.ui.controls.DateTimePicker._fillTemplate(n,t,i)}}),r.ui.controls.DatePicker.prototype._propertyMappings={value:"date",details:{originalValue:"originalDate"}}}(),function(){function u(n){r.ui.Control.call(this,n)}function n(n,t){n._iconUrl=t,n._iconElement.attr("src",n._iconUrl)}function f(){var i=this,r=i.entity,u,f;!i._isViewCreated||!r||!i._valuePropertyName||(u=r[i._valuePropertyName],t(i,u),!c||(f=!r.Name?u:r.Name,n(i,c.getDefaultFileIcon()),!f||c.ready(function(){!c.hostWeb||c.getFileIconUrl(f).done(function(t){n(i,t)})})))}function t(n,t){var i=n._nameElement,r;n._isViewCreated&&!!i&&(r=o(n,t),i.text(r))}function o(n,t){var i,r="",u;return!n._valueProperty||(u=gu(n._valueProperty,":@SupportedValue"),!u||(i=d(u).first(function(n){return n.value===t}),!i||(r=rr(i.displayName))),i||(r=af(t,n._valueProperty))),r}function s(n,t,r){var u=i('<a class="msls-spdoc-summary" href="#"><\/a>'),f=i('<div class="msls-spdoc-summary-imgContainer"><\/div>'),e=i('<img class="msls-spdoc-summary-icon" />'),o=i('<div class="msls-spdoc-summary-textContainer"><\/div>'),s=i('<div class="msls-text ui-link"><\/div>');e.appendTo(f),f.appendTo(u),s.appendTo(o),o.appendTo(u),u.appendTo(n),r.iconElement=v(n,e),r.nameElement=v(n,s),r.summaryContainerElement=v(n,u)}function h(n){var t=this,r=t.getView(),u;t._iconElement=p(r,n.iconElement),t._nameElement=p(r,n.nameElement),u=p(r,n.summaryContainerElement);u.on("vclick",function(n){n.stopPropagation(),n.preventDefault(),!t._documentUrl||c.openDocument(t._documentUrl)});u.keydown(function(n){switch(n.keyCode){case i.mobile.keyCode.SPACE:case i.mobile.keyCode.ENTER:n.stopPropagation(),n.preventDefault(),!t._documentUrl||c.openDocument(t._documentUrl)}}),t._refreshView()}e("ui.controls","DocumentSummary",u,r.ui.Control,{controlName:"DocumentSummary",_refreshView:f,_attachViewCore:h,entity:b(function(n){var i=this,f,e,u,r,o;n?(f=n.details._,i._documentUrl=f.Microsoft_LightSwitch_ReadLink,i._valueProperty&&i._valuePropertyName||(e=n.details.getModel(),u=it(e,":@SummaryProperty"),!u||(r=u.property),!r||(i._valueProperty=r,i._valuePropertyName=ii(r.name),o=i.data,o.dataBind("value."+i._valuePropertyName,function(n){t(i,n)})))):i._documentUrl=null,i._refreshView()},null,!0)},{_fillTemplate:s}),r.ui.controls.DocumentSummary.prototype._propertyMappings={value:"entity"}}(),function(){function n(n){r.ui.controls.TextBox.call(this,n)}function t(n,t,r){var f='<input type="email" class="id-element" data-mini="true" />',u=i(f).appendTo(n);t.maxLength&&wo(u,t.maxLength),r.idElement=v(n,u)}e("ui.controls","EmailAddressEditor",n,r.ui.controls.TextBox,{controlName:"EmailAddressEditor"},{_fillTemplate:t,_isFormElement:!0}),r.ui.controls.EmailAddressEditor.prototype._propertyMappings={stringValue:"text",properties:{placeholderText:"placeholderText"}}}(),function(){function n(n){r.ui.controls.Text.call(this,n)}function t(){this._isViewCreated&&(this._textElement.text(this.text),this._textElement.attr("href","mailto:"+this.text))}function u(n,t,r){i('<div class="msls-text"><a class="id-element ui-link" target="_blank"><\/a><\/div>').appendTo(n),r.idElement=v(n,yt(n,".id-element"))}e("ui.controls","EmailAddressViewer",n,r.ui.controls.Text,{controlName:"EmailAddressViewer",_refreshView:t},{_fillTemplate:u})}(),function(){function n(n){var t=this;a.call(t,n),t._updateSelection=!1}function t(n,t,r){var o=0,c=t.properties,l=c.options,f="",e="",s,h;l==="OnOffOption"?(f=u("flipSwitchControl_offLabel"),e=u("flipSwitchControl_onLabel")):(f=u("flipSwitchControl_noLabel"),e=u("flipSwitchControl_yesLabel")),o=f.length>e.length?f.length:e.length,s="<select data-role='slider' data-mini='true'><option value='false'>"+f+"<\/option><option value='true'>"+e+"<\/option><\/select>",h=i(s).appendTo(n),r.idElement=v(n,h),r.labelWidth=o}function f(n){var t=this,i;t._selectElement=p(t.getView(),n.idElement),r.ui.Control.prototype._attachViewCore.call(t,n),t._selectElement.change(function(){if(!t._updateSelection)try{t._updateSelection=!0,t.sliderValue=t._selectElement.val()==="false"?!1:!0}finally{t._updateSelection=!1}}),i=function(){li(sr,i);var r=t._selectElement.siblings();r.length===1&&r.css("min-width",n.labelWidth+"em")},dt(sr,i),t._refreshView()}function o(){if(this._isViewCreated){var n=this.sliderValue?"true":"false";if(!this._updateSelection||this._selectElement.val()!==n)try{this._updateSelection=!0,this._selectElement.val(n),this._selectElement.change()}finally{this._updateSelection=!1}}}function s(n){if(n.state===nt.disabled||n.state===nt.readOnly){var t=this._selectElement;this._isViewCreated&&!!t&&(t.data("mobile-slider")?t.slider(n.activate?"disable":"enable"):n.activate?t.attr("disabled","disabled"):t.attr("disabled","")),n.custom=!0}}e("ui.controls","FlipSwitchControl",n,a,{controlName:"FlipSwitchControl",sliderValue:b(function(){this._refreshView()},!1,!0),_customVisualStateHandler:s,_attachViewCore:f,_refreshView:o},{_fillTemplate:t,_isFormElement:!0}),r.ui.controls.FlipSwitchControl.prototype._propertyMappings={value:"sliderValue"},r.ui.controls.FlipSwitchControl.prototype._editableProperties={sliderValue:"value"}}(),function(){function c(n){var t=this;a.call(t,n)}function l(n,t,r){i('<div class="msls-image-container"><div class="msls-image-border ui-btn-down-a ui-disabled"><img alt="Image" class="msls-image-inner"/><\/div><\/div>').appendTo(n);var u=yt(n,".msls-image-container"),f=u.children("div"),e=f.children("img");r.imageContainer=v(n,u),r.borderElement=v(n,f),r.imageElement=v(n,e)}function y(i){var u=this,f=u.getView();u._element=p(f,i.imageContainer,".msls-image-container"),u._border=p(f,i.borderElement),u._image=p(f,i.imageElement),(u.isHStretch||u.isVStretch)&&(n.length===0&&dt(oi,t),n.push(u)),h(this,!0),r.ui.Control.prototype._attachViewCore.call(this,i)}function w(){if(this.isHStretch||this.isVStretch){var i=n.indexOf(this);i>=0&&(n.length===1?(n=[],li(oi,t)):n.splice(i,1))}}function k(n,t,i){var r=n.isHStretch?n._element.width():t,u=n.isVStretch?n._element.height():i,h=n.width,c=n.height,f=n.minWidth,o=n.minHeight,e=n.maxWidth,s=n.maxHeight;return n.widthSizingMode===vi.fixedSize?typeof h=="number"&&h>=0&&(r=h):(typeof f=="number"&&f>=0&&r<f&&(r=f),typeof e=="number"&&e>=0&&r>e&&(r=e)),n.heightSizingMode===er.fitToContent&&t>0&&(u=i*r/t),n.heightSizingMode===er.fixedSize?typeof c=="number"&&c>=0&&(u=c):(typeof o=="number"&&o>=0&&u<o&&(u=o),typeof s=="number"&&s>=0&&u>s&&(u=s)),n.widthSizingMode===vi.fitToContent&&i>0&&(r=t*u/i,typeof f=="number"&&f>=0&&r<f&&(r=f),typeof e=="number"&&e>=0&&r>e&&(r=e)),{width:r,height:u}}function f(n,t){var l=n._image,f=l.prop("naturalWidth")||80,e=l.prop("naturalHeight")||80,a=k(n,f,e),r=Math.floor(a.width),u=Math.floor(a.height),o=r,s=u,h=0,c=0,i=null;return(t||n._controlWidth!==r||n._controlHeight!==u)&&(n._controlHeight=u,n._controlWidth=r,n.scale==="Fit"?r*e>f*u?(o=u*f/e,h=(r-o)/2):(s=r*e/f,c=(u-s)/2):n.scale==="Fill"&&e>0&&f>0&&(r*e<f*u?(o=u*f/e,h=(r-o)/2):(s=r*e/f,c=(u-s)/2)),n.widthSizingMode===vi.fitToContent&&n.heightSizingMode===er.fitToContent?(i={border:{},image:{}},n.minHeight>0&&(i.border["min-height"]=i.image["min-height"]=n.minHeight+"px"),n.minWidth>0&&(i.border["min-width"]=i.image["min-width"]=n.minWidth+"px"),n.maxHeight>0&&(i.border["max-height"]=i.image["max-height"]=n.maxHeight+"px"),n.maxWidth>0&&(i.border["max-width"]=i.image["max-width"]=n.maxWidth+"px")):i={border:{width:r.toString()+"px",height:u.toString()+"px"},image:{width:o.toString()+"px",height:s.toString()+"px","margin-left":h.toString()+"px","margin-top":c.toString()+"px"}}),i}function o(n,t){n._border.css(t.border),n._image.css(t.image),(n.widthSizingMode===vi.fitToContent||n.heightSizingMode===er.fitToContent)&&n.getView().trigger("updatelayout")}function s(n,t){var i=f(n,!0);o(n,i),t||n._border.removeClass("ui-btn-down-a ui-disabled")}function h(n,t){var o,h,i;if(n._isViewCreated&&!!n._element){var r=n.src,e=n.data,c=n._border,f=n._image;!e.valueModel||(h=e.valueModel,i=h.propertyType,ou(i)&&(o=i,i=o.underlyingType),!i||i.id!==":Binary"&&i.id!==bi+":Image"||(r="data:image;base64,"+n.src)),t||c.addClass("ui-btn-down-a ui-disabled"),f.off("load").on("load",function(){f.attr("alt","Image"),s(n)}).off("error").on("error",function(){f.attr("alt",u(r===n.src?"image_invalid_url":"image_invalid_data")),s(n,!n.src)}).attr("src",r||null)}}function d(){h(this,!1)}var n=[],t=function(){for(var i,r,u=[],t=0,e=n.length;t<e;t++)i=n[t],i._element.is(":visible")?u.push(f(i,!1)):u.push(null);for(t=0;t<e;t++)r=u[t],r&&o(n[t],r)};e("ui.controls","Image",c,a,{controlName:"Image",src:b(d),scale:b(),isHStretch:b(),isVStretch:b(),width:b(),height:b(),minWidth:b(),minHeight:b(),maxWidth:b(),maxHeight:b(),widthSizingMode:b(),heightSizingMode:b(),_attachViewCore:y,_onDispose:w},{_fillTemplate:l,_skipEnhance:!0}),r.ui.controls.Image.prototype._propertyMappings={value:"src",properties:{scale:"scale",tap:"tap",width:"width",height:"height",minWidth:"minWidth",minHeight:"minHeight",maxWidth:"maxWidth",maxHeight:"maxHeight",widthSizingMode:"widthSizingMode",heightSizingMode:"heightSizingMode"},_isHStretch:"isHStretch",_isVStretch:"isVStretch"}}(),function(){function n(n){for(var o=n.getView(),f,r,i,e,u,t=o[0];t.parentNode;)t=t.parentNode;for(f=t!==document,r=n.children,i=0,e=r.length;i<e;i++)u=r[i].getView(),f?u.detach():u.remove()}var u=ot("WeightedRowHeight","RowsLayout"),t=ot("WeightedColumnWidth","ColumnsLayout");(function(){function t(n){var t=this;a.call(t,n)}function f(n,t,r){var f,e,l,o,s;if(t&&(o=t.children,o&&i.isArray(o))){for(n.addClass("msls-label-host msls-rows-layout "),f=[],e=0,l=o.length;e<l;e++){var h=o[e],y=e===0,a=e===l-1,c=h.properties[u],v="";!!c&&c!==1&&c>0&&(v=' data-msls-weight="'+c+'"'),f.push('<div class="msls-clear'),y?a||f.push(" msls-first-row "):a?f.push(" msls-last-row "):f.push(" msls-row "),h.horizontalAlignment===nh.right&&(h.widthSizingMode===vi.fitToContent||h.widthSizingMode===vi.fixedSize)?(f.push(h._isVStretch?" msls-vstretch":" msls-vauto"),f.push(' "'+v+'><div class="msls-halign-right '),f.push('"><\/div><div class="msls-clear"><\/div><\/div>')):f.push('"'+v+"><\/div>"),a&&f.push('<div class="msls-clear"><\/div>')}n[0].innerHTML=f.join(""),s=n[0].firstChild,i.each(o,function(n){var t,u=r[n]={};s.firstChild?(t=i(s.firstChild),u.containerPath=[0]):t=i(s),hr(t,this,u),s=s.nextSibling})}}function o(n){var u=this,e,o,f,t;(a.prototype._attachViewCore.call(u,n),u._tapElement=u._container=u.getView(),e=u.data,e)&&(f=e.children,f&&i.isArray(f))&&(o=u._container[0],t=o.firstChild,!!t&&t.tagName==="B"&&i(t).hasClass("ui-table-cell-label")&&(t=t.nextSibling),i.each(f,function(f){var o,e,s=n[f];o=p(i(t),s.containerPath),t=t.nextSibling,e=new r.ui.controls.ContentItemPresenter(o),e.parent=u,e.data=this,e.attachView(s)}))}e("ui.controls","RowsLayout",t,a,{controlName:"RowsLayout",_onDispose:function(){n(this)},_attachViewCore:o},{_fillTemplate:f}),r.ui.controls.RowsLayout.prototype._propertyMappings={properties:{tap:"tap"}}})(),function(){function u(n){var t=this;a.call(t,n)}function f(n,r,u){var o,e,f,s,c,p,a,h,w,l,k,v,b=0,y=0;if(r&&(o=r.children,o&&i.isArray(o))){for(f=0,s=o.length;f<s;f++)c=o[f],b+=c.properties[t],y+=c._isHStretch?1:0;for(v=y===s,n.addClass("msls-columns-layout msls-overflow-columns "+(y===0||r._isUnderList&&v?"msls-static-layout":"")),e=[],f=0,s=o.length;f<s;f++)c=o[f],p=f===0,a=f===s-1,h=c.properties[t],e.push('<div class="'),p?a||e.push(" msls-first-column "):a?e.push(" msls-last-column "):e.push(" msls-column "),e.push('"'),v&&r._isUnderList&&(w=100*h/b,e.push('style="width:'+w+'%;"')),!!h&&h!==1&&h>0&&e.push(' data-msls-weight="',h+'"'),e.push('><\/div><div class="'+(a?"msls-clear":"msls-hempty")+'"><\/div>');for(n[0].innerHTML=e.join(""),f=0,l=n[0].firstChild;l;)f%2==0&&hr(i(l),o[f/2],u[f/2]={}),f++,l=l.nextSibling}}function o(n){var u=this,s,e,h,t,f,o;if((a.prototype._attachViewCore.call(u,n),h=u._container=u.getView(),s=u.data,s)&&(e=s.children,e&&i.isArray(e)))for(f=0,t=h[0].firstChild;t;)f%2==0&&(!!t&&t.tagName==="B"&&i(t).hasClass("ui-table-cell-label")&&(t=t.nextSibling),o=new r.ui.controls.ContentItemPresenter(i(t)),o.parent=u,o.data=e[f/2],o.attachView(n[f/2])),f++,t=t.nextSibling}e("ui.controls","ColumnsLayout",u,a,{controlName:"ColumnsLayout",_onDispose:function(){n(this)},_attachViewCore:o},{_fillTemplate:f}),r.ui.controls.ColumnsLayout.prototype._propertyMappings={properties:{tap:"tap"}}}(),function(){function t(n){var t=this;a.call(t,n)}function u(n,t,r){var f,o,u,s,h,c,l,a,v,e;if(t&&(f=t.children,f&&i.isArray(f))){for(n.addClass("msls-table-row"),o=[],u=0,s=f.length;u<s;u++)o.push("<td class='msls-column' role='gridcell'"),o.push("><\/td>");for(n.html(o.join("")),u=0,e=n[0].firstChild;e;)hr(i(e),f[u],r[u]={}),u++,e=e.nextSibling}}function f(n){var t=this,s,f,h,u,e,o;if((a.prototype._attachViewCore.call(t,n),h=t._container=t.getView(),s=t.data,s)&&(f=s.children,f&&i.isArray(f)))for(e=0,u=h[0].firstChild;u;)o=new r.ui.controls.ContentItemPresenter(i(u)),o.parent=t,o.data=f[e],o.attachView(n[e]),e++,u=u.nextSibling}e("ui.controls","TableRowLayout",t,a,{controlName:"TableRowLayout",_onDispose:function(){n(this)},_attachViewCore:f},{_fillTemplate:u}),r.ui.controls.TableRowLayout.prototype._propertyMappings={properties:{tap:"tap"}}}()}(),function(){function k(){return i("<div/>")}function h(n){return a.text(n),n=a.html(),n.replace(/\n|\r\n/g,"<br>")}function d(l,a,y,p,d,g,nt,it){function lt(){var n,t;p&&Array.isArray(p)&&(t=i("body").jqmData("theme")||wt,p.forEach(function(r){!r||!r.text||(n||(n=i("<div class='msls-leaf'><\/div>").appendTo(rt)),tf(i("<a href='#'>"+h(r.text)+"<\/a>").appendTo(n).buttonMarkup({theme:t,icon:r.icon,mini:!0,iconpos:"left"}).on("vclick",function(n){o(s.modalViewCloseStart),ot=r.result,rt.popup(u),n.preventDefault()})))}))}function at(){a&&i("<div><\/div>").addClass("msls-control-header msls-leaf").html(h(a)).appendTo(rt),g?g(rt):y&&k().addClass("msls-leaf").html(h(y)).appendTo(rt),lt(),rt.trigger("create")}function vt(){f(rt,e,!0),df(rt.parent()),o(s.modalViewShowEnd),tt(w)}function st(){ct.focus(),it(ot),n=null,o(s.modalViewCloseEnd),tt(c)}function yt(){f(rt,e,!1),rt.off(r).off(t),rt.remove(),rt=null,nt&&nt(),ui(function(){if(ut){ut.one(r,st);var n=ut.attr("data-msls-name");n?et.showPopup(n):ut.popup(v)}else st()})}function ht(){var n=i("body").jqmData("theme")||wt;rt.removeClass(bt).popup({overlayTheme:n,positionTo:"window",theme:n}).on(r,vt).on(t,yt).popup(v)}var ft=i.mobile.popup.active,ut=ft&&ft.element,ct=i(document.activeElement),rt,ot=d;yr(!0);try{n=rt=i(ri[b]).appendTo(l),at()}finally{tr(!1),nr(rt)}if(ut){ut.one(t,function(){ui(ht,1)});ut.popup(u)}else ht()}function y(){return!!n&&!!n[e]}function p(){y()&&(o(s.modalViewCloseStart),n.popup(u))}var w="modalViewShown",c="modalViewClosed",a=i("<pre/>"),b="modalViewTemplate",t="popupafterclose",r="popupafteropen",u="close",v="open",e="__canClose",n;cr={show:function(t){function h(){d(f,t.title,t.message,t.buttons,e,t.buildContentCallback,t.disposeContentCallback,r)}o(s.modalViewShowStart);var r,u=new l.Promise(function(n){r=n}),f=i.mobile.activePage,e=t.defaultResult||g.none;return f.length!==1?(r(e),u):(n?(bu(c,h),p()):h(),u)},close:p,isOpen:y},ti._modalView=cr}(),function(){function vt(n){r.ui.Control.call(this,n)}function yt(n,t){var r=i.Deferred(),u=c.appWebUrl+"/_api/SP.AppContextSite(@target)/web/getFileByServerRelativeUrl(@fileRelativeUrl)/$value?@target='"+encodeURIComponent(c.hostUrl)+"'&@fileRelativeUrl='"+encodeURIComponent(t)+"'",f={url:u,method:"GET",binaryStringResponseBody:!0,success:function(n){r.resolve(n.body)},error:function(){r.reject()}};return c.executor.executeAsync(f),r.promise()}function pt(n,t,r){for(var u=i.Deferred(),e=new Uint8Array(r),o="",f=0;f<e.length;f++)o+=String.fromCharCode(e[f]);return g(n,t,o).then(function(t){a(n,t).then(u.resolve,u.reject)},function(){u.reject()}),u.promise()}function g(n,t,r){var u=i.Deferred(),f=c.appWebUrl+"/_api/SP.AppContextSite(@target)/web/lists/getByTitle(@docLibName)/RootFolder/Files/Add(url='"+encodeURIComponent(t)+"',overwrite=true)/?@target='"+encodeURIComponent(c.hostUrl)+"'&@docLibName='"+encodeURIComponent(n._docLibName)+"'&$select=ListItemAllFields/Id&$expand=ListItemAllFields/Id",e={url:f,method:"POST",body:r,binaryStringRequestBody:!0,headers:{Accept:"application/json; odata=verbose","content-type":"application/json;odata=verbose","content-length":r.length},success:function(n){var t=JSON.parse(n.body),i=t.d;u.resolve(i.ListItemAllFields.Id)},error:function(){u.reject()}};return c.executor.executeAsync(e),u.promise()}function bt(n,t){var r=i.Deferred(),u=c.appWebUrl+"/_api/SP.AppContextSite(@target)/web/GetFolderByServerRelativeUrl(@rootFolder)/Files(@fileName)?@target='"+encodeURIComponent(c.hostUrl)+"'&@rootFolder='"+encodeURIComponent(n._rootFolderRelativeUrl)+"'&@fileName='"+encodeURIComponent(t)+"'",f={url:u,method:"GET",headers:{Accept:"application/json; odata=verbose"},success:function(){r.resolve(!0)},error:function(n){var t=JSON.parse(n.body),i=t.error;i.code.indexOf("System.IO.FileNotFoundException")?r.resolve(!1):r.reject()}};return c.executor.executeAsync(f),r.promise()}function f(n,t){o(n).then(function(){ke(t)})}function o(n){var t=i.Deferred();return l(n),r.shellView.closePopup().then(t.resolve,t.reject),t.promise()}function s(n){n._loadingElement.show(),n._loading=!0}function l(n){n._loadingElement.hide(),n._loading=!1}function a(t,u){var f=i.Deferred();return t._entitySet.filter("Id eq "+u).merge(r.MergeOption.unchangedOnly).execute().then(function(i){var r=i.results[0],h=t.data,u=h.value,c=u._loader,e=c._collectionProperty,l=e._entry.data,o=e.owner,s=l.toPropertyName;r[s]!==o?(r[s]=o,n.msls.application.applyChanges().then(f.resolve,f.reject)):u.refresh().then(f.resolve,f.reject)},f.reject),f.promise()}function dt(){var n=new kt.List(c.context,null);return!!n&&!!n.createDocument}function ni(n,r,u){var f=i.Deferred(),l=c.hostWeb.get_lists(),o=l.getByTitle(n._docLibName),s,e,h;return o.createDocument===t?f.reject():r!==""||u?(s=c.hostWeb.getFolderByServerRelativeUrl(n._rootFolderRelativeUrl),e=r===""?o.createDocument(null,s,u):o.createDocumentFromTemplate(null,s,r),h=e.getWOPIFrameUrl(ht.edit),c.context.load(e),c.context.executeQueryAsync(function(){var t=e.get_id(),i=h.get_value();a(n,t).then(function(){f.resolve(i)},f.reject)},f.reject)):f.reject(),f.promise()}function nt(t,i,r,e){if(!t._loading)if(e!=="")s(t),ni(t,i,e).then(function(i){o(t).then(function(){!i||(i=i.replace("action=edit","action=editnew"),n.location.href=i)})},function(){f(t,u("createOrUploadDocument_createDocumentError"))});else if(i!==""){if(!n.FileReader){f(t,u("createOrUploadDocument_uploadNotSupported"));return}s(t),yt(t,i).then(function(n){ii(r).then(function(i){g(t,i,n).then(function(n){a(t,n).then(function(){o(t)},function(){f(t,u("createOrUploadDocument_createDocumentError"))})},function(){f(t,u("createOrUploadDocument_createDocumentError"))})},function(){o(t)})},function(){f(t,u("createOrUploadDocument_createDocumentError"))})}else o(t)}function ti(n,t){var e=t,i=e.files[0],r=new FileReader;s(n),bt(n,i.name).then(function(t){if(t){f(n,u("createOrUploadDocument_fileOverwritingError"));return}r.onload=function(t){var r=t.target.result;pt(n,i.name,r).then(function(){o(n)},function(){f(n,u("createOrUploadDocument_uploadDocumentError"))})},r.onerror=function(){f(n,u("createOrUploadDocument_uploadDocumentError"))},r.readAsArrayBuffer(i)},function(){f(n,u("createOrUploadDocument_uploadDocumentError"))})}function ii(n){var t=i.Deferred(),r;return cr.show({title:u("createOrUploadDocument_promptTitle"),defaultResult:!1,buildContentCallback:function(t){var e=i("<input class='ui-input-text' type='text' id='documentName'><\/input>"),f=i("<div class='msls-leaf'/>");t.append(i('<div class="msls-spdoc-modal"><\/div>').append(i("<div>"+u("createOrUploadDocument_promptLabel")+"<\/div>")).append(e)),!n||t.find(".msls-spdoc-modal").append(i('<div class="msls-spdoc-modal-extension">.'+n+"<\/div>")).append(i('<div class="msls-clear"><\/div>')),f.appendTo(t).append(i('<a class="msls-spdoc-modal-button msls-spdoc-modal-button-left" href="#">'+u("dialogService_ok")+"<\/a>").buttonMarkup({theme:wt,mini:!0}).on("vclick",function(t){t.preventDefault(),r=i("#documentName").val()+"."+n,cr.close()})),f.append(i('<a class="msls-spdoc-modal-button msls-spdoc-modal-button-right" href="#">'+u("dialogService_cancel")+"<\/a>").buttonMarkup({theme:wt,mini:!0}).on("vclick",function(n){n.preventDefault(),cr.close()})).append(i('<div class="msls-clear"><\/div>'))}}).then(function(){r?t.resolve(r):t.reject()}),t.promise()}function rt(n){var r=i.Deferred(),f=c.appWebUrl+"/_api/SP.AppContextSite(@target)/web/lists/getByTitle(@docLibName)?&$select=ContentTypes,RootFolder&$expand=ContentTypes,RootFolder&@target='"+encodeURIComponent(c.hostUrl)+"'&@docLibName='"+encodeURIComponent(n._docLibName)+"'",e={url:f,method:"GET",headers:{Accept:"application/json; odata=verbose"},success:function(t){var i=JSON.parse(t.body);n._contentTypes=i.d.ContentTypes.results,n._rootFolderRelativeUrl=i.d.RootFolder.ServerRelativeUrl,r.resolve()},error:function(){r.reject(u("createOrUploadDocument_getListError"))}};return c.executor.executeAsync(e),r.promise()}function ut(){var n=i("<li class='msls-li ui-li ui-btn'><\/li>");return n.attr("data-theme",wt),n}function w(n,t){var i=n.length;i===0?n[0]={menuItem:t,next:0,previous:0}:(n[i]={menuItem:t,next:0,previous:i-1},n[i-1].next=i,n[0].previous=i)}function ft(n,t){var i=n._focusedMenuItem,r=n._menuItemsRing;k(n,t?r[i].previous:r[i].next)}function k(n,t){var r=n._menuItemsRing,i=r[n._focusedMenuItem].menuItem;i.attr(gt,"-1"),i.removeClass("ui-focus"),n._focusedMenuItem=t,i=r[n._focusedMenuItem].menuItem,i.attr(gt,"0"),i.focus()}function ri(n,t){var r=i.mobile.keyCode,u=t.which;switch(u){case r.UP:ft(n,!0);break;case r.DOWN:ft(n,!1);break;case r.SPACE:case r.ENTER:n._menuItemsRing[n._focusedMenuItem].menuItem.trigger("vclick");break;default:return}t.stopPropagation(),t.preventDefault()}function et(n){var t=n._contentTypes,r=!1;if(!t||t.length===0||!n._canCreateDocuments){n._customTypesHr.hide(),n._customTypesList.hide();return}t.forEach(function(t){var s;if(!t.Hidden&&!!t.DocumentTemplateUrl&&t.DocumentTemplateUrl!==""){var f=ut(),o=i("<img class='ui-li-thumb' />"),a=i("<div class='msls-font-style-normal'><\/div>"),v=i("<div class='msls-text'><\/div>"),u=c.getFileExtension(t.DocumentTemplateUrl),y="",l;if(u===""||u==="aspx"||u==="htm")return;for(f.addClass("ui-li-static ui-li-has-thumb"),v.text(t.Name),v.appendTo(a),s=0;s<h.length;s++){var e=h[s],p=u===e.templateExtension,b=p||u===e.extension;if(b){l=c.sharePointImagesUrl+e.imageName,p&&e.isCreationSupported&&(u=e.extension,y=e.documentType);break}}f.on("vclick",function(){nt(n,t.DocumentTemplateUrl,u,y)});l?o.attr("src",l):(o.attr("src",c.getDefaultFileIcon()),c.getFileIconUrl(t.DocumentTemplateUrl).then(function(n){o.attr("src",n)})),o.appendTo(f),a.appendTo(f),w(n._menuItemsRing,f),f.appendTo(n._customTypesList),r=!0}}),r||(n._customTypesHr.hide(),n._customTypesList.hide());return}function ui(n){h.forEach(function(t){if(t.isCreationSupported){var r=ut(),f=i("<img />"),e=i("<div class='msls-font-style-normal'><\/div>"),o=i("<div class='msls-text'><\/div>");o.text(u(t.textResource)),o.appendTo(e),f.attr("src",c.sharePointImagesUrl+t.imageName),f.appendTo(r),e.appendTo(r),r.attr("id",t.extension),r.appendTo(n)}})}function fi(t){var f=i("<div class='ui-bar'><\/div>"),h=i("<div class='msls-font-style-small'><\/div>"),r=i("<div class='msls-text'><\/div>"),e=i("<a href='#' data-role='none'>"+u("createOrUploadDocument_upload")+"<\/a>"),o,s;return e.attr(gt,"-1"),e.appendTo(r),n.FileReader?(o=i("<input type='file' style='display: none;' id='"+y+"'>"),o.appendTo(r)):(s=i("<iframe id='uploadIFrame' name='uploadIFrame' style='width: 0px; height: 0px; border: 0px solid #fff;' />"),s.appendTo(r)),r.appendTo(h),f.attr("data-theme",wt),h.appendTo(f),f.appendTo(t),{link:e,input:o,iFrame:s}}function ei(n){h.forEach(function(t){function u(){nt(n,"",t.extension,t.documentType)}if(t.isCreationSupported){var r=i("#".concat(t.extension));if(!!r){r.on("vclick",u);r[0].className.indexOf("ui-first-child")!==-1&&r.attr(gt,"0"),w(n._menuItemsRing,r)}}})}function oi(n,t){var u,r=t.getElementById(y);return!r?!1:(u=t.getElementById(ct),u.value=n._docLibName,r.onchange=function(){!r.value||(n._readingFromServer=!0,s(n),t.getElementById(lt).submit())},i(r).trigger("click"),l(n),!0)}function si(n,t){function v(t){var r=i(t.target),u;!r.val()||(ti(n,r[0]),u=r.clone(),r.replaceWith(u),u.change(v))}var r=n.getView(),e,h,d,c,b,l;if(n._customTypesHr=p(r,t.customTypesHrPath),n._customTypesList=p(r,t.customTypesListPath),c=p(r,t.fileUploadLinkPath),t.inputFilePath?e=p(r,t.inputFilePath):h=p(r,t.uploadIFramePath),n._focusedMenuItem=0,et(n),!e){n._readingFromServer=!1;c.on("vclick",function(){n._loading||(s(n),n._readingFromServer=!0,h.attr("src",at))});h.on("load",function(){if(n._readingFromServer){n._readingFromServer=!1;var i=null,r=h[0].contentDocument,t;try{if(oi(n,r))return;i=r.body.textContent,!i||(t=JSON.parse(i))}catch(e){}t?isNaN(t.itemId)?t.missingWebPages?f(n,u("createOrUploadDocument_uploadNotSupported")):t.fileExists?f(n,u("createOrUploadDocument_fileOverwritingError")):f(n,u("createOrUploadDocument_uploadDocumentError")):a(n,t.itemId).then(function(){o(n)},function(){f(n,u("createOrUploadDocument_uploadDocumentError"))}):f(n,u("createOrUploadDocument_uploadDocumentError"))}})}else{b=e[0].childNodes[0],i(b).change(v),e.ready(function(){e.attr("style","display: none;")});c.on("vclick",function(){n._loading||r.find("#"+y).trigger("click")})}w(n._menuItemsRing,c);n._menuContainerElement.on("keydown",function(t){ri(n,t)});if(i.mobile.popup.active&&(l=i.mobile.activePage.find(".ui-popup-container.ui-popup-active > .ui-popup"),l.length)){k(n,0);l.on("popupafteropen",function(){k(n,0),ot(n,i(this))})}}function ot(n,t){var r,i;t.length&&(r=t[0],i=r._mslsCustomPosition,i?(t.popup("reposition",i),n._lastPopupPosition=i):!n||!n._lastPopupPosition||t.popup("reposition",n._lastPopupPosition))}function st(n){if(i.mobile.popup.active){var t=i.mobile.activePage.find(".ui-popup-container.ui-popup-active > .ui-popup");ot(n,t)}}function hi(){var t=this;!t._isViewCreated||!c||(t._loaded=!1,t._customTypesList.empty(),t._customTypesList.hide(),t._customTypesHr.hide(),s(t),t._contentTypes=[],!t._canCreateDocuments||rt(t,!0).then(function(){et(t),l(t),t._loaded=!0,st(t)},function(){f(t,u("createOrUploadDocument_getListError"))}).always(function(){tt(d,t)}))}function ci(t){var i=this,r=i.getView(),a,e,b=i.data,o=b.valueModel,v,h,y,w;if(i._loaded=!1,i._loadingElement=p(r,t.loadingElementPath),i._menuContainerElement=p(r,t.menuContainerElementPath),i._createDefaultListElement=p(r,t.createDefaultListElementPath),i._titleContainerElement=p(r,t.titleContainerElementPath),s(i),i._menuItemsRing=[],i._contentTypes=[],i._lastPopupPosition=null,!o.query||!o.query.source.links){f(i,u("createOrUploadDocument_noNavigationPropertyError"));return}if(!c){f(i,u("createOrUploadDocument_siteError"));return}c.ready(function(){if(!c.hostWeb){f(i,u("createOrUploadDocument_siteError"));return}if(i._canCreateDocuments=dt(),h=n.msls.application,v=o.elementType,y=h[v.name],w=h.activeDataWorkspace,i._entitySet=gr(w,y),a=i._entitySet.getModel(),e=it(a,hs),!e){f(i,u("createOrUploadDocument_entityChangeError"));return}i._docLibName=e.title,i._canCreateDocuments?ei(i):(i._createDefaultListElement.attr("style","display: none;"),i._titleContainerElement.attr("style","display: none;")),rt(i,!0).then(function(){si(i,t),l(i),i._loaded=!0,st(i)},function(){f(i,u("createOrUploadDocument_getListError"))}).always(function(){tt(d,i)})},function(){f(i,u("createOrUploadDocument_siteError"))})}function li(n,t,r){var f=i("<div class='msls-spdoc-create'><\/div>"),o=i("<div class='ui-bar'><\/div>"),a=i("<div class='msls-font-style-large'><div class='msls-text'>"+u("createOrUploadDocument_title")+"<\/div><\/div>"),s=i("<ul class='msls-listview' data-role='listview' data-inset='false'><\/ul>"),c=i("<hr />"),l=i("<ul class='msls-listview' data-role='listview' data-inset='false' style='display:inline'><\/ul>"),e,h=i("<div class='msls-list-loading'><\/div>");o.attr("data-theme",wt),o.appendTo(f),a.appendTo(o),ui(s),s.appendTo(f),c.appendTo(f),l.appendTo(f),e=fi(f),h.appendTo(f),h.hide(),f.appendTo(n),r.titleContainerElementPath=v(n,o),r.createDefaultListElementPath=v(n,s),r.menuContainerElementPath=v(n,f),r.customTypesHrPath=v(n,c),r.customTypesListPath=v(n,l),r.loadingElementPath=v(n,h),e.input?r.inputFilePath=v(n,e.input):r.uploadIFramePath=v(n,e.iFrame),r.fileUploadLinkPath=v(n,e.link)}var h=[{textResource:"createOrUploadDocument_word",imageName:"lg_icdocx.png",documentType:"1",extension:"docx",templateExtension:"dotx",isCreationSupported:!0},{textResource:"createOrUploadDocument_excel",imageName:"lg_icxlsx.png",documentType:"2",extension:"xlsx",templateExtension:"xltx",isCreationSupported:!0},{textResource:"createOrUploadDocument_ppt",imageName:"lg_icpptx.png",documentType:"3",extension:"pptx",templateExtension:"potx",isCreationSupported:!0},{textResource:"createOrUploadDocument_one",imageName:"lg_icone.png",documentType:"4",extension:"one",templateExtension:"onepkg",isCreationSupported:!1}],ht={edit:1},y="openFile",ct="listTitle",lt="uploadForm",at="/Microsoft_LightSwitch_SharePoint_FileUploader",d="createOrUploadDocumentLoaded";e("ui.controls","CreateOrUploadDocument",vt,r.ui.Control,{controlName:"CreateOrUploadDocument",_refreshView:hi,_attachViewCore:ci,entity:b()},{_fillTemplate:li}),r.ui.controls.CreateOrUploadDocument.prototype._propertyMappings={value:"entity"}}(),function(){function h(t){n.call(this,t),this._valueChangingText=!1,this._symbol=null}function c(){var e=this.text,v=ct.culture().numberFormat,h=v.currency,y,n=this.data,p,i,r,c,w=!0,l;e?(r=this._symbol,c=f(n),!c||c.currencySymbol===t?r||(this._isoSymbol=a(n),l=s[this._isoSymbol],r=this._symbol=l?l:o):(w=!1,r=c.currencySymbol||""),y=h.symbol,h.symbol=r,i=ct.parseFloat(e),w&&isNaN(i)&&(h.symbol=this._isoSymbol,i=ct.parseFloat(e)),h.symbol=y,isNaN(i)||e.indexOf(v.percent.symbol)!==-1?(p=new ai(n.details,u("validation_invalidValue_money")),io(n,p)):(yf(n),this.numericValue=i)):this.numericValue=null}function l(){this._valueChangingText||this._setValueFromText(),n.prototype._onTextChanged.call(this)}function f(n){var i=n.details.getModel(),r,t,u=bi+":@MoneyProperties";return t=it(i,u),t||(r=se(i.propertyType),t=it(r,u)),t}function a(n){var r="USD",i;return n.details&&(i=f(n),i&&(r=i.isoCurrencySymbol!==t?i.isoCurrencySymbol:r)),r.toUpperCase()}var n=r.ui.controls.TextBox,i={none:0,symbol:1,isoSymbol:2},o="¤",s={AED:"د.إ.‏",ALL:"Lek",AMD:"դր.",ARS:"$",AUD:"$",AZN:"ман.",BGL:"¤",BHD:"د.ب.‏",BND:"$",BOB:"$b",BRL:"R$",BYB:"¤",BZD:"BZ$",CAD:"$",CHF:"Fr.",CLP:"$",CNY:"¥",COP:"$",CRC:"₡",CZK:"Kč",DKK:"kr.",DOP:"RD$",DZD:"د.ج.‏",EEK:"kr",EGP:"ج.م.‏",EUR:"€",GBP:"£",GEL:"Lari",GTQ:"Q",HKD:"HK$",HNL:"L.",HRK:"kn",HUF:"Ft",IDR:"Rp",ILS:"₪",INR:"रु",IQD:"د.ع.‏",IRR:"ريال",ISK:"kr.",JMD:"J$",JOD:"د.ا.‏",JPY:"¥",KES:"S",KGS:"сом",KRW:"₩",KWD:"د.ك.‏",KZT:"Т",LBP:"ل.ل.‏",LTL:"Lt",LVL:"Ls",LYD:"د.ل.‏",MAD:"د.م.‏",MKD:"ден.",MNT:"₮",MOP:"MOP",MVR:"ރ.",MXN:"$",MYR:"RM",NIO:"C$",NOK:"kr",NZD:"$",OMR:"ر.ع.‏",PAB:"B/.",PEN:"S/.",PHP:"Php",PKR:"Rs",PLN:"zł",PYG:"Gs",QAR:"ر.ق.‏",ROL:"lei",RSD:"Дин.",RUR:"р.",SAR:"ر.س.‏",SEK:"kr",SGD:"$",SIT:"€",SKK:"€",SYP:"ل.س.‏",THB:"฿",TND:"د.ت.‏",TTD:"TT$",TWD:"NT$",UAH:"₴",USD:"$",UYU:"$U",UZS:"сўм",VEB:"Bs. F.",VND:"₫",YER:"ر.ي.‏",YTL:"ر.ي.‏",ZAR:"R",ZWD:"Z$"};wh=function(n,r){var a="",h=2,v=ct.culture().numberFormat.currency,p,c=i.symbol,e="USD",l=!0,u,w=!0,y;return(r=ye(r),r===null||r===t)?"":(!n.details||(u=f(n),u&&(h=u.decimalDigits!==t?u.decimalDigits:h,u.currencySymbol!==t?(w=!1,e=u.currencySymbol||""):e=u.isoCurrencySymbol!==t?u.isoCurrencySymbol:e,c=u.symbolMode!==t?u.symbolMode:c,l=u.isFormatted!==t?u.isFormatted:l),w&&l&&(c===i.isoSymbol?e=e.toUpperCase():c===i.symbol?(y=s[e.toUpperCase()],e=y?y:o):c===i.none&&(e=""))),(h===t||h===null)&&(h=ve(r)),l?(p=v.symbol,v.symbol=e,a=ct.format(r,"c"+h.toString()),v.symbol=p):a=ct.format(r,"n"+h.toString()),a)},e("ui.controls","MoneyEditor",h,n,{controlName:"MoneyEditor",numericValue:b(function(n){try{this._valueChangingText=!0,this.text=wh(this.data,n)}finally{this._valueChangingText=!1}},null,!0),_onTextChanged:l,_setValueFromText:c},{_fillTemplate:n._fillTemplate,_isFormElement:!0}),r.ui.controls.MoneyEditor.prototype._propertyMappings={value:"numericValue",properties:{placeholderText:"placeholderText"}},r.ui.controls.MoneyEditor.prototype._editableProperties={numericValue:"value"}}(),function(){function n(n){r.ui.controls.Text.call(this,n)}e("ui.controls","MoneyViewer",n,r.ui.controls.Text,{controlName:"MoneyViewer",numericValue:b(function(n){this.text=wh(this.data,n)})},{_fillTemplate:r.ui.controls.Text._fillTemplate}),r.ui.controls.MoneyViewer.prototype._propertyMappings={value:"numericValue",properties:{tap:"tap"}}}(),function(){function n(n){r.ui.Control.call(this,n)}e("ui.controls","NoControl",n,r.ui.Control,{controlName:"NoControl"}),r.ui.controls.NoControl.prototype._propertyMappings={}}(),function(){function i(t){n.call(this,t),this._valueChangingText=!1}function f(){var t=this.text,f=ct.culture().numberFormat,s=f.percent.symbol,i=this.data,e,n,r,o=2,h=null;t?(n=ct.parseFloat(t),isNaN(n)||t.indexOf(f.currency.symbol)!==-1?(e=new ai(i.details,u("validation_invalidValue_percent")),io(i,e)):(yf(i),r=n.toString().split("."),!r[1]||(o+=r[1].length),this.numericValue=(n*.01).toFixed(o))):this.numericValue=null}function o(){this._valueChangingText||this._setValueFromText(),n.prototype._onTextChanged.call(this)}var n=r.ui.controls.TextBox;bh=function(n,i){var r,f,o,u,e;return(i=ye(i),i===null||i===t)?"":(!n.details||(f=n.details.getModel(),e=bi+":@FormatParameter",u=it(f,e),u||(o=se(f.propertyType),u=it(o,e)),u&&(r=u.decimalDigits)),(r===t||r===null)&&(r=ve(i)-2,r<0&&(r=0)),ct.format(i,"p"+r.toString()))},e("ui.controls","PercentEditor",i,n,{controlName:"PercentEditor",numericValue:b(function(n){try{this._valueChangingText=!0,this.text=bh(this.data,n)}finally{this._valueChangingText=!1}},null,!0),_onTextChanged:o,_setValueFromText:f},{_fillTemplate:n._fillTemplate,_isFormElement:!0}),r.ui.controls.PercentEditor.prototype._propertyMappings={value:"numericValue",properties:{placeholderText:"placeholderText"}},r.ui.controls.PercentEditor.prototype._editableProperties={numericValue:"value"}}(),function(){function n(n){r.ui.controls.Text.call(this,n)}e("ui.controls","PercentViewer",n,r.ui.controls.Text,{controlName:"PercentViewer",numericValue:b(function(n){this.text=bh(this.data,n)})},{_fillTemplate:r.ui.controls.Text._fillTemplate}),r.ui.controls.PercentViewer.prototype._propertyMappings={value:"numericValue",properties:{tap:"tap"}}}(),function(){function tt(n){a.call(this,n)}function l(n,t){var i="disconnected";switch(n){case 0:i="online";break;case 1:i="offline";break;case 2:case 4:case 6:case 8:case 16:i="away";break;case 3:case 5:case 7:case 10:case 19:i="busy";break;case 9:case 21:i="donotdisturb";break;case 11:i="online-oof";break;case 12:i="offline-oof";break;case 13:case 17:i="away-oof";break;case 14:case 20:i="busy-oof";break;case 15:i="donotdisturb-oof";break;case 18:i="blocked"}return"msls-sppsv-"+t+"-img msls-sppsv-"+t+"-img-"+i}function rt(n,r,u){var e=!!c&&!!t,a=r.properties,l=a.displayMode,s=e?l==="NameOnly"?"pawn":"strip":null,y=s==="pawn",p=s==="strip",o=l==="NameWithPictureAndTitle",f='<div class="msls-text">',h="msls-sppsv-details msls-text";e&&(f+="<a class='msls-sppsv-presence-link' href='javascript:;'><span class='msls-sppsv-presence msls-sppsv-"+s+"'><img class='presence-element' src='"+c.serverUrl+"/_layouts/15/images/spimn.png' /><\/span><\/a>"),o?(f+="<span class='msls-sppsv-picture'><img class='msls-sppsv-picture-img' /><\/span>",h+=e?" msls-sppsv-strip-name-title":" msls-sppsv-name-title"):e&&(h+=" msls-sppsv-pawn-name"),f+="<div class='"+h+"'>",f+='<div class="msls-sppsv-loading">&nbsp;<\/div>',f+='<div class="msls-sppsv-id"><\/div>',o&&(f+="<div class='msls-text'>"),f+='<span class="msls-sppsv-name"><\/span>',o&&(f+='<\/div><div class="msls-font-style-small"><div class="msls-text msls-sppsv-title"><\/div>'),f+="<\/div><\/div>",i(f).appendTo(n),u.loadingElement=v(n,yt(n,".msls-sppsv-loading")),e&&(u.pawnOrStrip=s,u.presenceLinkElement=v(n,yt(n,".msls-sppsv-presence-link")),u.presenceElement=v(n,yt(n,".presence-element"))),o&&(u.pictureElement=v(n,yt(n,".msls-sppsv-picture-img"))),u.idElement=v(n,yt(n,".msls-sppsv-id")),u.nameElement=v(n,yt(n,".msls-sppsv-name")),o&&(u.titleElement=v(n,yt(n,".msls-sppsv-title")))}function ut(n){var r=this;a.prototype._attachViewCore.call(r,n),r._loadingElement=p(r.getView(),n.loadingElement,".msls-sppsv-loading"),n.presenceElement&&(r._pawnOrStrip=n.pawnOrStrip,r._presenceLinkElement=p(r.getView(),n.presenceLinkElement,".msls-sppsv-presence-link"),r._presenceElement=p(r.getView(),n.presenceElement,".presence-element")),n.pictureElement&&(r._pictureElement=p(r.getView(),n.pictureElement,".msls-sppsv-picture-img")),r._idElement=p(r.getView(),n.idElement,".msls-sppsv-id"),r._nameElement=p(r.getView(),n.nameElement,".msls-sppsv-name"),n.titleElement&&(r._titleElement=p(r.getView(),n.titleElement,".msls-sppsv-title")),t&&(r.getView().keydown(function(n){n.altKey&&n.shiftKey&&n.keyCode===121&&(t.ShowOOUI(r._currentSip,1,0,0),typeof t.DoAccelerator!="undefined"&&t.DoAccelerator())}),i("a",r.getView()).hover(function(){r._currentSip&&t.ShowOOUI(r._currentSip,0,0,0)},function(){t.HideOOUI()}),r._presenceLinkElement&&r._presenceLinkElement.click(function(){r._currentSip&&(t.ShowOOUI(r._currentSip,1,0,0),typeof t.DoAccelerator!="undefined"&&t.DoAccelerator())}),r.getView().focusout(function(){t.HideOOUI()})),r._refreshView()}function d(n){var i=n._currentSip,r=n._pawnOrStrip,t;i&&(t=r==="pawn"?s[i]:h[i],t.splice(t.indexOf(n._presenceElement),1),n._currentSip=null)}function w(n,t){var r=i.Deferred();return c.ready(function(){var e=c.context,f=kt.UI.ApplicationPages,o=f.ClientPeoplePickerWebServiceInterface,u=new f.ClientPeoplePickerQueryParameters,s,i;u.set_maximumEntitySuggestions(15),t?u.set_principalSource(kt.Utilities.PrincipalSource.userInfoList):u.set_principalSource(kt.Utilities.PrincipalSource.all),u.set_principalType(kt.Utilities.PrincipalType.user),u.set_queryString(n),u.set_webApplicationID("{00000000-0000-0000-0000-000000000000}"),i=o.clientPeoplePickerResolveUser(e,u),c.process().then(function(){if(i){var n=i.get_value();if(i=null,n)try{r.resolve(JSON.parse(n));return}catch(t){}r.resolve()}},function(){i&&(i=null,r.resolve())}),setTimeout(function(){i&&(i=null,r.resolve())},5e3)},function(){r.resolve()}),r.promise()}function g(n){return n&&(n.IsResolved||(n=n.MultipleMatches.length!==1?null:n.MultipleMatches[0])),n}function nt(n){var r=y[n],t,u;return r?r.then?u=r:(t=i.Deferred(),t.resolve(r),u=t.promise()):(t=i.Deferred(),y[n]=t.promise(),i.when(w(n,!0),w(n)).then(function(i,r){var u;u=g(i),u||(u=g(r)),y[n]=u,t.resolve(u)}),u=t.promise()),u}function ft(n){var i=this,r=i._pawnOrStrip,u;i._isViewCreated&&(i._titleElement&&i._titleElement.empty(),i._nameElement.hide(),i._nameElement.empty(),i._presenceElement&&(i._presenceElement.removeClass().addClass(l(-1,r)),d(i)),pu(i._idElement,i.value),i._loadingElement.hide(),i._pictureElement&&i._pictureElement.attr("src",c.hostUrl+"/_layouts/15/userphoto.aspx?size=S"),i._loadingPromise=null,i.value&&(i._idElement.hide(),i._loadingElement.show(),i._loadingPromise=u=nt(i.value),u.then(function(f){var y=!f?null:f.DisplayText,e=!f?null:f.EntityData,p=!e?null:e.AccountName||e.Email,b=!e?null:e.SPUserID,a=!e?null:e.SIPAddress||e.Email,w=!e?null:e.Title,v;fe(i)||i._loadingPromise!==u||(i._loadingElement.hide(),!i._presenceElement||!a||(i._currentSip=a,typeof o[a]!="number"?(v=o[a]=k?t.GetStatus(a,"imn_"+(++it).toString()+",type=sip"):-1,s[a]=[],h[a]=[]):v=o[a],i._presenceElement.removeClass().addClass(l(v,r)),r==="pawn"?s[a].push(i._presenceElement):h[a].push(i._presenceElement)),y?(pu(i._nameElement,y),i._nameElement.show(),!p||!i._pictureElement||i._pictureElement.attr("src",c.hostUrl+"/_layouts/15/userphoto.aspx?size=S&accountname="+encodeURIComponent(p)),!w||!i._titleElement||pu(i._titleElement,w)):i._idElement.show(),i._loadingPromise=null,n&&i.getView().trigger("updatelayout"))})),n&&i.getView().trigger("updatelayout"))}function et(){d(this)}var y={},t,f="application/x-sharepoint-uc",u;try{!c||(n.ActiveXObject?t=new ActiveXObject("Name.NameCtrl.1"):!navigator.mimeTypes||!navigator.mimeTypes[f]||!navigator.mimeTypes[f].enabledPlugin||(t=document.getElementById(f),t||(u=document.createElement("object"),u.id=u.type=f,u.width=u.height="0",u.style.setProperty("visibility","hidden",""),document.body.appendChild(u),t=document.getElementById(f))))}catch(ot){}t&&(i(n).scroll(function(){t.HideOOUI()}),i(n).unload(function(){t.HideOOUI(),t=null}));var k=!!t&&t.PresenceEnabled,o={},it=0,s={},h={};k&&(t.OnStatusChange=function(n,t){var r;o[n]=t,r=l(t,"pawn"),(s[n]||[]).forEach(function(n){n.removeClass().addClass(r)}),r=l(t,"strip"),(h[n]||[]).forEach(function(n){n.removeClass().addClass(r)})}),e("ui.controls","PersonViewer",tt,a,{controlName:"PersonViewer",_refreshView:ft,_attachViewCore:ut,_onDispose:et,value:b(function(){this._refreshView(!0)},null,!0)},{_fillTemplate:rt,_searchForUsers:w,_resolveId:nt}),r.ui.controls.PersonViewer.prototype._propertyMappings={stringValue:"value"}}(),function(){function f(n){var t=this;a.call(t,n),t._updatingValue=!1}function o(n,t,r){var f=i('<ul class="id-element" data-role="listview" data-inset="true" data-filter="true" data-filter-theme="a" data-filter-placeholder="'+u("personPicker_placeholder")+'" />').appendTo(n),e=t.properties;r.idElement=v(n,f),r.showDetails=e.choiceDisplayMode!=="NameOnly"}function s(){var t=this,f=t._promise,e=t._textElement.val(),r=i.Deferred(),u=t._promise=r.promise();return setTimeout(function(){function i(){n._searchForUsers(e).then(function(n){var i;if(t._promise!==u){r.resolve();return}n&&(n.IsResolved?i=[n]:n.MultipleMatches&&(i=n.MultipleMatches)),t._promise=null,r.resolve(i||[])})}if(t._promise!==u){r.resolve();return}f?f.then(function(){if(t._promise!==u){r.resolve();return}i()}):i()},500),r.promise()}function h(){var u=i.Deferred(),n=this,t=n._userEntity,r;return n._updatingValue=!0,t?(r=t.EntityData,n.value=r?r.Email:t.Key):(n._textElement.val(""),n.value=n._textElement.val()),n._updatingValue=!1,u.resolve(),u.promise()}function l(n){function f(n){return t.text(n),t.html()}function e(n){var i='<li class="msls-li" data-icon="false"><a tabIndex="-1" href="javascript:;">',e=f(n.DisplayText),t,u,s,o;return r._showDetails?(t=n.EntityData,u=t?t.AccountName:null,u||(u=t?t.Email:null),s=c.hostUrl+"/_layouts/15/userphoto.aspx?size=S",u&&(s+="&accountname="+encodeURIComponent(u)),o=t?f(t.Title):null,i+="<div class='msls-sppsp-picture'><img class='msls-sppsp-picture-img' src='"+s+"' /><\/div><div class='msls-sppsp-details msls-font-style-normal msls-text'><div class='msls-text' title='"+e+"'>"+e+"<\/div>",o&&(i+="<div class='msls-font-style-small'><div class='msls-sppsp-title msls-text' title='"+o+"'>"+o+"<\/div><\/div>"),i+="<\/div>"):i+="<div class='msls-text' title='"+e+"'>"+e+"<\/div>",i+="<\/a><\/li>"}var r=this,u;r._ulElement=p(r.getView(),n.idElement,".id-element"),r._showDetails=n.showDetails,a.prototype._attachViewCore.call(r,n),r._rootElement=r.getView().closest(".msls-presenter");r.getView().one("listviewinit",function(){var n=r.getView().find(".ui-input-search");n.addClass("ui-mini"),r._textElement=n.find(".ui-input-text");r._textElement.on({vmousedown:function(){i(document.activeElement).closest(r._ulElement).length&&(u=!0)},keydown:function(n){var e=i.mobile.keyCode,t,f;switch(n.keyCode){case e.TAB:t=r._ulElement.children(),t.length!==1||t.is(".msls-sppsp-loading")||t.first().trigger("vclick");break;case e.DOWN:t=r._ulElement.children(),!t.length||t.is(".msls-sppsp-loading")||(u=!0,f=t.first(),f.attr("tabIndex","0"),f.addClass("ui-btn-active"),f.focus());break;case e.ENTER:r._updateValue()}},change:function(){u||r._updateValue()}});r._refreshView()});r._ulElement.on({listviewbeforefilter:function(n,t){var u=i(this),s=i(t.input),f=s.val(),o=r._userEntity,h=o?o.DisplayText||o.Key:r.value;f!==h&&(r._emptyList(),r._userEntity=null,!!f&&f.length>2&&(u.html('<li class="msls-sppsp-loading"><div class="msls-list-loading" /><\/li>'),r._rootElement.addClass("msls-sppsp-popup-active"),u.listview("refresh"),r._getMatches().then(function(n){n&&u.html()&&(r._emptyList(),n.forEach(function(n){var t=i(e(n));t.data("userEntity",n),t.appendTo(u)}),n.length&&r._rootElement.addClass("msls-sppsp-popup-active"),u.listview("refresh"),u.trigger("updatelayout"),r._onMatchesShown&&(r._onMatchesShown(n),r._onMatchesShown=null))})))},vmousedown:function(n){var t=i(document.activeElement);!t.closest(r._textElement).length&&(!t.closest("li").closest(r._ulElement).length||n.target!==r._ulElement[0])||(u=!0),n.target===r._ulElement[0]&&setTimeout(function(){i(document).one("vmousedown",function(n){i(n.target).closest(r.getView()).length||r._emptyList()})},0)},keydown:function(n){var f=i.mobile.keyCode,t;switch(n.keyCode){case f.UP:t=i(document.activeElement),t.attr("tabIndex","-1"),t.removeClass("ui-btn-active"),t=t.prev(),u=!0,t.length?(t.addClass("ui-btn-active"),t.attr("tabIndex","0"),t.focus()):r._textElement.focus();break;case f.DOWN:t=i(document.activeElement),t.next().length&&(t.attr("tabIndex","-1"),t.removeClass("ui-btn-active"),t=t.next(),u=!0,t.addClass("ui-btn-active"),t.attr("tabIndex","0"),t.focus());break;case f.ESCAPE:u=!0,r._emptyList(),r._textElement.focus(),n.stopPropagation(),n.preventDefault();break;case f.TAB:case f.ENTER:i(n.target).trigger("vclick")}},vclick:function(n){var u,t;n.target!==r._ulElement[0]&&(u=i(n.target).closest("li"),t=u.data("userEntity"),t)&&(r._userEntity=t,r._textElement.val(t.DisplayText||t.Key),r._emptyList(),r._updateValue(),n.preventDefault())}});r.getView().focusout(function(){u?u=!1:r._emptyList()})}function y(){var t=this,r,i,u=t._userEntity;t._isViewCreated&&t._textElement&&!t._updatingValue&&(r=u?u.Key:t._textElement.val(),r!==t.value&&(t._userEntity=null,t._textElement.val(t.value),t._loadingPromise=null,t.value&&(t._loadingPromise=i=n._resolveId(t.value),i.then(function(n){var r;fe(t)||t._loadingPromise!==i||(t._userEntity=n,r=!n?null:n.DisplayText,r&&t._textElement.val(r),t._loadingPromise=null)}))))}function w(){this._refreshView()}function k(){this._ulElement.html(""),this._rootElement.removeClass("msls-sppsp-popup-active")}function d(n){var r=this,t=r._ulElement.children().filter(function(){return i(this).data("userEntity")===n});t.length&&t.find("a").trigger("vclick")}var n=r.ui.controls.PersonViewer,t=i("<pre/>");e("ui.controls","PersonPickerBase",f,a,{controlName:"PersonPickerBase",value:b(function(){this._onValueChanged()},null,!0),_getMatches:s,_attachViewCore:l,_refreshView:y,_onValueChanged:w,_selectPerson:d,_emptyList:k,_updateValue:h},{_fillTemplate:o,_isFormElement:!0})}(),function(){function n(n){r.ui.controls.PersonPickerBase.call(this,n)}function t(n){r.ui.controls.PersonPickerBase.prototype._attachViewCore.call(this,n),this._rootElement.addClass("msls-ctl-person-picker-base")}e("ui.controls","PersonPicker",n,r.ui.controls.PersonPickerBase,{controlName:"PersonPicker",_attachViewCore:t},{_fillTemplate:r.ui.controls.PersonPickerBase._fillTemplate,_isFormElement:r.ui.controls.PersonPickerBase._isFormElement}),r.ui.controls.PersonPicker.prototype._propertyMappings={stringValue:"value"},r.ui.controls.PersonPicker.prototype._editableProperties={value:"stringValue"}}(),function(){function n(n){r.ui.controls.TextBox.call(this,n)}function t(n,t,r){var f='<input type="tel" class="id-element" data-mini="true" />',u=i(f).appendTo(n);t.maxLength&&wo(u,t.maxLength),r.idElement=v(n,u)}e("ui.controls","PhoneNumberEditor",n,r.ui.controls.TextBox,{controlName:"PhoneNumberEditor"},{_fillTemplate:t,_isFormElement:!0}),r.ui.controls.PhoneNumberEditor.prototype._propertyMappings={stringValue:"text",properties:{placeholderText:"placeholderText"}}}(),function(){function n(n){r.ui.controls.Text.call(this,n)}function t(n,t,r){i('<div class="msls-text"><a class="id-element" target="_blank"><\/a><\/div>').appendTo(n),r.idElement=v(n,yt(n,".id-element"))}function u(){var t=this,i=t.data,n=t.text;t._isViewCreated&&(!i.details||n===""||(n=t._getFormattedText(n)),this._textElement.text(n),this._textElement.attr("href","tel:"+n))}function f(n){var a=this,f=a.data,i=f.details.getModel(),u=i.propertyType,h,t,c=bi+":@PhoneNumberValidation",r,l,e,s;if(i=f.details.getModel(),ou(u)&&(h=u,u=h.underlyingType),i[c]||(i=u),t=it(i,c),!!t&&!!t.formats)for(t.__regexparray||ws(t),r=0,l=t.__regexparray.length;r<l;r++)if(e=t.__regexparray[r].exec(f.value),e){s=o(t,e,r),s!==""&&(n=s);break}return n}function o(n,t,i){for(var k,s="",h="",c="",d="",u="",l=0,a=0,b=0,v=0,y=0,p=0,e=n.__formatarray[i].replace(/[^ACN]/gi," ").replace(/\s{2,}/g," ").replace(/^\s*/,"").replace(/\s*$/,""),o,f,g,r=0,w=e.length;r<w;r++)k!==e[r]&&(e[r]==="C"?l++:e[r]==="A"?a++:e[r]==="N"&&b++,k=e[r]);for(r=0;r<l;r++)s+=t[1+r];for(r=0;r<a;r++)h+=t[1+l+r];for(r=0;r<b;r++)c+=t[1+l+a+r];for(r=l+a+b+1,t[r]&&(d+=" "+t[r]+" "+t[r+1]),r=0,w=n.__formatarray.length;r<w;r++){for(o=!0,f=0,g=n.__formatarray[r].length;f<g;f++)if(n.__formatarray[r][f]==="C"){if(v===s.length){o=!1;break}u+=s[v++]}else if(n.__formatarray[r][f]==="A"){if(y===h.length){o=!1;break}u+=h[y++]}else if(n.__formatarray[r][f]==="N"){if(p===c.length){o=!1;break}u+=c[p++]}else u+=n.__formatarray[r][f];if((!s.length||v===s.length)&&(!h.length||y===h.length)&&(!c.length||p===c.length)||(o=!1),o){u+=d;break}else v=0,y=0,p=0,u=""}return u}e("ui.controls","PhoneNumberViewer",n,r.ui.controls.Text,{controlName:"PhoneNumberViewer",_refreshView:u,_getFormattedText:f},{_fillTemplate:t})}(),function(){function t(n){r.ui.controls.PersonPickerBase.call(this,n)}function u(n){var t=this,u=t.data,o=u.model,s=o.dataSource,h=s.member,f=t.entity,e;r.ui.controls.PersonPickerBase.prototype._attachViewCore.call(t,n),t._rootElement.addClass("msls-ctl-person-picker-base"),i.each(h.elementType.properties,function(n,i){return i.name.toLowerCase()==="email"||i.name.toLowerCase()==="workemail"?(t._emailPropertyName=i.name,!1):!0}),u.dataBind("value."+t._emailPropertyName,function(){f?(e=f.details,t.value=e.entity[t._emailPropertyName]):t.value=null})}function f(n){var e=n.detailsProperty.getModel(),o=e.name,r=null,u=null,t=null,f,s=n.detailsProperty._details["__"+o].associationSet.ends;return i.each(s,function(t,i){return i.entitySet.entityType.id===n.detailsProperty.entity.details.getModel().id?r=i:u=i,!0}),n._toEndEntitySetName=u.entitySet.name,t=r.properties[0],t.entityProperty&&(f=t.entityProperty.name),f}function n(n,t,i){var r=null;n._isRelationshipInfoResolved||(n._foreignKeyPropertyName=f(n),n._isRelationshipInfoResolved=!0),n._foreignKeyPropertyName?(n.detailsProperty.entity[n._foreignKeyPropertyName]=t,i.resolve()):t?(r=n.detailsProperty.entity.details.entitySet.dataService[n._toEndEntitySetName+"_SingleOrDefault"](t),r.execute().then(function(t){n.detailsProperty.value=t.results[0],i.resolve()})):(n.detailsProperty.value=null,i.resolve())}function o(){var t=this,u=t._userEntity,f,r=i.Deferred();return u?c.ready(function(){f=u.EntityData;var i=c.hostWeb.ensureUser(f.Email),e;c.load(i).then(function(){t._updatingValue=!0,e=i.get_id(),t._updatingValue=!1,n(t,e,r)})}):(t._updatingValue=!0,t.value=t._textElement.val(),t._updatingValue=!1,n(t,null,r)),r.promise()}e("ui.controls","RelatedEntityPersonPicker",t,r.ui.controls.PersonPickerBase,{controlName:"RelatedEntityPersonPicker",_updateValue:o,_emailPropertyName:null,_foreignKeyPropertyName:null,_isRelationshipInfoResolved:null,_toEndEntitySetName:null,entity:b(null,null,!0),_attachViewCore:u},{_fillTemplate:r.ui.controls.PersonPickerBase._fillTemplate,_isFormElement:r.ui.controls.PersonPickerBase._isFormElement}),r.ui.controls.RelatedEntityPersonPicker.prototype._propertyMappings={value:"entity",details:"detailsProperty"},r.ui.controls.RelatedEntityPersonPicker.prototype._editableProperties={entity:"value"}}(),function(){function u(t,i,r){if(r.call(this,t,i),t==="change")switch(i){case"task":this.refreshView();break;case"activeTab":n(this);break;case"areButtonsVisible":nr()}}function f(n){i('<ul class="msls-tabs-container" data-role="controlgroup" data-type="horizontal" />').appendTo(n)}function o(n){var t=this;a.prototype._attachViewCore.call(t,n),this.refreshView()}function s(){function c(n){lh(u,s,n)}var t=this,o=t.task,u,f,e,s=".subControl:not('.msls-collapsed') a",h;t._isViewCreated&&o&&(u=yt(t.getView(),".msls-tabs-container"),u.empty(),u.off("keydown"),t._buttons=[],t._contentItems=[],h=o.screen.details.pages,i.each(o.tabCommands,function(n,o){var l=i('<div class="subControl" control="Button"/>'),a=i("<li class='"+oy+"'><\/li>").append(l),s=new r.ui.controls.NegativeTabIndexButton(l),v=d(h).first(function(n){return n.name===o.name});s.render(),t._buttons.push(s),t._contentItems.push(v),s.data=o,a.data("msls-tabName",o.name),new r.data.DataBinding("data.displayName",s,"content",s,pt.oneWayFromSource).bind(),new r.data.DataBinding("data.command",s,"tap",s,pt.oneWayFromSource).bind(),new r.data.DataBinding("tap.canExecute",s,"isEnabled",s).bind(),f=new r.ui.helpers.ObservableVisibility(s.getView()),e=new r.data.DataBinding("isVisible",v,"value",f,pt.oneWayFromSource),e.bind(),f.onvaluechange=c,fi(s,f),s.parent=t,u.append(a)}),rf(u,s),f=new r.ui.helpers.ObservableVisibility(t.getView()),e=new r.data.DataBinding("areButtonsVisible",t,"value",f,pt.oneWayFromSource),e.bind(),fi(t,f),t._ul=u,n(t))}function n(n){var e=n.data,t,r,u,f;if(e)for(n._ul&&i("."+fh,n._ul).removeClass(fh),t=0;t<n._buttons.length;t++)r=n._buttons[t],u=r.data,!u||u.name!==n.activeTab||(f=r.getView().parent(),f.addClass(fh))}function c(){for(var u=!this.task.screen.details.rootContentItem.properties[t],i=0,r,n=0;n<this._contentItems.length;n++)r=this._contentItems[n],r.isVisible&&i++;return u&&i>1}var t=ot("HideTabTitles","Screen");e("ui.controls","ScreenTabs",function(n){this._buttons=[],this._contentItems=[],a.call(this,n)},r.ui.Control,{controlName:"ScreenTabs",_attachViewCore:o,refreshView:s,dispatchEvent:ts(u),activeTab:h(),hideTabTitles:h(),task:h(),areButtonsVisible:ei(c)},{_fillTemplate:f})}(),function(){function t(t,r){var e=this,o=t.closest(".msls-vscroll");f(e,"_onScroll",function(){u(e)}),o.length?wi(r,"_isActivated",e,function(){r._isActivated?ah(o,e._savedScrollTop):e._saveScrollTop=o.scrollTop()}):o=i(n),f(e,"_scrollElement",o);o.on("scroll",e._onScroll)}function u(n){n.dispatchEvent("scroll")}e("ui.controls","ScrollHelper",t,null,{viewHeight:y(function(){return this._scrollElement.height()}),viewTop:y(function(){return this._scrollElement.scrollTop()}),scroll:lr(),_onDispose:function(){var n=this;n._scrollElement.off("scroll",n._onScroll),n._onScroll=null,n._scrollElement=null}}),ep=r.ui.controls.ScrollHelper}(),function(){function h(t,r){var o,s,h,f,c,e,l,u;t.data._isVStretch||(o=i.mobile.activePage,f=i(n),c=f.scrollTop(),l=r.offset().top-c,s=i("div[data-role='header']",o).outerHeight(),s&&(u=l-s,e=u<0),e||(h=i("div[data-role='footer']",o).outerHeight(),h&&(u=r.outerHeight()-(f.height()-l-h),e=u>0)),e&&f.scrollTop(c+u))}function f(n){var t=n.focusableItem.prev(n._itemHtmlSelector);return t.length||(t=n.getItems().last()),n.focusableItem=t,n.focusCurrentItem(),!1}function o(n){var t=n.focusableItem.next(n._itemHtmlSelector);return t.length||(t=n.getItems().first()),n.focusableItem=t,n.focusCurrentItem(),!1}function t(n){return n.focusableItem.trigger("vclick"),!1}function s(n){var f=n.focusableItem,r=f.data(u),i;return r?(i=n._collection,i.selectedItem===r?i.selectedItem=null:t(n),!1):!0}function c(n){var u=i.mobile.keyCode,r={};return r[u.UP]=f,r[u.DOWN]=o,r[u.ENTER]=t,r[u.SPACE]=s,new hv(n,r)}var u="__entity";e("ui.controls","CollectionControl",function(n){a.call(this,n),this._$focusable=i()},a,{getItems:function(){},focusableItem:y(function(){return this._$focusable},function(n){var t=this,i=t.focusableItem;i!==n&&(i.off("focus").attr(gt,"-1"),n.on("focus",function(){n.addClass("ui-focus").on("blur",function(){n.removeClass("ui-focus").off("blur")});h(t,n)}).attr(gt,"0"),this._$focusable=n)}),focusCurrentItem:function(){this.focusableItem.focus()}},{itemDataKey:u,focusPreviousItem:f,focusNextItem:o,selectFocusedItem:t,toggleFocusedItem:s,keyBindListNavigation:c}),te=r.ui.controls.CollectionControl}(),function(){function ct(n){var t,i,f,r=0,u=n.children.length,e=n.controlModel;if(n._isHStretch){if(e.id===":ColumnsLayout"){for(t=0;t<u;t++)i=n.children[t],f=i.properties[no],i._isHStretch&&r++;if(r>0&&r<u)return!0}for(t=0;t<u;t++)if(i=n.children[t],ct(i))return!0}return!1}function pi(t){var l=t.data,a=l.children[0],o=a.properties[ph],e,u,s,h,r,c=t._ulElement.children(f);c.length&&((u=av(t._ulElement[0]),u<=0||t._lastWidth===u)||(t._lastWidth=u,e=n.getComputedStyle(c[0]),r=parseFloat(e.marginLeft)+parseFloat(e.marginRight),r=isNaN(r)?0:r,o+=r,s=Math.max(Math.floor(u/(o+r)),1),h=Math.floor(u/s)-Math.ceil(r),t._globalStyle||(t._globalStyle=i('<style id="msls-global-list-style-'+t._uniqueName+'"><\/style>').appendTo(i("head"))),t._globalStyle.text("ul.msls-tile-list[data-msls-list-name='"+t._uniqueName+"'] li { width: "+h+"px; }")))}function bi(n,t){var r=n._collection,i;n._selectingElement=t,i=t.data(v),r.selectedItem=i,n._selectingElement=null,o(s.listSelectedItemChanged)}function ki(n){var t=n._ulElement,r=t[0];po(t,n,"itemTap","ItemTapPromise",function(n){return i(n.target).closest(f).length})}function g(n){it(n),ft(n,!1)}function at(n){var t=n._collection,i=n.data.children.length-1,r=t.data;i<r.length?(ft(n,!0),rt(n,r.slice(i,i+t._loader._pageSize))):t.canLoadMore?(o(s.listViewLoadLoadMore),t.loadMore(!0)):g(n)}function y(n){var i=n._collection,t,r;i&&i.state===c.idle&&(t=n._scrollHelper,r=n.data._isActivated&&n._ulElement.height()-t.viewTop<2*t.viewHeight,r?at(n):g(n))}function it(n){var t=n._ulElement,i=t.next("."+ih);n.data.children.length===1?(w||(w="<div class='"+ih+"'>"+u("listView_no_items")+"<\/div>"),i.length||t.after(w)):i.remove()}function vt(n){var t,r;return ce(n.controlModel)?d(n.children).any(vt):(t=iu(n),t&&(r=gf[t],i.isFunction(r)))?!r._skipEnhance:!0}function rt(t,r,u,e){function yt(){li(oi,yt),ni(function(){y(t)})}var c,b=r.length-1,a=t._ulElement,ft=t.data,k=ft.children[0],pt=u===0&&a.find(f).length!==0,d,w,et,g=t._rowTemplate,ot=t._rowTemplateData,l,nt,ct=i(".msls-empty",a),p=[],lt=[],rt,st=a[0],ht,ut,at;if(k){if(b>=0){for(g||(ot=t._rowTemplateData={},g=t._rowTemplate=n.document.createElement(h),l=i(g),d=i("<div><\/div>").appendTo(l),i('<div class="msls-clear"><\/div>').appendTo(l),l.attr(gt,"-1"),l.attr("data-icon","false"),et=i.mobile.getInheritedTheme(a,wt),l.addClass("msls-li msls-style ui-shadow ui-li ui-btn ui-btn-up-"+et),l.attr("data-theme",et),hr(d,k,ot),t._itemHasAttachedLabel=!!l.find("."+bf).length,t._shouldEnhance=vt(k)),rt=document.createDocumentFragment(),c=0;c<=b;c++)lt.push(ai.cloneContentItemTree(k,ft,r[c])),w=g.cloneNode(!0),p.push(w),rt.appendChild(w);for(ht=pt?st.firstChild:ct.length>0?ct[0]:null,ht?st.insertBefore(rt,ht):st.appendChild(rt),c=0;c<=b;c++)l=i(w=p[c]),l.data(v,r[c]),d=i(w.firstChild),nt=new vi(d),nt.parent=t,nt.data=lt[c],nt.attachView(ot);ut=i(p),o(s.listViewLoadEnhanceView),t._shouldEnhance&&ut.trigger("create"),a.listview(),a.listview("refresh"),t._focusableItem||!p.length||(at=t._focusableItem=i(p[0]),at.attr(gt,"0")),tt(ci,t)}o(s.listViewLoadApplyEnd),e||(b>=0?dt(oi,yt):ni(function(){y(t)})),it(t),p.length>0&&(t._itemHasAttachedLabel&&ne(ut),nr(ut,!0),yh&&!ft._isVStretch&&(nr(),tt("LayoutUpdateIgnoreNotification")))}}function ut(n,t){n._focusableItem&&n._focusableItem.attr(gt,"-1"),n._focusableItem=t,t.attr(gt,"0")}function di(n,t){if(t&&t.length!==0){for(var c=t.slice(0),o=n.data.children,r,l=[],a,s,u,e,i=1,v=o.length;i<v;i++)if(r=c.indexOf(o[i].data),r>-1&&(l.push(i),c.splice(r,1)),c.length===0)break;for(i=l.length-1;i>=0;i--)r=l[i],a=o[r],o.splice(r,1),s=a._view,u=s.getView().parents(f),u.attr(gt)==="0"&&(e=u.next(h),e.length||(e=u.prev(h)),e.length?ut(n,e):n._focusableItem=null),u.remove(),s.parent=null,k(s),k(a);it(n)}}function gi(n,t){if(!n._collectionPromise){var r=t.action,i=t.items;r===st.add?rt(n,i,t.newStartingIndex,!0):t.action===st.remove&&di(n,i)}}function ft(n,t){tt(hi,{listView:n,isLoading:t})}function kt(n,t,i){n._collection&&(n._collectionPromise=null,o(s.listViewLoadDataLoaded),rt(n,t,i),g(n))}function ti(n){var t=n._collection,r=t.state,u=n._ulElement,i;u.next("."+ih).remove(),ft(n,!0),r===c.loading?(i=n._collectionPromise=t.load(!0)).then(function(){n._collectionPromise===i&&kt(n,t.data)},function(){}):(i=n._collectionPromise=t.loadMore(!0)).then(function(t){n._collectionPromise===i&&kt(n,t.items,t.startIndex)},function(){})}function ii(n){for(var i=n.data.children,r,t=i.length-1;t>=1;t--)r=i[t],k(r._view),k(r);i.length=1}function tr(n){var t=n._collection.state;t!==c.idle&&(t===c.loading&&(n._ulElement.children(f).remove(),ii(n),n._focusableItem=null),ti(n))}function ir(n){var u=n._ulElement,e=n._collection.selectedItem,t,r;n._collectionPromise||(e&&(t=n._selectingElement,n._selectingElement=null,t||u.children(f).each(function(){return(r=i(this),r.data(v)===e)?(t=r,!1):!0})),t&&t.hasClass(tu)||(u.find(f+"."+tu).removeClass(tu),t&&t.addClass(tu)),t&&ut(n,t))}function ht(n){var t=n._collection,r=t.state===c.idle;!t.loadError&&(!r||t.canLoadMore)?n._loadingIndicator||(n._loadingIndicator=i("<div class='"+kv+"'><\/div>").insertAfter(n._ulElement)):n._loadingIndicator&&(n._loadingIndicator.remove(),n._loadingIndicator=null)}function p(n){return n._ulElement.children(h)}function rr(n,r,u){var s=p(n),o=s.length,f=s.index(r),e=Math.floor(n._ulElement.width()/r.outerWidth(!0));return u===t.nextRow?f+=e:f-=e,f<0?(f+=o+e-o%e,f>o-1&&(f-=e)):f>=o&&(f=f%e),i(s[f])}function ur(n,t){n.data._isVStretch||yo(t)}function l(n,i){var u=n._focusableItem,r;if(u&&u.length)switch(i){case t.previousItem:r=u.prev(h),r.length||(r=p(n).last());break;case t.nextItem:r=u.next(h),r.length||(r=p(n).first());break;case t.nextRow:case t.previousRow:r=rr(n,u,i)}else r=p(n).first();!r||!r.length||(ut(n,r),r.focus(),ur(n,r))}function ri(n){var t=n._focusableItem;t&&t.trigger("vclick")}function fr(n){var i=n._focusableItem,r,t;i&&(r=i.data(v),t=n._collection,t.selectedItem===r?t.selectedItem=null:ri(n))}function er(n,r){var u=i.mobile.keyCode,e=r.which,f=n._isTileList;switch(e){case u.UP:f?l(n,t.previousRow):l(n,t.previousItem);break;case u.DOWN:f?l(n,t.nextRow):l(n,t.nextItem);break;case u.LEFT:if(f)l(n,t.previousItem);else return;break;case u.RIGHT:if(f)l(n,t.nextItem);else return;break;case u.SPACE:fr(n);break;case u.ENTER:ri(n);break;default:return}r.stopPropagation(),r.preventDefault()}function or(n){var r=n._collection,t;n._searchBox&&(t=!0,r.enableSearch?t=!0:(t=!1,n._searchBox.text=null),lt(n._searchBox.getView(),!t,bt),yo(i("input.id-element",n._searchBox.getView())),i("input.id-element",n._searchBox.getView()).focus())}function cr(t){var u=t._collection,f=t._ulElement,e,h;if(u){ku(u,"collectionchange",t,function(n){gi(t,n.detail)}),ht(t),wi(u,"state",t,function(){tr(t),ht(t)}),wi(u,"loadError",t,function(){ht(t)}),wi(u,"selectedItem",t,function(){ir(t)}),wi(u,"enableSearch",t,function(){or(t)}),o(s.listViewLoadStart),e=t._scrollHelper=new r.ui.controls.ScrollHelper(f,t.data),e.addEventListener("scroll",function(){et._currentNavigationOperation||y(t)});f.on("keydown",function(n){n.isDefaultPrevented()||er(t,n)});u.state!==c.idle?ti(t):ui(function(){at(t)},1),t._onWindowResize=function(){y(t)};i(n).on("resize",t._onWindowResize)}}var fi=ot("ShowHeader","RootCollectionControl"),h="li",f="li.msls-li",v="__entity",ei='<div class="msls-vauto '+ho+"\"/><div class='msls-vauto "+co+'\'/><div{0}><ul class="msls-listview" data-role="listview" data-inset="true" /><\/div>',w,si="listViewInitialized",hi="listViewLoading",ci="listViewItemsAdded",ai=r.services.contentItemService,vi=r.ui.controls.ContentItemPresenter,c=r.VisualCollection.State,yi=0,t={nextItem:0,previousItem:1,nextRow:2,previousRow:3};e("ui.controls","ListView",function(n){a.call(this,n)},a,{controlName:"ListView",itemTap:b(),_attachViewCore:function(n){function v(){li(oi,v),ni(function(){cr(t)})}var t=this,f=t._ulElement=yt(t.getView(),"ul"),u=t.data,y=u.children[0],p=t._collection=u.value,o,s,w=u.controlModel,h,c,e,l;(o=u.screen.details.getModel(),this._uniqueName=o.name+"-"+u.name+"-"+ ++yi,t._isTileList=w.id===":TileList",s=y.properties[th],t._isTileList&&(f.addClass("msls-tile-list"),f.attr("data-msls-list-name",t._uniqueName)),f.append('<div class="msls-clear msls-empty" />'),t._headerLabel||(t._headerLabel=new r.ui.controls.Text(i("."+ho,t.getView())),h=u.properties[fi],lt(t._headerLabel.getView(),!h,bt),c=new r.data.DataBinding("data.displayName",t,"text",t._headerLabel,pt.oneWayFromSource),c.bind()),t._headerLabel.render(),t._searchBox||(t._searchBox=new r.ui.controls.SearchTextBoxControl(i("."+co,t.getView())),e=t.data.value,!e||e.enableSearch||t._searchBox.getView().addClass(bt),l=new r.data.DataBinding("data.value.search",t,"text",t._searchBox,pt.twoWay),l.bind()),t._searchBox.render(),p)&&(ki(t),dt(oi,v),t._isTileList&&s&&(t._layoutUpdatingCallback=function(n){var u=n.detail,e=u.first().closest("div.ui-page"),r=f.closest("div.ui-page");e.is(r)&&i.mobile.activePage.is(r)&&pi(t)},dt(sr,t._layoutUpdatingCallback)),tt(si,t),a.prototype._attachViewCore.call(t,n))},_customVisualStateHandler:function(n){n.state===nt.loading&&(n.custom=!0)},_onBeforeTap:function(n){o(s.listItemClicked);var f=this._ulElement,u=f[0],t=n.target,r=t.parentNode;if(t!==u){while(r!==u)t=r,r=t.parentNode;i(t).hasClass("msls-li")&&bi(this,i(t))}},_onDispose:function(){var t=this,r=t._headerLabel,u=t._searchBox,f=t._globalStyle,e=t._layoutUpdatingCallback;r&&(k(r),t._headerLabel=null),u&&(k(u),t._searchBox=null),f&&(f.remove(),t._globalStyle=null),e&&(li(sr,e),t._layoutUpdatingCallback=null),k(t._scrollHelper),t.itemTap=null,t._ulElement=null,t._collection=null,t._scrollHelper=null,i(n).off("resize",t._onWindowResize),t._onWindowResize=null,ii(t)}},{_fillTemplate:function(n,t){var u="",f=t.children[0];u=t._isVStretch?' class="msls-vstretch msls-vscroll':' class="msls-vauto',ct(f)||(u+=" "+ya),u+='"',i(du(ei,u)).appendTo(n),n.addClass(va)}}),r.ui.controls.ListView.prototype._propertyMappings={properties:{itemTap:"itemTap"}}}(),function(){function y(n){var t=n.data;return!t||!t.isEnabled||t.isReadOnly}function yt(n,t,r){var f=i('<div class="id-container"/>').appendTo(n),s=i('<ul class="id-auto-complete-element" data-role="listview" data-inset="true" data-filter="true" data-filter-theme="a" data-filter-placeholder="'+u("modalPicker_placeholder")+'" />').appendTo(f),h=i('<a class="id-modal-button msls-has-search msls-large-icon" tabIndex="0" data-role="button" data-icon="msls-add" data-mini="true" data-iconpos="notext" />').appendTo(f),e=i("<div/>").appendTo(f),c=i('<div class="id-auto-complete-dropdown"/>').appendTo(n),o=t.children[0];r.autoCompleteElement=v(n,s),r.autoCompleteDropDown=v(n,c),r.modalButton=v(n,h),r.itemViewElement=v(n,e),!o||hr(e,o,r.itemViewData={})}function o(n,i){var r=null,e,f,u,s,o;if(n&&(e=n.details.getModel(),f=it(e,":@SummaryProperty"),!!f&&(u=f.property,!!u&&!!u.name&&(r=n[u.name],!!c&&u.propertyType.id===":Person")))){o=ht._resolveId(r),i.search=r,t(i),o.then(function(n){if(!!n){if(fe(i)||i.search!==""&&i.search!==r)return;i.search=n.DisplayText?n.DisplayText:r,t(i)}});return}i.search=r,t(i)}function t(n){n._updatingValue=!0,!n._autoCompleteSearchBox||(n.search=n._autoCompleteSearchBox.val()),n._updatingValue=!1}function pt(n){var u=this,e=u._modalButton=p(u.getView(),n.modalButton,".id-modal-button"),w=u._autoCompleteElement=p(u.getView(),n.autoCompleteElement,".id-auto-complete-element"),b=u._autoCompleteDropDown=p(u.getView(),n.autoCompleteDropDown,".id-auto-complete-dropdown"),l=u.data.children[0],s,h=p(u.getView(),n.itemViewElement),f,v=!1,c;a.prototype._attachViewCore.call(u,n),u._rootElement=u.getView().closest(".msls-presenter");e.on("vclick",function(n){e.focus(),gt(u),n.preventDefault()});if(tf(e),y(u)||!u.data||!u.data.valueModel||!u.data.valueModel||(c=u.data.valueModel,c&&(v=!it(c.propertyType,":@NotSearchable"))),v){h.remove();u.getView().one("listviewinit",function(){var n=u.getView().find(".ui-input-search");n.addClass("ui-mini"),u._autoCompleteSearchBox=n.find(".ui-input-text");u._autoCompleteSearchBox.on({vmousedown:function(){i(document.activeElement).closest(u._autoCompleteElement).length&&(f=!0)},keydown:function(n){var e=i.mobile.keyCode,o,r,s;switch(n.keyCode){case e.TAB:o=u._autoCompleteDropDown.find(".msls-listview"),r=o.children("li"),r.length!==1||r.is(".msls-sppsp-loading")||r.first().trigger("vclick");break;case e.DOWN:o=u._autoCompleteDropDown.find(".msls-listview"),r=o.children("li"),!r.length||r.is(".msls-sppsp-loading")||(f=!0,s=r.first(),s.attr("tabIndex","0"),s.addClass("ui-btn-active"),s.focus(),n.preventDefault());break;case e.ESCAPE:u._popupContentItemInfo&&(u._emptyList(),n.stopPropagation());break;case e.ENTER:t(u)}},change:function(){f||t(u)}});u._refreshView()});u._autoCompleteElement.on({listviewbeforefilter:function(n,t){var c=i(this),h=i(t.input),s=h.val(),e;if(s===""&&(s=null),u.search!==s){if(u.search=s,u._emptyList(),!u.search){u.item=null;return}u.search.length<3||(u._delayPopup||(u._delayPopup=new r.DelayedRequest,u._delayPopup.timeOut=500),u._delayPopup.addRequest(function(){if(u.search&&!(u.search.length<3)){e=ut(u,!0),e.load().then(function(){e.data.length===0&&u._emptyList()}),ft(u),u._popupContentItemInfo=et(u,e),st(u,e,u._popupContentItemInfo,u._autoCompleteDropDown,!1,!1),nr(u._autoCompleteDropDown);u._autoCompleteDropDown.on({vmousedown:function(n){var t=i(document.activeElement),r=u._autoCompleteDropDown.find(".msls-listview"),e=u._autoCompleteDropDown.find(".msls-ctl-list");!t.closest(u._autoCompleteSearchBox).length&&(!t.closest("li").closest(u._autoCompleteDropDown).length||n.target!==r[0])||(f=!0),n.target===e[0]&&setTimeout(function(){i(document).one("vmousedown",function(n){i(n.target).closest(u.getView()).length||u._emptyList()})},0)}});var n=u._autoCompleteDropDown.find(".msls-listview");n.on({keydown:function(n){var r=i.mobile.keyCode,t;switch(n.keyCode){case r.UP:t=i(document.activeElement),t.attr("tabIndex","-1"),t.removeClass("ui-btn-active"),t=t.prev("li"),f=!0,t.length?(t.addClass("ui-btn-active"),t.attr("tabIndex","0"),t.focus()):u._autoCompleteSearchBox.focus(),n.preventDefault();break;case r.DOWN:t=i(document.activeElement),t.next("li").length&&(t.attr("tabIndex","-1"),t.removeClass("ui-btn-active"),t=t.next("li"),f=!0,t.addClass("ui-btn-active"),t.attr("tabIndex","0"),t.focus()),n.preventDefault();break;case r.ESCAPE:f=!0,u._emptyList(),u._autoCompleteSearchBox.focus(),n.stopPropagation(),n.preventDefault();break;case r.TAB:case r.ENTER:i(n.target).trigger("vclick")}},vclick:function(n){var t,r=u._autoCompleteDropDown.find(".msls-listview");n.target!==r[0]&&(t=i(n.target).closest("li"),u.item=t.data("__entity"),u._emptyList(),o(u.item,u),n.preventDefault(),u._autoCompleteSearchBox.focus())}})}}))}}});u.getView().focusout(function(n){var t;f?f=!1:(t=u._autoCompleteDropDown.find(".msls-ctl-list"),n.target!==t[0]&&(u._emptyList(),o(u.item,u)))})}else w.remove(),u._autoCompleteElement=null,e.attr("data-iconpos","right"),e.attr("data-icon","arrow-d"),e.removeClass("msls-has-search"),e.removeClass("msls-large-icon"),h.remove(),h.appendTo(e),!l||(s=new r.ui.controls.ContentItemPresenter(h),s.parent=u,s.data=l,s.attachView(n.itemViewData))}function w(n){n&&(n.item.parent=null,k(n.presenter),k(n.item),k(n.itemDetails))}function wt(){var n=this,t;n._isViewCreated&&n._autoCompleteSearchBox&&!n._updatingValue&&(t=n._autoCompleteSearchBox.val(),t!==n.search&&n._autoCompleteSearchBox.val(n.search))}function bt(){this._autoCompleteDropDown.html(""),this._popupContentItemInfo&&(tt(rt,{modalPicker:this}),w(this._popupContentItemInfo),this._popupContentItemInfo=null)}function kt(n){n.state===nt.loading&&(n.custom=!0)}function dt(){var n=this,t=n._visualCollection;!t||n.data.choicesSource||k(t)}function ut(n,t){var o=n.data,i=n._visualCollection,v=n.detailsProperty,h,c,l,a,u,f,e;return i||(i=o.choicesSource,i||(c=v.getModel(),l=c.propertyType,a=o.screen.details,d(a.dataWorkspace.details.properties.all()).each(function(n){return d(n.value.details.properties.all()).each(function(n){return n.getModel().entityType===l&&(u=n.value),!u}),!u}),h=new s(u),i=new r.VisualCollection(o.screen.details,h),i.search=n.search),n._visualCollection=i),f=null,e=null,t&&(f=n.search,e=15),i.search!==f&&(i.search=f),i._loader._itemLimit!==e&&(i._loader._itemLimit=e),i}function ft(t){var i,r=t.data,f=r.model,u=r.children[0];n||(i=us(function(n){return n.id===":List"}),n={kind:"Collection",view:i[0]}),n.name=f.name+"AutoGeneratedListView",n.displayName=u.displayName,n.childContentItems=[u.model]}function et(t,i){var u=t.data,r={};return t._emptyList(),r.item=vt.createContentItemTree(u.screen,n,u),u.children.pop(),r.item.__value=i,r.item.__details=r.itemDetails=new g(i),r.item._dictionary.setValue(lt,!1),r}function st(n,t,f,e,o,s){var y=n.data,p=n.detailsProperty,c,v,a,h;e.addClass("msls-modalpicker"),hh.options.enableModalScrollRegions&&e.addClass(wf),c=i('<div class="msls-vauto"/>').appendTo(e),a=i("<div>").appendTo(e),o&&(l||(l=u("modalPicker_clear")),v=i('<a href="#"/>').on("touchend",function(){}).on("vclick",function(t){t.preventDefault(),p.value=null,n.search=null,cr.close()}).appendTo(i('<div class="msls-modal-picker-clear-container msls-leaf"/>').appendTo(c)).text(l)),s&&c.append(i('<div class="msls-control-header msls-leaf"/>').append(i('<div class="msls-text"/>').append(i('<span class="id-element"/>').text(y.displayName)))),f.presenter=new ct(a),f.presenter.data=f.item,f.presenter.render(),a.removeClass("msls-compact-padding"),h=f.presenter.children[0],h.itemTap=new r.BoundCommand("_onItemTap",n,au(t,[{binding:"selectedItem"}])),fi(h,h.itemTap),tt(at,{modalPicker:n,listView:h,clearLink:v})}function gt(n){if(!y(n)){var i=n.detailsProperty,t,r,u=!0,f=!!i.value&&(!i.entity||cl(i)==="ZeroOrOne");t=ut(n,!1),t.load(),ft(n),r=et(n,t),n._displayingModalWindow=!0,cr.show({buildContentCallback:function(i){st(n,t,r,i,f,u)},disposeContentCallback:function(){w(r)}}).then(function(){n._displayingModalWindow=!1,tt(rt,{modalPicker:n})})}}function ni(n){y(this)||(this.detailsProperty.value=n,this._displayingModalWindow?cr.close():this._emptyList())}var ht=r.ui.controls.PersonViewer,s,g,ct=r.ui.controls.ContentItemPresenter,lt=ot("ShowHeader","RootCollectionControl"),at="modalPickerPopupOpened",rt="modalPickerPopupClosed",vt=r.services.contentItemService,n,l;e(r,"ModalPickerQueryObjectLoader",function(n){vf.call(this),f(this,"_baseQuery",n)},vf,{_getAddedEntities:function(){return this._baseQuery._addedEntities}}),s=r.ModalPickerQueryObjectLoader,we(s),e(r,"ModalPickerListViewContentItemDetails",function(n){var t=this;f(t,"_visualCollection",n),wi(n,"loadError",t,function(){t.dispatchChange("loadError")})},null,{loadError:h(null,function(){return this._visualCollection.loadError}),_onDispose:function(){f(this,"_visualCollection",null)}}),g=r.ModalPickerListViewContentItemDetails,e("ui.controls","ModalPicker",function(n){var t=this;a.call(t,n),t._updatingValue=!1},a,{controlName:"ModalPicker",item:b(function(n){var t;!n||!n.details||(t=n.details.entity,o(t,this))},null,!0),search:b(function(){this._refreshView()},null,!0),_attachViewCore:pt,_customVisualStateHandler:kt,_onItemTap:ni,_onDispose:dt,_refreshView:wt,_emptyList:bt,_updateSearchValue:o,_disposeContentItemInfo:w},{_fillTemplate:yt}),r.ui.controls.ModalPicker.prototype._propertyMappings={value:"item",details:"detailsProperty"},r.ui.controls.ModalPicker.prototype._editableProperties={item:"value"}}(),function(){function n(n){r.ui.controls.TextBox.call(this,n)}function t(n,t,r){var f='<input type="search" placeholder="'+u("searchTextBox_placeholder")+'" class="id-element" data-mini="true" />',e=i(f).appendTo(n);r.idElement=v(n,e)}function f(n){function r(){var r=i("input.id-element",t.getView()).val(),n=r.replace(/^\s+|\s+$/g,"");r!==n&&i("input.id-element",t.getView()).val(n),n!==t.text&&(t._updatingText=!0,t.text=n,t._updatingText=!1)}var t=this;a.prototype._attachViewCore.call(t,n);t.getView().on("keydown","input.id-element",null,function(n){n.keyCode===i.mobile.keyCode.ENTER&&r()}).on("change","input.id-element",null,r).on("blur","input.id-element",null,r);t._refreshView()}function o(){if(this._isViewCreated){var n=i("input.id-element",this.getView());this._updatingText&&n.val()===this.text||n.val(this.text)}}e("ui.controls","SearchTextBoxControl",n,r.ui.controls.TextBox,{controlName:"SearchTextBoxControl",_attachViewCore:f,_refreshView:o},{_fillTemplate:t,_isFormElement:!0}),r.ui.controls.SearchTextBoxControl.prototype._propertyMappings={stringValue:"text",properties:{placeholderText:"placeholderText"}}}(),function(){function bi(){n.location.replace(n.location.href.replace(/#.*/,""));return}function su(){var r=this;t=i("body"),t.attr("data-theme")||t.attr("data-theme",wt),i.each(wi,function(n,t){i.mobile.transitionHandlers[t]=ee});i(n).on("pagebeforechange",function(n,t){wu(r,n,t)}).on("pagechange",function(n,t){ku(r,n,t)}).on("beforeunload",function(){if(vi&&et.anyNavigationUnitHasChanges())return u("shell_unsaved_message")});i("body").blur(function(n){n.preventDefault(),n.stopPropagation()});i(n).on("updatelayout",function(){if(i.mobile.popup.active){var r=i.mobile.activePage.find(".ui-popup-container.ui-popup-active > .ui-popup"),f,u;r.length&&(f=r[0],u=f._mslsCustomPosition,u?r.popup("reposition",u):r.popup("reposition",{x:n.innerWidth/2,y:n.innerHeight/2}))}});dt(sr,function(){if(et.activeNavigationUnit){var n=et.activeNavigationUnit;n.popup&&iu(r,nt(r,n))}}),dt(ks,function(){ei(r)}),dt(de,function(){oi(r)}),dt(sa,function(n){n.detail.name==="saveChanges"&&(yt.addClass(hi),ei(r,50))}),dt(ha,function(n){n.detail.name==="saveChanges"&&(oi(r),yt.removeClass(hi))}),dt("modalViewShown",function(){pt++}),dt("modalViewClosed",function(){pt--,it(r)}),dt(sr,function(){rr(r,i(".ui-page.ui-page-active"))}),hu()}function hu(){st=i("<div id='"+gv+"' class='"+vt(la,fo,bt)+"'><\/div>").appendTo(t),h=i("<div id='"+ny+"' class='"+vt(la,fo,bt)+"'><div class='msls-progress'><div class='"+aa+"'><\/div><\/div><\/div>").appendTo(t),yt=i("."+aa,h)}function cu(n){var t=this;return new l.Promise(function(i,r){ru().then(function(){lu(t,n,i,r)})})}function lu(t,r,u,f){function l(n){var u,f;return o(s.createPageStart),r.popup&&(u=t._pageIdMapping[i.mobile.activePage[0].id],n.backgroundPageId=u.backgroundPageId?u.backgroundPageId:i.mobile.activePage[0].id),f=of(t,n),o(s.createPageEnd),gt(n),f}var e,h,a,c,v,y;if(t._initializeMobileOnce&&t.initialize(),r.requestedPageId&&(e=r.requestedPageId),r===et.activeNavigationUnit){kf(t,r,u);return}if(h=nt(t,r),h){i("#"+h,i.mobile.pageContainer).length===0&&ii(t,h,r,ki(r.screen.details)),gu(t,i.mobile.activePage[0].id,h,!1,function(){var n=t._pageIdMapping[h];gt(n),u(),o(s.navigationBackEnd)});return}a="",e||(e=kr(t,a)),r.screen.details._pageId||(r.screen.details._pageId=e),t._firstPageId?i.mobile.activePage.data(ai,{activeElement:document.activeElement,scrollTop:i(n).scrollTop()}):t._firstPageId=e,c={pageId:e,unit:r},t._pageIdMapping[e]=c,t._pageIdToIndexMapping[e]=r.index,t._initializeMobileOnce?(t._initializeMobileOnce=!1,v=l(c),v.css("opacity",0),b(t,e).then(function(){ce(t,i.mobile.activePage,function(){u()})},function(n){f(n)}),i.mobile.initializePage()):(y=r.popupDepth>1?lo:r.popup?yu:eh,du(t,function(){return l(c)},c,y,function(){nf(t,ou),u()},f))}function ki(n){var t=n.getModel();return n._dataUrl===""||yi.disableUrlScreenParameters?"/"+encodeURIComponent(t.name)+"/["+n._pageId+"]":"/"+encodeURIComponent(t.name)+"/"+n._dataUrl+"/["+n._pageId+"]"}function au(n){var t=this,i=nt(t,n);return new l.Promise(function(n){b(t,i).then(function(){n(),o(s.navigationBackEnd)})})}function pu(n){tt(ea,{navigationUnit:n})}function di(n){n._isShellIntroducedNavigation=!0}function gi(n){return new l.Promise(function(t){n._completeOnHashChange=t})}function ir(n,t){var i=n._pageIdMapping[t];return i?i.unit:null}function wu(n,t,u){var s;if(!i.mobile.activePage){u.options.fromHashChange&&typeof u.toPage=="string"&&(u.toPage="");return}if(cr.isOpen()&&cr.close(),typeof u.toPage=="string"){var f=u.toPage[0]==="/"?go(u.toPage):re(u.toPage),e=f.pageId||n._firstPageId,o=ir(n,e);i("#"+e,i.mobile.pageContainer).length===0&&(o?(s=u.toPage[0]==="/"?u.toPage:i.mobile.path.parseUrl(u.toPage).hash.substr(1),ii(n,e,o,s)):f.screenName&&(t.preventDefault(),r.shell.showScreenWithParameterQueryStrings(f.screenName,f.screenParameters,f.pageId).done(),tt("BrowserNavigationPromise",b(n,f.pageId))))}}function rr(n,t){var u,f,r;t.length&&(u=ir(n,t[0].id),u.popup||(f=i("div[data-role='footer']",t),r=f.outerHeight().toString()+"px",t[0].style.paddingBottom!==r&&(t[0].style.paddingBottom=r)))}function ku(t,r,u){var f=i.mobile.activePage,e,o=u.options.fromPage,s;!!o&&o.is("."+ly)&&o.remove(),!!f&&f.hasClass(rv)&&df(f),e=f.data(ai),e&&(i(e.activeElement).focus(),ah(i(n),e.scrollTop),f.height()||bu(fa,function(){rr(t,f)})),t._completeOnHashChange&&(s=t._completeOnHashChange,t._completeOnHashChange=null,ni(function(){s()})),wi.indexOf(u.options.transition)<0&&tt("BrowserNavigationPromise",new l.Promise(function(n){n()})),document.activeElement===f.find(".msls-title")[0]&&f.focus()}function ur(n,t){if(n._isShellIntroducedNavigation)return n._isShellIntroducedNavigation=!1,null;if(y){bu(de,function(){y||ke(u("shell_conflicting_operations")).then(function(){bi()})});return}var r=t[0].id,i=n._pageIdMapping[r],f,e=null;return i&&(gt(i),f=i.unit,et.navigationInProgress||(e=et.synchronizeAfterBrowserNavigation(f))),tt("BrowserNavigationPromise",b(n,r)),e}function du(n,r,u,f,e,h){yr(),it(n);var c=i.mobile.activePage;l.Promise.join([]).then(function(){return(o(s.transitionPrepare),c.addClass(oh),t.addClass(f+" "+ao),f===yu)?(lt(st,!0,vu,bt),ut(1)):ut(167)}).then(function(){return f===yu?ut(1):null}).then(function(){var a=r(),u=[];c.removeClass(pf),t.removeClass(ao),u.push(b(n,a[0].id)),u.push(gi(n)),l.Promise.join(u).then(function(){e()},function(n){h(n)}),tr(),o(s.changePageStart),di(n),i.mobile.changePage(a,{transition:f,reverse:!1}),o(s.changePageEnd)}).then(null,function(n){h(n)})}function b(t,r){return new l.Promise(function(t,f){i(n).one("pageshow",function(){var n=i.mobile.activePage;!n||n.length!==1||n[0].id!==r?f(u("shell_nav_failed")):(t(),o(s.navigationEnd))})})}function nt(n,t){var r;return i.each(n._pageIdMapping,function(n,i){i.unit===t&&(r=n)}),r}function gu(t,i,r,f,e){var c=t._pageIdToIndexMapping[i],a=t._pageIdToIndexMapping[r],h;if(typeof c=="undefined"||typeof a=="undefined"){bi();return}a!==c?(h=[],h.push(gi(t)),f?t._stopHashChangePropagationOnce=!0:h.push(b(t,r)),l.Promise.join(h).then(function(){var i=re(n.location).pageId||t._firstPageId;i===r?ni(function(){e()}):e(u("shell_nav_failed"))},function(n){e(n)}),o(s.goUrlStart),di(t),n.history.go(a-c),o(s.goUrlEnd)):e()}function nf(n,t){var r=-1,f,u,e;t=t||1,et.activeNavigationUnit.popupDepth||!i.mobile.activePage||(f=n._pageIdToIndexMapping[i.mobile.activePage[0].id],r=f-t),r>0&&(u=et.navigationStack[r],e=nt(n,u),i("#"+e,i.mobile.pageContainer).remove(),u.cleanPageUiControls())}function uf(n){var t=nt(this,n),o=this._pageIdMapping[t],u,r,f,e;t&&(delete this._pageIdMapping[t],u=i("#"+t,i.mobile.pageContainer),u.remove()),r=o.unit.task,f=is(this._pageIdMapping).filter(function(n){return n.unit.task===r}),k(n),f.length||(e=r.screen,k(r),k(e.details))}function gt(n){i(".ui-page").removeClass(iv);var t=n.backgroundPageId;t&&i("#"+t).addClass(iv),n.unit.popup||lt(st,!1,vu,bt)}function ff(n){return n.which===i.mobile.keyCode.ESCAPE?n.target.nodeName.toLowerCase()!=="select":!1}function ef(n){var t=n.which;return t===83&&n.ctrlKey&&!(n.altKey||n.shiftKey||n.metaKey)}function fr(n,t){var r=t._buttonsNeeded,u;r&&(u=r.showSaveDiscard||r.showOkCancel,u||r.showOk)&&n.keydown(function(n){if(!et._currentNavigationOperation&&!i.mobile.popup.active)return u&&ff(n)?(i(".msls-discard-button,.msls-cancel-button",i.mobile.activePage).trigger("vclick"),!1):ef(n)?(i(".msls-save-button,.msls-ok-button",i.mobile.activePage).trigger("vclick"),!1):void 0})}function of(n,t){var r=t.pageId,i=t.unit,e=t.unit.contentItemTree.kind===ht.tab,u=ki(i.screen.details);return i.popup?bf(n,r,i,u):ii(n,r,i,u)}function er(){var n=i("<div data-role='page'><\/div>");return n.attr("data-theme",t.jqmData("theme")||wt),n}function or(n,t){n.attr("id",t)}function lr(n,t){n.attr("data-url",t)}function ar(n,t,u){var f=new r.ui.controls.ContentControl(t),o=".msls-large-icon:not('.msls-collapsed')",e,s;u=hf(u),f.dataTemplate=u,f.data=n,f.render(),n.registerPageUiControl(f),e=i(".msls-buttons-row",t),s=i(o,e),s.length>0&&rf(e,o)}function sf(t,r){var f=i("<div class='msls-header' data-role='header' data-update-page-padding='false' data-tap-toggle='false' ><\/div>"),e=ri[ay],u=tu(r),a,v,y,o,s,h,l;a=u.showSaveDiscard?"screenSaveDiscardTemplate":u.showOk?"screenOkTemplate":u.showOkCancel?"screenOkCancelTemplate":null,v=u.showBackClose?"screenHomeTemplate":null,y=u.showLogOut?"screenLogoutTemplate":null,s=u.showNavigationMenu?"screenNavigationMenuTemplate":null,o=c?gh(n.location.href,"entity").replace(/#.*/,""):"./",e=e.replace("BUTTONS-PLACEHOLDER",ri[a]||"").replace("LOGO-BACK-PLACEHOLDER",ri[v]||"").replace("LOGOUT-PLACEHOLDER",ri[y]||"").replace("HOMESCREEN-PLACEHOLDER",o),ar(r,f,e),s&&i(".msls-title",f).append(ri[s]);i("."+uv+" img",f).on("error",function(){i("."+uv).addClass(bt)});if(u.showNavigationMenu){h=function(n){n.preventDefault(),et.openNavigationMenu()},l=i(".msls-title > .msls-text",f).addClass("msls-btn-title").on("vclick",h).attr("tabindex","0"),tf(l),cv(l);i(".msls-navmenu-button",f).on("vclick",h)}return f}function ii(n,r,u,f){var e=er();or(e,r),lr(e,f),e.attr("data-title",u.screen.details.displayName);var s=sf(n,u).appendTo(e),h=i(ri[tv]).appendTo(e),o=i(ri[py]).appendTo(e),c=s.add(o);o.on("updatelayout",function(){var t=e[0].style,i=o.outerHeight().toString()+"px";t.paddingBottom!==i&&(t.paddingBottom=i)});return e.appendTo(t),vr(n,e,h,u),fi(e,u),fr(e,u),e}function fi(n,t){var r=t.popup||t.contentItemTree._isVStretch,u=i(".msls-content",n);t.popup||lt(n,r,ro,uo),lt(u,r,ro+" "+wf,uo),r||(n[0].style.height="",u[0].style.height="")}function hf(n){return n.replace("TAB-BUTTONS-PLACEHOLDER",ri[vy])}function vr(n,t,i,r){wr(n,t,r,!1).addClass(oo),br(n,t,r,!1).addClass(so),r.popup||!c||fe(t,r)}function pr(n,t,i,u){o(s.createPageControlsStart);var f=new r.ui.controls.ContentItemPresenter(i);return f.data=t,f.attachView(u),o(s.createPageControlsEnd),f}function wr(n,t,r,u){var c=r.pageName,l=i("."+ka,t),a=r.contentItemTree,v=a.model,o=r.contentItemTree,e,f,s,h;return e=si(v,"__tabCache",function(n){var t=i("<div class=''><\/div>").addClass(da).attr(ot,c);return hr(t,o,n),t}),f=e.$element,s=e.templateData,f.appendTo(l),h=pr(n,o,f,s),r.registerPageUiControl(h),u&&f.trigger("create"),f}function br(n,t,u,f){function y(n){var t=i(n.target);lh(e,l,t)}for(var a=u.pageName,v=i("."+ga,t),w=u.contentItemTree,b,k,c=u.contentItemTree.commandItems||[],l=".msls-ctl-command-bar-button:not('.msls-collapsed')",e=i(ri[by]).appendTo(v).attr(ot,a),o=0;o<c.length;o++){var p=c[o],s=i('<div tabindex="-1"><\/div>'),h=new r.ui.controls.ContentItemPresenter(s);h.data=p,h.render(),e.append(s),u.registerPageUiControl(h);s.on("updatelayout",y)}return f&&e.trigger("create"),rf(e,l),e}function cf(n){var r=er().addClass(rv),f=i("<div class='msls-dialog-frame'><\/div>").appendTo(r),e=t.jqmData("theme")||wt,u=i("<div class='msls-dialog-inner-frame ui-body-"+e+" msls-rows-layout msls-fixed-height'><\/div>").appendTo(f),o=i("<div class='msls-header msls-vauto msls-hauto' data-role='header'><\/div>").appendTo(u),s=i(ri[tv]).appendTo(u),h;return h=i(ri[wy]).appendTo(u),n.headerElement=v(r,o),n.pageContentContainerElement=v(r,s),r}function lf(n,r){var e=t.jqmData("theme")||wt,u=i(ri[fu]).attr("data-theme",e),f=i(".msls-popup-content",u);return hr(f,n,r),r.contentContainerElement=v(u,f),u}function af(n){return cf(n)}function vf(n,t,i){var e=p(n,i.headerElement),r=tu(t),u,f;f=r.showSaveDiscard?"dialogSaveDiscardTemplate":r.showOk?"dialogOkTemplate":r.showOkCancel?"dialogOkCancelTemplate":r.showBackClose?"dialogCloseTemplate":null,u=ri[yy].replace("BUTTONS-PLACEHOLDER",ri[f]||""),ar(t,e,u)}function yf(n,t,r,u){var l=u.model,e,f,o,s,h,c;return e=si(l,"__popupCache",function(n){return lf(u,n)}),f=e.$element,o=e.templateData,s=i(sy,r),f.appendTo(s).attr("id",t).attr(li,u.name),h=p(f,o.contentContainerElement),c=pr(n,u,h,o),et.activeNavigationUnit.registerPageUiControl(c),f}function bf(n,i,r,u){var e,f,o,s;return e=si(n,"_blankScreenDialogFrameCache",function(n){return af(n)}),f=e.$element,o=e.templateData,vf(f,r,o),or(f,i),lr(f,u),f.appendTo(t),s=p(f,o.pageContentContainerElement),vr(n,f,s,r),fi(f,r),fr(f,r),f}function kr(n,t){for(var i,u=4294967296,r;!i||i in n._pageIdToIndexMapping;)r=Math.floor(Math.random()*6+10).toString(16),i=t+r+Math.floor(Math.random()*u).toString(16);return i}function kf(n,t,r){var s=t.pageName,l=n._pageIdMapping[nt(n,t)],u=i("#"+l.pageId),h=d(i("."+da,u).toArray()).where(function(n){return i(n).attr(ot)===s}).first(),c=d(i("."+cy,u).toArray()).where(function(n){return i(n).attr(ot)===s}).first(),f=!1,e,o;if(h)e=i(h);else{yr();try{e=wr(n,u,t,!0),f=!0}finally{tr(!1)}}if(c)o=i(c);else{yr();try{o=br(n,u,t,!0),f=!0}finally{tr(!1)}}var a=i("."+oo,u),v=e,y=i("."+so,u),p=o,w=i("."+ga+", ."+hy,u);fi(u,t),se(n,a,v,y,p,w,f,r)}function gf(){function t(){n.location.href=ie+"/LogOut.aspx"}et.anyNavigationUnitHasChanges()?ti.show({message:u("shell_unsaved_message"),title:u("shell_save_title"),buttons:[{text:u("shell_logout_btn"),icon:"check",result:g.yes},{text:u("shell_stay_btn"),icon:"back",result:g.no}],defaultResult:g.no}).then(function(n){n===g.yes&&(vi=!1,t())}):t()}function ei(n,t){y++,dr(n,t)}function oi(n){y--,y<=0&&(rt=!1,a=null,gr(n))}function it(n){a=0,dr(n)}function dr(n,t){if(y>0){var i=t?t:eu,r=Date.now()+i;(!a||r<a)&&(a=r,ui(function(){te(n)},i+1))}}function te(n){!!a&&Date.now()>=a&&!pt&&y>0&&(rt=!0,gr(n))}function gr(){rt?(h.hasClass(bt)&&(o(s.progressShow),h.removeClass(vt(bt,vu))),ui(function(){rt&&h.addClass(vu)},1)):h.hasClass(bt)||(o(s.progressHide),h.removeClass(vu),ui(function(){rt||h.addClass(bt).removeClass(vu)},200))}function ue(n){var t=this;ei(t,50),n._thenEx(function(){oi(t)})}function tu(n){var i=n.task,t={};return n.isBrowseMode()?t.showOk=n.boundaryOption===ft.nested:(t.showOkCancel=n.boundaryOption===ft.nested,t.showSaveDiscard=!t.showOkCancel),n.boundaryOption===ft.none&&(t.showOk=t.showOkCancel=t.showSaveDiscard=!1),t.showBackClose=!t.showSaveDiscard&&!t.showOk&&!t.showOkCancel,t.showLogOut=et.getHomeScreen()===n.screen.details.getModel(),t.showNavigationMenu=et.hasNavigationMenu()&&n.isBrowseMode(),n._buttonsNeeded=t,t}function fe(f,e){var l,h,a;pi||!c.chromeBackgroundColor||!c.chromeLinkFontColor||(pi=!0,l="<style> .msls-sharepoint-chrome { background-color: #"+c.chromeBackgroundColor+"; }\r\n .msls-sharepoint-chrome a.msls-sharepoint-chrome-link, .msls-sharepoint-chrome a.msls-sharepoint-chrome-link:visited, .msls-sharepoint-chrome a.msls-sharepoint-chrome-link:hover, .msls-sharepoint-chrome a.msls-sharepoint-chrome-link:active  { color: #"+c.chromeLinkFontColor+"; } <\/style>",t.prepend(l));var o=i("<div class='"+vt(rp,uo)+"'><\/div>"),s=n.createSharePointChrome,v="15a572c6-e545-4d32-897a-bab6f5846e18";!!s&&ci(s)?s(o,c.hostUrl):(i("<div class='msls-sharepoint-chrome-left-links'><span><a href='"+c.hostUrl+"' class='"+sh+"' target='_top'>"+u("shell_back_to_sharePoint_home_site")+"<\/a><span><\/div>").appendTo(o),c.ready(function(){var n=c.context,t=n.get_web().get_features();c.load(t).then(function(){for(var f=!1,e=t.getEnumerator(),s,h,l,a,r,y;e.moveNext();)if(h=e.get_current(),s=h.get_definitionId(),s.toString().toLowerCase()===v.toLowerCase()){f=!0;break}f&&(a=new kt.Social.SocialFeedManager(n),r=new kt.Social.SocialFeedOptions,r.maxThreadCount=0,y=a.getFeed(kt.Social.SocialFeedType.personal,r),c.load().then(function(){var t=y.get_attributes();(t&4)!=4&&(l=i("<div class='msls-sharepoint-chrome-right-links'><span><a href='"+c.appWebUrl+"/Newsfeed.aspx' target='_blank' class='msls-sharepoint-chrome-newsfeed ui-link "+sh+"'>"+u("newsfeed_link")+"<\/a><\/span><span><a href='' target='_top' class='msls-sharepoint-chrome-follow ui-link "+sh+"'><span class='msls-sharepoint-chrome-star-button'><img src=\""+c.appWebUrl+'/_layouts/15/images/spcommon.png?rev=26" alt="Follow"><\/span><span>'+u("follow_link")+"<\/span><\/a><\/span><\/div>").appendTo(o),l.find(".msls-sharepoint-chrome-follow").click(function(){var i=new kt.Social.SocialFollowingManager(n),t=new kt.Social.SocialActorInfo,r;t.set_contentUri(c.appWebUrl),t.set_actorType(kt.Social.SocialActorType.site),r=i.follow(t),c.load(i).then(function(){var n;switch(r.m_value){case 0:n=u("successfully_following_message");break;case 1:n=u("already_following_message");break;case 2:n=u("follow_request_failed")}n&&ti.show({message:n,buttons:nu.ok})},function(){})}))}))},function(){})},function(){})),h=new r.ui.controls.ContentControl(o),a=i("div[data-role='header']",f),h.render(),o.prependTo(a),e.registerPageUiControl(h),t.addClass(up)}function iu(t,r){function s(n,t){var i=parseFloat(n[t]);return i>0?i:0}var nt=document.getElementById(r),h=nt.getElementsByClassName("msls-dialog-frame")[0],a,v,d,y,p,g,o,w;if(h){var f=n.getComputedStyle(h),b=h.style,c=i(n).height(),l=i(n).width(),k,u={},e,tt=s(f,"paddingTop")===0;tt?(u.height="100%",u.marginTop=0):(a=s(f,"maxHeight"),v=a>0?Math.min(a,c):c,u.height=v,k=v,d=Math.max(0,c-k)/2,u.marginTop=d),y=s(f,"maxWidth"),p=y>0?Math.min(y,l):l,u.width=p,f.marginLeft!=="auto"&&(g=Math.max(0,l-p)/2,u.marginLeft=g);for(e in u)o=u[e],w=typeof o=="string"?o:o.toString()+"px",w!==b[e]&&(b[e]=w)}}function ee(n,t,u,f){function s(){e.resolve()}var o=r.shellView,e=new i.Deferred;switch(n){case eh:oe(o,n,t,u,f,s);break;case yu:case lo:he(o,n,t,u,f,s);break;default:e.reject("Unexpected transition name: "+n)}return e.promise()}function oe(t,i,r,u,f,e){var o=!r;yr(),at(t,{transitionName:i,stage1Delay:o?0:167,stage3Delay:167,reverse:r,$ins:u,$outs:f,onStage2:function(){return n.scrollTo(0,0),u.addClass(pf),o&&(tr(!1),w(u,u,!0,!0)),!0},onCleanup:function(){return f.removeClass(pf),r&&(tr(!1),w(u,null,!1,!1)),ur(t,u)},onComplete:e})}function se(n,t,r,u,f,e,o,s){var l=ip,h=t.parent(),a=o?0:u.outerHeight(),c=h.hasClass(wf);c&&h.removeClass(wf),at(n,{transitionName:l,reverse:!1,stage1Delay:167,stage3Delay:167,$ins:i().add(r).add(f),$outs:i().add(t).add(u),onStage2:function(){return o=o||t.hasClass(ro)!==r.hasClass(ro)||a!==f.outerHeight(),w(r,o?null:r,!0,o),e.each(function(){i(this).data("mobile-fixedtoolbar")&&i(this).fixedtoolbar("show")}),!0},onStage3:function(){r.addClass(oo),f.addClass(so)},onCleanup:function(){t.removeClass(oo),u.removeClass(so),c&&h.addClass(wf)},onComplete:s})}function he(n,t,i,r,u,f){var e,o=!i;t===yu?e=!0:t===lo&&(e=!1,t=yu),yr(),at(n,{transitionName:t,reverse:i,stage1Delay:0,stage3Delay:o?167:267,$ins:r,$outs:u,onStage1:function(){r.addClass(pf)},onStage2:function(){return o&&(iu(n,r[0].id),tr(!1),w(r,r,!0,!0)),!0},onStage3:function(){i&&e&&st.removeClass(vu)},onCleanup:function(){return u.removeClass(pf),i&&(tr(!1),w(r,null,!1,!1)),ur(n,r)},onComplete:f})}function ce(n,t,r){yr();var u=t;at(n,{transitionName:tp,stage1Delay:0,stage3Delay:167,reverse:!1,$ins:u,$outs:uu,onStage1:function(){u.css("opacity","")},onStage2:function(){tr(!1),w(u,u,!0,!0),i(nv).remove()},onCleanup:function(){},onComplete:r})}function ct(n){return l.Promise.join([n?n():null])}function ut(n){if(n===0)return null;var t=n;return o("StartDelay_"+t.toString()),new l.Promise(function(n){ui(function(){o("EndDelay_"+t.toString()),n()},t)})}function at(n,i){o(s.transitionStart),it(n);var f=i.transitionName,r=i.$ins,u=i.$outs,h=i.onStage1,c=i.onStage2,a=i.onStage3,v=i.onCleanup,e=i.onComplete,y=i.stage1Delay,p=i.stage3Delay;l.Promise.join([]).then(function(){return o(s.transition_Stage1Start),ct(h)}).then(function(){return u.addClass(oh),r.addClass(fv),lt(t,i.reverse,ev),t.addClass(f+" "+ao),ut(y)}).then(function(){return o(s.transition_Stage2Start),it(n),t.removeClass(ao).addClass(ov),u.addClass(fo),r.removeClass(fo),ct(c)}).then(function(){return o(s.transition_Stage3Start),it(n),ct(a)}).then(function(){return t.removeClass(ov).addClass(sv),ut(p)}).then(function(){return o(s.transition_CleanupStart),it(n),ct(v)}).then(function(){vo(t,f,sv,ev),vo(u,oh),vo(r,fv)}).then(function(){o(s.transitionEnd),e&&e()})}function w(n,t,i,r){!!n&&n.length>0&&!n[0].msls_attachedLabelUpdated&&(n[0].msls_attachedLabelUpdated=!0,ne(n)),i?lv(t,!r):nr(t,!r)}function le(t,r,f){var e=this;return i.mobile.popup.active?l.Promise.wrapError(u("shell_existingPopup")):new l.Promise(function(u){function y(n){return n.target.id!==v?!0:!1}var p=i.mobile.activePage,b=i(document.activeElement),k=i(".msls-popup",p),v,c,l,a;i.each(k,function(n,r){return i(r).attr(li)===t.name?(c=i(r),v=r.id,!1):!0}),c?c.removeClass(bt):(o(s.createPopupStart),v=kr(e,"popup-"),c=yf(e,v,p,t),o(s.createPopupEnhance),c.trigger("create"),o(s.createPopupEnd)),o(s.openPopupStart),yr();i(n).one("popupbeforeposition",function(n){y(n)||(tr(!1),w(c,null,!0,!0))});i(n).one("popupafteropen",function(n){y(n)||(u(),df(c.parent()),o(s.openPopupEnd))});c.one("popupafterclose",function(n){y(n)||(c.addClass(bt),e.commitActiveElement(),b.focus(),r(),o(s.closePopupEnd))});l={history:!1},c.popup(l),f&&f.originalEvent?(a=f.originalEvent,l.x=a.pageX,l.y=a.pageY,c[0]._mslsCustomPosition={x:a.pageX,y:a.pageY}):c[0]._mslsCustomPosition=null,c.popup("open",l)})}function ru(){var t=i.mobile.popup.active;return t?new l.Promise(function(r){i(n).one("popupafterclose",function(){ni(r)});t.close()}):l.Promise.as()}function ae(){var n=this._navigationMenu;n||(n=new r.ui.controls.DropdownMenuView(r.shell.getNavigationMenu()),this._navigationMenu=n),n.show(i.mobile.activePage.find(".msls-title"))}function ve(){var n=document.activeElement,t;n&&(t=i(n),(n.tagName!=="INPUT"||!t.closest(".msls-ctl-text-box").length&&!t.closest(".msls-ctl-person-picker").length)&&(n.tagName!=="TEXTAREA"||!t.closest(".msls-ctl-text-area").length)||i(n).trigger("change"))}function vt(){return Array.prototype.join.call(arguments," ")}function si(n,t,r){var h=document.createElement("div"),f,e,u=n[t];return u?(f=u.templateData,h.innerHTML=u.html,e=i(h.firstChild)):(f={},u={templateData:f},n[t]=u,o(s.createTemplateStart),e=r(f),o(s.createTemplateEnd),e.appendTo(i(h)),u.html=h.innerHTML),e.detach(),{$element:e,templateData:f}}var ye="msls-screen",pe="msls-dismiss-dialog",ot="msls-tab-name",t,uu=i([]),st,h,yt,hi="msls-progress-icon msls-progress-save-icon",li="data-msls-name",fu="popupTemplate",ai="msls-previous-uiState",eu=2e3,a=null,pt=0,rt=!1,vi=!0,y=0,pi=!1,ou=5,wi=[yu,lo,eh];i.mobile&&(i.mobile.autoInitializePage=!1,i.mobile.pushStateEnabled=!1),e(r,"ShellView",function(){this._pageIdMapping={},f(this,"_pageIdToIndexMapping",{})},null,{_nextPageId:1,_firstPageId:null,_initializeMobileOnce:!0,initialize:su,navigate:cu,awaitBrowserNavigation:au,completeNavigation:pu,onNavigationUnitClosed:uf,logout:gf,showProgress:ue,showPopup:le,closePopup:ru,commitActiveElement:ve,showNavigationMenu:ae}),kh=new r.ShellView,f(r,"shellView",kh),f(r.shell,"shellView",kh)}(),function(){function u(t){var i=this;n.call(i,t)}function f(){if(!t){var n=this.entity,r=null;!n||!this.valuePropertyName||(r=n[this.valuePropertyName]),i(this,r)}}function i(n,i){t=!0;try{var r,u=n._textElement;n._isViewCreated&&!!u&&(r=s(n,i),u.text(n.text=r))}finally{t=!1}}function o(n){var u=n.entity,f,r,t=null,e;!u||n.valueProperty||(f=u.details.getModel(),r=it(f,":@SummaryProperty"),!r||(t=r.property),t&&(n.valueProperty=t,n.valuePropertyName=ii(t.name),e=n.data,e.dataBind("value."+n.valuePropertyName,function(t){i(n,t)})))}function s(n,t){var r,i,u="";return n.valueProperty&&(r=gu(n.valueProperty,":@SupportedValue"),!r||(i=d(r).first(function(n){return n.value===t}),!i||(u=rr(i.displayName))),i||(u=af(t,n.valueProperty))),u}var n=r.ui.controls.Text,t;e("ui.controls","Summary",u,n,{controlName:"Summary",entity:b(function(){o(this)}),valueProperty:null,valuePropertyName:null,_refreshView:f},{_fillTemplate:n._fillTemplate,_skipEnhance:!0}),r.ui.controls.Summary.prototype._propertyMappings={value:"entity",properties:{tap:"tap"}}}(),function(){function pi(n){var t,i,f,r=0,u=n.children.length,e=n.controlModel;if(n._isHStretch){for(t=0;t<u;t++)i=n.children[t],f=i.properties[no],i._isHStretch&&r++;if(r>0&&r<u)return!0}return!1}function bi(n){var i=null,t;return t=!n?[]:n.split("."),t.length>1&&t[0]==="data"&&(t.shift(),i=t.join("/")),i}function p(n,t){var o=n.data,s=o.children[0],h=s.children,c=sf.ascending,f=h[t],r=bi(f.bindingPath),e,i,u;r||(e=f.valueModel,r=e.name),i=new wc(c,r,t,!0),n._orderBy&&n._orderBy.key===r&&(i.sortDirection=1-n._orderBy.sortDirection),u=n._collection,u.setOrderBy(i),u.load(),n._selectedRowIndex=0,ki(n,n._headerRowElement),di(n._headerRowElement,i),n._orderBy=i}function ki(n,t){if(n._orderBy){var r=t[n._orderBy.index],u=i(r).text();i(r).html(u.substring(0,u.length-1)),i(r).removeAttr("aria-label")}}function di(n,t){var f,e,r,o;t.sortDirection===sf.ascending?(f="&#9650;",e=u("accessibility_ascending_name")):(f="&#9660;",e=u("accessibility_descending_name")),r=n[t.index],o=i(r).text(),i(r).html(o+f),i(r).attr("aria-label",o+"  "+e)}function c(n,t){var r=n._collection,i;n._selectingElement=t,t&&(i=t.data(v)),r.selectedItem=i,n._selectingElement=null,n._selectedRowIndex=t?t[0].rowIndex:null,o(s.tableSelectedItemChanged)}function gi(n){var r=n._tableElement,u=r[0];po(r,n,"itemTap","ItemTapPromise",function(n){return i(n.target).closest(t).length}),r.keydown(function(t){var s=t.target,u,r,o,e,h;s.tagName.toLowerCase()==="th"&&(u=s);switch(t.keyCode){case i.mobile.keyCode.LEFT:u&&u.cellIndex>=1&&(o=u.parentElement,r=o.cells[u.cellIndex-1],f(n,r));break;case i.mobile.keyCode.RIGHT:u&&(o=u.parentElement,u.cellIndex<o.cells.length-1&&(r=o.cells[u.cellIndex+1],f(n,r)));break;case i.mobile.keyCode.UP:e=n._selectedRowIndex-1,e===0?f(n,n._headerRowElement[0]):e<0?(h=n._tableElement[0].rows.length-1,r=n._tableElement[0].rows[h],c(n,i(r))):(r=n._tableElement[0].rows[e],c(n,i(r)));break;case i.mobile.keyCode.DOWN:e=n._selectedRowIndex+1,e<n._tableElement[0].rows.length?(f(n,null),r=n._tableElement[0].rows[e],c(n,i(r))):f(n,n._headerRowElement[0])}}),r.keyup(function(t){var u=t.target,r;u.tagName.toLowerCase()==="th"&&(r=u);switch(t.keyCode){case i.mobile.keyCode.ENTER:r?p(n,r.cellIndex):te.selectFocusedItem(n);break;case i.mobile.keyCode.SPACE:r?p(n,r.cellIndex):te.toggleFocusedItem(n);break;case i.mobile.keyCode.TAB:f(n,n._headerRowElement[0])}})}function tr(n,t){i(n.focusableItem).blur(),n.focusableItem=i(t),n.focusCurrentItem()}function f(n,t){var r="ui-btn-active";n._selectedHeader&&i(n._selectedHeader).removeClass(r),t&&(n._selectedRowIndex&&c(n,null),i(t).addClass(r),n._selectedHeader=t,tr(n,t))}function at(n){o(s.tableLoadEnd),w(n),it(n,!1)}function vt(n){var t=n._collection,i=n.data.children.length-1,r=t.data;i<r.length?(it(n,!0),g(n,r.slice(i,i+t._loader._pageSize))):t.canLoadMore?(o(s.tableLoadLoadMore),t.loadMore(!0)):at(n)}function l(n){var i=n._collection,t,r;i&&i.state===h.idle&&(t=n._scrollHelper,r=n.data._isActivated&&n._tableElement.height()-t.viewTop<2*t.viewHeight,r?vt(n):at(n))}function w(n){var t=n._tableElement,r=t.next("."+rh);n.data.children.length===1?(y||(y="<div class='"+rh+"'>"+u("listView_no_items")+"<\/div>"),r.length||t.after(y),n.focusableItem=i()):r.remove()}function kt(n){var t,r;return ce(n.controlModel)?d(n.children).any(kt):(t=iu(n),t&&(r=gf[t],i.isFunction(r)))?!r._skipEnhance:!0}function g(r,u,f,e){function vt(){li(oi,vt),ni(function(){l(r)})}var y,h,b=u.length-1,k=r._tableElement,ft=r.data,a=ft.children[0],ht=a.children,yt=f===0&&k.find(t).length!==0,d,p,pt,g=r._rowTemplate,et=r._rowTemplateData,c,ct,nt,lt=i(".msls-empty",k),it=[],at=[],rt,ot=k.find("tbody")[0],st,ut;if(a){if(a._isHStretch=!0,b>=0){if(!g){for(et=r._rowTemplateData={},g=r._rowTemplate=n.document.createElement("tr"),c=i(g),d=c,c.attr("tabIndex","-1"),c.attr("data-icon","false"),pt=i.mobile.getInheritedTheme(k,wt),c.addClass("msls-tr msls-style ui-shadow ui-tr"),hr(d,a,et),r._itemHasAttachedLabel=!!c.find("."+bf).length,ct=c.children("td"),y=0;y<ht.length;y++)ct.eq(y).prepend(i("<b class='ui-table-cell-label'>"+ht[y].displayName+"<\/b>"));r._shouldEnhance=kt(a)}for(rt=document.createDocumentFragment(),h=0;h<=b;h++)at.push(ai.cloneContentItemTree(a,ft,u[h])),p=g.cloneNode(!0),it.push(p),rt.appendChild(p);for(st=yt?ot.firstChild:lt.length>0?lt[0]:null,st?ot.insertBefore(rt,st):ot.appendChild(rt),h=0;h<=b;h++)c=i(p=it[h]),c.data(v,u[h]),d=i(p),nt=new yi(d),nt.parent=r,nt.data=at[h],nt.attachView(et);ut=i(it),o(s.tableLoadEnhanceView),r._shouldEnhance&&ut.trigger("create"),tt(ci,r)}o(s.tableLoadApplyEnd),e||(b>=0?dt(oi,vt):ni(function(){l(r)})),w(r),it.length>0&&(r._itemHasAttachedLabel&&ne(ut),nr(ut,!0),yh&&!ft._isVStretch&&(nr(),tt("LayoutUpdateIgnoreNotification")))}}function ir(n,i){var f,s;if(i&&i.length!==0){for(var h=i.slice(0),e=n.data.children,u,c=[],l,o,r=1,a=e.length;r<a;r++)if(u=h.indexOf(e[r].data),u>-1&&(c.push(r),h.splice(u,1)),h.length===0)break;for(r=c.length-1;r>=0;r--)u=c[r],l=e[u],e.splice(u,1),o=l._view,f=o.getView(),f.attr(gt)==="0"&&(s=f.next(t),s.length||(s=f.prev(t)),n.focusableItem=s),f.remove(),o.parent=null,k(o),k(l);w(n)}}function rr(n,t){if(!n._collectionPromise){var r=t.action,i=t.items;r===st.add?g(n,i,t.newStartingIndex,!0):t.action===st.remove&&ir(n,i)}}function it(n,t){tt(hi,{table:n,isLoading:t})}function ti(n,t,i){n._collection&&(n._collectionPromise=null,o(s.tableLoadDataLoaded),g(n,t,i))}function ii(n){var t=n._collection,i=t.state,r=n._tableElement;r.next("."+rh).remove(),it(n,!0),i===h.loading?(n._collectionPromise=t.load(!0)).then(function(){ti(n,t.data)},function(){n._orderBy&&ur(n)}):(n._collectionPromise=t.loadMore(!0)).then(function(t){ti(n,t.items,t.startIndex)},function(){})}function ur(n){n._collection.setOrderBy(null),n._collection.load()}function ri(n){for(var i=n.data.children,r,t=i.length-1;t>=1;t--)r=i[t],k(r._view),k(r);i.length=1}function fr(n){var i=n._collection.state;i!==h.idle&&(i===h.loading&&(n._tbodyElement.children(t).remove(),ri(n)),ii(n))}function er(n){var f=n._tbodyElement,e=n._collection.selectedItem,r,u;n._collectionPromise||(e&&(r=n._selectingElement,n._selectingElement=null,r||f.children(t).each(function(){return(u=i(this),u.data(v)===e)?(r=u,!1):!0})),r&&r.hasClass(tu)||(f.find(t+"."+tu).removeClass(tu),r&&(r.addClass(tu),n.focusableItem=r,n.focusCurrentItem())))}function rt(n){var t=n._collection,r=t.state===h.idle;!t.loadError&&(!r||t.canLoadMore)?n._loadingIndicator||(n._loadingIndicator=i("<div class='"+dv+"'><\/div>").insertAfter(n._tableElement)):n._loadingIndicator&&(n._loadingIndicator.remove(),n._loadingIndicator=null)}function or(n){var r=n._collection,t;n._searchBox&&(t=!0,r.enableSearch?t=!0:(t=!1,n._searchBox.text=null),lt(n._searchBox.getView(),!t,bt),yo(i("input.id-element",n._searchBox.getView())),i("input.id-element",n._searchBox.getView()).focus())}function sr(t){var u=t._collection,f,e;if(u){ku(u,"collectionchange",t,function(n){rr(t,n.detail)}),rt(t),wi(u,"state",t,function(){fr(t),rt(t)}),wi(u,"loadError",t,function(){rt(t)}),wi(u,"selectedItem",t,function(){er(t)}),wi(u,"enableSearch",t,function(){or(t)}),o(s.tableLoadStart),f=t._scrollHelper=new r.ui.controls.ScrollHelper(t._tableElement,t.data),f.addEventListener("scroll",function(){et._currentNavigationOperation||l(t)}),u.state!==h.idle?ii(t):ui(function(){vt(t)},1),t._onWindowResize=function(){l(t)};i(n).on("resize",t._onWindowResize)}}function cr(n){for(var t,f=n.length,r=0,u=0,i=0;i<f;i++)t=n[i],t.widthSizingMode!==ut&&(r+=t.properties[ct]),u+=t._isHStretch?1:0;return u>0?r:0}function lr(n,t,i){n.html(t.displayName);var r=t.properties,u;return t.widthSizingMode===ut?n.css("width",r[ph]+"px"):i>0&&(u=100*r[ct]/i,n.css("width",u+"%")),r[ft]&&n.css("min-width",r[ft]+"px"),r[ht]&&n.css("max-width",r[ht]+"px"),n}var fi=ot("ShowHeader","RootCollectionControl"),t="tr.msls-tr",v="__entity",ei="<div class='msls-vauto "+ho+"'/><div class='msls-vauto "+co+"'/><div{0}><table class='msls-table ui-responsive table-stripe' data-role='table' data-inset='true' role='grid'><thead role='rowgroup'><\/thead><tbody role='rowgroup'><\/tbody><\/table><\/div>",y,si="tableInitialized",hi="tableLoading",ci="tableItemsAdded",ut=vi.fixedSize,ft=ot("MinWidth"),ht=ot("MaxWidth"),ct=ot("WeightedColumnWidth","ColumnsLayout"),ai=r.services.contentItemService,yi=r.ui.controls.ContentItemPresenter,h=r.VisualCollection.State;e("ui.controls","Table",function(n){te.call(this,n),this._itemHtmlSelector=t},te,{controlName:"Table",itemTap:b(),getItems:function(){return this._tbodyElement.children()},_attachViewCore:function(n){function h(){li(oi,h),ni(function(){sr(t)})}var t=this,v=t._tableElement=yt(t.getView(),"table"),y=t._tbodyElement=yt(t.getView(),"tbody"),u=t.data,p=u.children[0],c=t._collection=u.value,l,w=u.controlModel,e,o,f,s;l=u.screen.details.getModel(),t._headerLabel||(t._headerLabel=new r.ui.controls.Text(i("."+ho,t.getView())),e=u.properties[fi],lt(t._headerLabel.getView(),!e,bt),o=new r.data.DataBinding("data.displayName",t,"text",t._headerLabel,pt.oneWayFromSource),o.bind()),t._headerLabel.render(),t._headerRowElement=t._tableElement.find("thead").find("tr")[0].cells,t._selectedRowIndex=0,t._searchBox||(t._searchBox=new r.ui.controls.SearchTextBoxControl(i("."+co,t.getView())),f=t.data.value,!f||f.enableSearch||t._searchBox.getView().addClass(bt),s=new r.data.DataBinding("data.value.search",t,"text",t._searchBox,pt.twoWay),s.bind()),t._searchBox.render();t._searchBox.getView().on("focus","input.id-element",null,function(){t.focusableItem=i()});c&&(gi(t),dt(oi,h),tt(si,t),a.prototype._attachViewCore.call(t,n))},_customVisualStateHandler:function(n){n.state===nt.loading&&(n.custom=!0)},_onBeforeTap:function(t){var e;o(s.tableItemClicked);var l=this._tbodyElement,h=l[0],r=t.target,u=r.parentNode;if(n.getSelection&&n.getSelection().toString().length>0)return!1;if(r.tagName.toLowerCase()==="th")e=r.cellIndex,f(this,this._headerRowElement[e]),p(this,e);else if(r!==h){while(u!==h)r=u,u=r.parentNode;i(r).hasClass("msls-tr")&&c(this,i(r))}return!0},_onDispose:function(){var t=this,r=t._headerLabel,u=t._searchBox,f=t._globalStyle;r&&(k(r),t._headerLabel=null),u&&(k(u),t._searchBox=null),f&&(f.remove(),t._globalStyle=null),k(t._scrollHelper),t.itemTap=null,t._tableElement=null,t._tbodyElement=null,t._collection=null,t._scrollHelper=null,t._headerRowElement=null,t._selectedHeader=null,t._orderBy=null,i(n).off("resize",t._onWindowResize),t._onWindowResize=null,ri(t)}},{_fillTemplate:function(n,t){var u=" class='",h=t.children[0],o;u+=t._isHStretch?" msls-hstretch":" msls-hauto",u+=t._isVStretch?" msls-vstretch msls-vscroll":" msls-vauto",pi(h)||(u+=" "+ya),u+="'",i(du(ei,u)).appendTo(n),n.addClass(va),t._isHStretch&&n.find("table").addClass("msls-hstretch");for(var s=i("<tr>"),e=t.children[0].children,c=e.length,l=cr(e),f=0;f<c;f++)e[f].isVisible&&(o=i("<th tabIndex = -1>"),i(o).addClass("msls-table-header ui-btn ui-btn-up"+wt),o.attr("data-theme",wt),s.append(lr(o,e[f],l)));s.appendTo(n.find("thead"))}}),r.ui.controls.Table.prototype._propertyMappings={properties:{itemTap:"itemTap"}}}(),function(){function n(n){r.ui.controls.TextBox.call(this,n)}function t(n,t,r){var u='<input type="url" class="id-element" data-mini="true" />';i(u).appendTo(n),r.idElement=v(n,yt(n,".id-element"))}e("ui.controls","WebAddressEditor",n,r.ui.controls.TextBox,{controlName:"WebAddressEditor"},{_fillTemplate:t,_isFormElement:!0}),r.ui.controls.WebAddressEditor.prototype._propertyMappings={stringValue:"text",maxLength:"maxLength",properties:{placeholderText:"placeholderText"}}}(),function(){function n(n){r.ui.controls.Text.call(this,n)}function t(){var f=this.text,t=this.text,u=this._textElement,n,r;if(this._isViewCreated&&typeof f=="string"){n=f.match(/(.*?[^,]), (.+)/),n&&(f=n[2],t=n[1]),u.text(f),t=i.trim(t),n=t.match(/^https?:\/\/(.+)/i),n||(t="http://"+t),u.removeAttr("href"),u.removeClass("ui-link");try{r=document.createElement("a"),r.href=t,n=r.href.match(/^(https?:\/\/.+?)\/(.*)/i),r.href.match(/^https?:\/\/\//i)||r.href.toLowerCase()!==t.toLowerCase()&&(!n||(n[1]+n[2]).toLowerCase()!==t.toLowerCase())||(u.attr("href",r.href),u.addClass("ui-link"))}catch(e){}}}function u(n,t,r){i('<div class="msls-text"><a class="id-element" target="_blank"><\/a><\/div>').appendTo(n),r.idElement=v(n,yt(n,".id-element"))}e("ui.controls","WebAddressViewer",n,r.ui.controls.Text,{controlName:"WebAddressViewer",_refreshView:t},{_fillTemplate:u})}(),function(){var i=r.data.DataBindingMode,n=function(n,i){function f(n,t,i,u){var o,e,s;for(o in t)u.push(o),e=t[o],typeof e=="string"?(s=new r.data.DataBinding(u.join("."),i,e,n,pt.oneWayFromSource),s.bind()):f(n,e,i,u),u.pop()}function e(n,t,i){var r,u;for(r in t)u=t[r],typeof u=="string"?n[u]=rr(i[r]):r==="properties"?e(n,u,i[r]):f(n,u,i,[r])}function o(n,t,i){var u,f,e;for(u in t)f=t[u],e=new r.data.DataBinding(f,i,u,n),e.bind()}i&&(gf[n]=i),vv[n]=function(n,r,f){var a=r.screen.constructor,s,v=i,h,c,l;if(s=new v(n),s.data=r,h=s._propertyMappings,!h||e(s,h,r),c=s._editableProperties,!c||o(s,c,r),f!==t?s.attachView(f):s.render(),l=a[r.name+"_postRender"],!!l)try{l.call(null,n[0],r)}catch(y){r.displayError=u("customControl_postRenderError_2args",r.name,y)}return s}};n("DateTimePicker",r.ui.controls.DateTimePicker),n("DatePicker",r.ui.controls.DatePicker),n("Control",r.ui.Control),n("TextBox",r.ui.controls.TextBox),n("Text",r.ui.controls.Text),n("TextArea",r.ui.controls.TextArea),n("RowsLayout",r.ui.controls.RowsLayout),n("ColumnsLayout",r.ui.controls.ColumnsLayout),n("TableRowLayout",r.ui.controls.TableRowLayout),n("List",r.ui.controls.ListView),n("TileList",r.ui.controls.ListView),n("Table",r.ui.controls.Table),n("Button",r.ui.controls.Button),n("CommandBarButton",r.ui.controls.CommandBarButton),n("Summary",r.ui.controls.Summary),n("MoneyViewer",r.ui.controls.MoneyViewer),n("MoneyEditor",r.ui.controls.MoneyEditor),n("PercentViewer",r.ui.controls.PercentViewer),n("PercentEditor",r.ui.controls.PercentEditor),n("PersonViewer",r.ui.controls.PersonViewer),n("PersonPicker",r.ui.controls.PersonPicker),n("RelatedEntityPersonPicker",r.ui.controls.RelatedEntityPersonPicker),n("PhoneNumberViewer",r.ui.controls.PhoneNumberViewer),n("PhoneNumberEditor",r.ui.controls.PhoneNumberEditor),n("searchTextBoxControl",r.ui.controls.SearchTextBoxControl),n("EmailAddressEditor",r.ui.controls.EmailAddressEditor),n("EmailAddressViewer",r.ui.controls.EmailAddressViewer),n("CreateOrUploadDocument",r.ui.controls.CreateOrUploadDocument),n("DocumentSummary",r.ui.controls.DocumentSummary),n("FlipSwitchControl",r.ui.controls.FlipSwitchControl),n("WebAddressEditor",r.ui.controls.WebAddressEditor),n("WebAddressViewer",r.ui.controls.WebAddressViewer),n("Image",r.ui.controls.Image),n("ValueDropdown",r.ui.controls.Dropdown),n("DetailsModalPicker",r.ui.controls.ModalPicker),n("Paragraph",r.ui.controls.Paragraph),n("ValueCustomControl",r.ui.controls.CustomControl),n("GroupCustomControl",r.ui.controls.CustomControl),n("CollectionCustomControl",r.ui.controls.CustomControl),n("ScreenCustomControl",r.ui.controls.CustomControl),n("NoControl",r.ui.controls.NoControl)}(),n.msls||(n.msls=rt.getPrototypeOf(r))})(window);
// SIG // Begin signature block
// SIG // MIIaqwYJKoZIhvcNAQcCoIIanDCCGpgCAQExCzAJBgUr
// SIG // DgMCGgUAMGcGCisGAQQBgjcCAQSgWTBXMDIGCisGAQQB
// SIG // gjcCAR4wJAIBAQQQEODJBs441BGiowAQS9NQkAIBAAIB
// SIG // AAIBAAIBAAIBADAhMAkGBSsOAwIaBQAEFOHxCC+uoHDc
// SIG // KoYNPuM358RgI8+eoIIVgjCCBMMwggOroAMCAQICEzMA
// SIG // AAA0JDFAyaDBeY0AAAAAADQwDQYJKoZIhvcNAQEFBQAw
// SIG // dzELMAkGA1UEBhMCVVMxEzARBgNVBAgTCldhc2hpbmd0
// SIG // b24xEDAOBgNVBAcTB1JlZG1vbmQxHjAcBgNVBAoTFU1p
// SIG // Y3Jvc29mdCBDb3Jwb3JhdGlvbjEhMB8GA1UEAxMYTWlj
// SIG // cm9zb2Z0IFRpbWUtU3RhbXAgUENBMB4XDTEzMDMyNzIw
// SIG // MDgyNVoXDTE0MDYyNzIwMDgyNVowgbMxCzAJBgNVBAYT
// SIG // AlVTMRMwEQYDVQQIEwpXYXNoaW5ndG9uMRAwDgYDVQQH
// SIG // EwdSZWRtb25kMR4wHAYDVQQKExVNaWNyb3NvZnQgQ29y
// SIG // cG9yYXRpb24xDTALBgNVBAsTBE1PUFIxJzAlBgNVBAsT
// SIG // Hm5DaXBoZXIgRFNFIEVTTjpCOEVDLTMwQTQtNzE0NDEl
// SIG // MCMGA1UEAxMcTWljcm9zb2Z0IFRpbWUtU3RhbXAgU2Vy
// SIG // dmljZTCCASIwDQYJKoZIhvcNAQEBBQADggEPADCCAQoC
// SIG // ggEBAOUaB60KlizUtjRkyzQg8rwEWIKLtQncUtRwn+Jc
// SIG // LOf1aqT1ti6xgYZZAexJbCkEHvU4i1cY9cAyDe00kOzG
// SIG // ReW7igolqu+he4fY8XBnSs1q3OavBZE97QVw60HPq7El
// SIG // ZrurorcY+XgTeHXNizNcfe1nxO0D/SisWGDBe72AjTOT
// SIG // YWIIsY9REmWPQX7E1SXpLWZB00M0+peB+PyHoe05Uh/4
// SIG // 6T7/XoDJBjYH29u5asc3z4a1GktK1CXyx8iNr2FnitpT
// SIG // L/NMHoMsY8qgEFIRuoFYc0KE4zSy7uqTvkyC0H2WC09/
// SIG // L88QXRpFZqsC8V8kAEbBwVXSg3JCIoY6pL6TUAECAwEA
// SIG // AaOCAQkwggEFMB0GA1UdDgQWBBRfS0LeDLk4oNRmNo1W
// SIG // +3RZSWaBKzAfBgNVHSMEGDAWgBQjNPjZUkZwCu1A+3b7
// SIG // syuwwzWzDzBUBgNVHR8ETTBLMEmgR6BFhkNodHRwOi8v
// SIG // Y3JsLm1pY3Jvc29mdC5jb20vcGtpL2NybC9wcm9kdWN0
// SIG // cy9NaWNyb3NvZnRUaW1lU3RhbXBQQ0EuY3JsMFgGCCsG
// SIG // AQUFBwEBBEwwSjBIBggrBgEFBQcwAoY8aHR0cDovL3d3
// SIG // dy5taWNyb3NvZnQuY29tL3BraS9jZXJ0cy9NaWNyb3Nv
// SIG // ZnRUaW1lU3RhbXBQQ0EuY3J0MBMGA1UdJQQMMAoGCCsG
// SIG // AQUFBwMIMA0GCSqGSIb3DQEBBQUAA4IBAQAPQlCg1R6t
// SIG // Fz8fCqYrN4pnWC2xME8778JXaexl00zFUHLycyX25IQC
// SIG // xXUccVhDq/HJqo7fym9YPInnL816Nexm19Veuo6fV4aU
// SIG // EKDrUTetV/YneyNPGdjgbXYEJTBhEq2ljqMmtkjlU/JF
// SIG // TsW4iScQnanjzyPpeWyuk2g6GvMTxBS2ejqeQdqZVp7Q
// SIG // 0+AWlpByTK8B9yQG+xkrmLJVzHqf6JI6azF7gPMOnleL
// SIG // t+YFtjklmpeCKTaLOK6uixqs7ufsLr9LLqUHNYHzEyDq
// SIG // tEqTnr+cg1Z/rRUvXClxC5RnOPwwv2Xn9Tne6iLth4yr
// SIG // sju1AcKt4PyOJRUMIr6fDO0dMIIE7DCCA9SgAwIBAgIT
// SIG // MwAAALARrwqL0Duf3QABAAAAsDANBgkqhkiG9w0BAQUF
// SIG // ADB5MQswCQYDVQQGEwJVUzETMBEGA1UECBMKV2FzaGlu
// SIG // Z3RvbjEQMA4GA1UEBxMHUmVkbW9uZDEeMBwGA1UEChMV
// SIG // TWljcm9zb2Z0IENvcnBvcmF0aW9uMSMwIQYDVQQDExpN
// SIG // aWNyb3NvZnQgQ29kZSBTaWduaW5nIFBDQTAeFw0xMzAx
// SIG // MjQyMjMzMzlaFw0xNDA0MjQyMjMzMzlaMIGDMQswCQYD
// SIG // VQQGEwJVUzETMBEGA1UECBMKV2FzaGluZ3RvbjEQMA4G
// SIG // A1UEBxMHUmVkbW9uZDEeMBwGA1UEChMVTWljcm9zb2Z0
// SIG // IENvcnBvcmF0aW9uMQ0wCwYDVQQLEwRNT1BSMR4wHAYD
// SIG // VQQDExVNaWNyb3NvZnQgQ29ycG9yYXRpb24wggEiMA0G
// SIG // CSqGSIb3DQEBAQUAA4IBDwAwggEKAoIBAQDor1yiIA34
// SIG // KHy8BXt/re7rdqwoUz8620B9s44z5lc/pVEVNFSlz7SL
// SIG // qT+oN+EtUO01Fk7vTXrbE3aIsCzwWVyp6+HXKXXkG4Un
// SIG // m/P4LZ5BNisLQPu+O7q5XHWTFlJLyjPFN7Dz636o9UEV
// SIG // XAhlHSE38Cy6IgsQsRCddyKFhHxPuRuQsPWj/ov0DJpO
// SIG // oPXJCiHiquMBNkf9L4JqgQP1qTXclFed+0vUDoLbOI8S
// SIG // /uPWenSIZOFixCUuKq6dGB8OHrbCryS0DlC83hyTXEmm
// SIG // ebW22875cHsoAYS4KinPv6kFBeHgD3FN/a1cI4Mp68fF
// SIG // SsjoJ4TTfsZDC5UABbFPZXHFAgMBAAGjggFgMIIBXDAT
// SIG // BgNVHSUEDDAKBggrBgEFBQcDAzAdBgNVHQ4EFgQUWXGm
// SIG // WjNN2pgHgP+EHr6H+XIyQfIwUQYDVR0RBEowSKRGMEQx
// SIG // DTALBgNVBAsTBE1PUFIxMzAxBgNVBAUTKjMxNTk1KzRm
// SIG // YWYwYjcxLWFkMzctNGFhMy1hNjcxLTc2YmMwNTIzNDRh
// SIG // ZDAfBgNVHSMEGDAWgBTLEejK0rQWWAHJNy4zFha5TJoK
// SIG // HzBWBgNVHR8ETzBNMEugSaBHhkVodHRwOi8vY3JsLm1p
// SIG // Y3Jvc29mdC5jb20vcGtpL2NybC9wcm9kdWN0cy9NaWND
// SIG // b2RTaWdQQ0FfMDgtMzEtMjAxMC5jcmwwWgYIKwYBBQUH
// SIG // AQEETjBMMEoGCCsGAQUFBzAChj5odHRwOi8vd3d3Lm1p
// SIG // Y3Jvc29mdC5jb20vcGtpL2NlcnRzL01pY0NvZFNpZ1BD
// SIG // QV8wOC0zMS0yMDEwLmNydDANBgkqhkiG9w0BAQUFAAOC
// SIG // AQEAMdduKhJXM4HVncbr+TrURE0Inu5e32pbt3nPApy8
// SIG // dmiekKGcC8N/oozxTbqVOfsN4OGb9F0kDxuNiBU6fNut
// SIG // zrPJbLo5LEV9JBFUJjANDf9H6gMH5eRmXSx7nR2pEPoc
// SIG // sHTyT2lrnqkkhNrtlqDfc6TvahqsS2Ke8XzAFH9IzU2y
// SIG // RPnwPJNtQtjofOYXoJtoaAko+QKX7xEDumdSrcHps3Om
// SIG // 0mPNSuI+5PNO/f+h4LsCEztdIN5VP6OukEAxOHUoXgSp
// SIG // Rm3m9Xp5QL0fzehF1a7iXT71dcfmZmNgzNWahIeNJDD3
// SIG // 7zTQYx2xQmdKDku/Og7vtpU6pzjkJZIIpohmgjCCBbww
// SIG // ggOkoAMCAQICCmEzJhoAAAAAADEwDQYJKoZIhvcNAQEF
// SIG // BQAwXzETMBEGCgmSJomT8ixkARkWA2NvbTEZMBcGCgmS
// SIG // JomT8ixkARkWCW1pY3Jvc29mdDEtMCsGA1UEAxMkTWlj
// SIG // cm9zb2Z0IFJvb3QgQ2VydGlmaWNhdGUgQXV0aG9yaXR5
// SIG // MB4XDTEwMDgzMTIyMTkzMloXDTIwMDgzMTIyMjkzMlow
// SIG // eTELMAkGA1UEBhMCVVMxEzARBgNVBAgTCldhc2hpbmd0
// SIG // b24xEDAOBgNVBAcTB1JlZG1vbmQxHjAcBgNVBAoTFU1p
// SIG // Y3Jvc29mdCBDb3Jwb3JhdGlvbjEjMCEGA1UEAxMaTWlj
// SIG // cm9zb2Z0IENvZGUgU2lnbmluZyBQQ0EwggEiMA0GCSqG
// SIG // SIb3DQEBAQUAA4IBDwAwggEKAoIBAQCycllcGTBkvx2a
// SIG // YCAgQpl2U2w+G9ZvzMvx6mv+lxYQ4N86dIMaty+gMuz/
// SIG // 3sJCTiPVcgDbNVcKicquIEn08GisTUuNpb15S3GbRwfa
// SIG // /SXfnXWIz6pzRH/XgdvzvfI2pMlcRdyvrT3gKGiXGqel
// SIG // cnNW8ReU5P01lHKg1nZfHndFg4U4FtBzWwW6Z1KNpbJp
// SIG // L9oZC/6SdCnidi9U3RQwWfjSjWL9y8lfRjFQuScT5EAw
// SIG // z3IpECgixzdOPaAyPZDNoTgGhVxOVoIoKgUyt0vXT2Pn
// SIG // 0i1i8UU956wIAPZGoZ7RW4wmU+h6qkryRs83PDietHdc
// SIG // pReejcsRj1Y8wawJXwPTAgMBAAGjggFeMIIBWjAPBgNV
// SIG // HRMBAf8EBTADAQH/MB0GA1UdDgQWBBTLEejK0rQWWAHJ
// SIG // Ny4zFha5TJoKHzALBgNVHQ8EBAMCAYYwEgYJKwYBBAGC
// SIG // NxUBBAUCAwEAATAjBgkrBgEEAYI3FQIEFgQU/dExTtMm
// SIG // ipXhmGA7qDFvpjy82C0wGQYJKwYBBAGCNxQCBAweCgBT
// SIG // AHUAYgBDAEEwHwYDVR0jBBgwFoAUDqyCYEBWJ5flJRP8
// SIG // KuEKU5VZ5KQwUAYDVR0fBEkwRzBFoEOgQYY/aHR0cDov
// SIG // L2NybC5taWNyb3NvZnQuY29tL3BraS9jcmwvcHJvZHVj
// SIG // dHMvbWljcm9zb2Z0cm9vdGNlcnQuY3JsMFQGCCsGAQUF
// SIG // BwEBBEgwRjBEBggrBgEFBQcwAoY4aHR0cDovL3d3dy5t
// SIG // aWNyb3NvZnQuY29tL3BraS9jZXJ0cy9NaWNyb3NvZnRS
// SIG // b290Q2VydC5jcnQwDQYJKoZIhvcNAQEFBQADggIBAFk5
// SIG // Pn8mRq/rb0CxMrVq6w4vbqhJ9+tfde1MOy3XQ60L/svp
// SIG // LTGjI8x8UJiAIV2sPS9MuqKoVpzjcLu4tPh5tUly9z7q
// SIG // QX/K4QwXaculnCAt+gtQxFbNLeNK0rxw56gNogOlVuC4
// SIG // iktX8pVCnPHz7+7jhh80PLhWmvBTI4UqpIIck+KUBx3y
// SIG // 4k74jKHK6BOlkU7IG9KPcpUqcW2bGvgc8FPWZ8wi/1wd
// SIG // zaKMvSeyeWNWRKJRzfnpo1hW3ZsCRUQvX/TartSCMm78
// SIG // pJUT5Otp56miLL7IKxAOZY6Z2/Wi+hImCWU4lPF6H0q7
// SIG // 0eFW6NB4lhhcyTUWX92THUmOLb6tNEQc7hAVGgBd3TVb
// SIG // Ic6YxwnuhQ6MT20OE049fClInHLR82zKwexwo1eSV32U
// SIG // jaAbSANa98+jZwp0pTbtLS8XyOZyNxL0b7E8Z4L5UrKN
// SIG // MxZlHg6K3RDeZPRvzkbU0xfpecQEtNP7LN8fip6sCvsT
// SIG // J0Ct5PnhqX9GuwdgR2VgQE6wQuxO7bN2edgKNAltHIAx
// SIG // H+IOVN3lofvlRxCtZJj/UBYufL8FIXrilUEnacOTj5XJ
// SIG // jdibIa4NXJzwoq6GaIMMai27dmsAHZat8hZ79haDJLmI
// SIG // z2qoRzEvmtzjcT3XAH5iR9HOiMm4GPoOco3Boz2vAkBq
// SIG // /2mbluIQqBC0N1AI1sM9MIIGBzCCA++gAwIBAgIKYRZo
// SIG // NAAAAAAAHDANBgkqhkiG9w0BAQUFADBfMRMwEQYKCZIm
// SIG // iZPyLGQBGRYDY29tMRkwFwYKCZImiZPyLGQBGRYJbWlj
// SIG // cm9zb2Z0MS0wKwYDVQQDEyRNaWNyb3NvZnQgUm9vdCBD
// SIG // ZXJ0aWZpY2F0ZSBBdXRob3JpdHkwHhcNMDcwNDAzMTI1
// SIG // MzA5WhcNMjEwNDAzMTMwMzA5WjB3MQswCQYDVQQGEwJV
// SIG // UzETMBEGA1UECBMKV2FzaGluZ3RvbjEQMA4GA1UEBxMH
// SIG // UmVkbW9uZDEeMBwGA1UEChMVTWljcm9zb2Z0IENvcnBv
// SIG // cmF0aW9uMSEwHwYDVQQDExhNaWNyb3NvZnQgVGltZS1T
// SIG // dGFtcCBQQ0EwggEiMA0GCSqGSIb3DQEBAQUAA4IBDwAw
// SIG // ggEKAoIBAQCfoWyx39tIkip8ay4Z4b3i48WZUSNQrc7d
// SIG // GE4kD+7Rp9FMrXQwIBHrB9VUlRVJlBtCkq6YXDAm2gBr
// SIG // 6Hu97IkHD/cOBJjwicwfyzMkh53y9GccLPx754gd6udO
// SIG // o6HBI1PKjfpFzwnQXq/QsEIEovmmbJNn1yjcRlOwhtDl
// SIG // KEYuJ6yGT1VSDOQDLPtqkJAwbofzWTCd+n7Wl7PoIZd+
// SIG // +NIT8wi3U21StEWQn0gASkdmEScpZqiX5NMGgUqi+YSn
// SIG // EUcUCYKfhO1VeP4Bmh1QCIUAEDBG7bfeI0a7xC1Un68e
// SIG // eEExd8yb3zuDk6FhArUdDbH895uyAc4iS1T/+QXDwiAL
// SIG // AgMBAAGjggGrMIIBpzAPBgNVHRMBAf8EBTADAQH/MB0G
// SIG // A1UdDgQWBBQjNPjZUkZwCu1A+3b7syuwwzWzDzALBgNV
// SIG // HQ8EBAMCAYYwEAYJKwYBBAGCNxUBBAMCAQAwgZgGA1Ud
// SIG // IwSBkDCBjYAUDqyCYEBWJ5flJRP8KuEKU5VZ5KShY6Rh
// SIG // MF8xEzARBgoJkiaJk/IsZAEZFgNjb20xGTAXBgoJkiaJ
// SIG // k/IsZAEZFgltaWNyb3NvZnQxLTArBgNVBAMTJE1pY3Jv
// SIG // c29mdCBSb290IENlcnRpZmljYXRlIEF1dGhvcml0eYIQ
// SIG // ea0WoUqgpa1Mc1j0BxMuZTBQBgNVHR8ESTBHMEWgQ6BB
// SIG // hj9odHRwOi8vY3JsLm1pY3Jvc29mdC5jb20vcGtpL2Ny
// SIG // bC9wcm9kdWN0cy9taWNyb3NvZnRyb290Y2VydC5jcmww
// SIG // VAYIKwYBBQUHAQEESDBGMEQGCCsGAQUFBzAChjhodHRw
// SIG // Oi8vd3d3Lm1pY3Jvc29mdC5jb20vcGtpL2NlcnRzL01p
// SIG // Y3Jvc29mdFJvb3RDZXJ0LmNydDATBgNVHSUEDDAKBggr
// SIG // BgEFBQcDCDANBgkqhkiG9w0BAQUFAAOCAgEAEJeKw1wD
// SIG // RDbd6bStd9vOeVFNAbEudHFbbQwTq86+e4+4LtQSooxt
// SIG // YrhXAstOIBNQmd16QOJXu69YmhzhHQGGrLt48ovQ7DsB
// SIG // 7uK+jwoFyI1I4vBTFd1Pq5Lk541q1YDB5pTyBi+FA+mR
// SIG // KiQicPv2/OR4mS4N9wficLwYTp2OawpylbihOZxnLcVR
// SIG // DupiXD8WmIsgP+IHGjL5zDFKdjE9K3ILyOpwPf+FChPf
// SIG // wgphjvDXuBfrTot/xTUrXqO/67x9C0J71FNyIe4wyrt4
// SIG // ZVxbARcKFA7S2hSY9Ty5ZlizLS/n+YWGzFFW6J1wlGys
// SIG // OUzU9nm/qhh6YinvopspNAZ3GmLJPR5tH4LwC8csu89D
// SIG // s+X57H2146SodDW4TsVxIxImdgs8UoxxWkZDFLyzs7BN
// SIG // Z8ifQv+AeSGAnhUwZuhCEl4ayJ4iIdBD6Svpu/RIzCzU
// SIG // 2DKATCYqSCRfWupW76bemZ3KOm+9gSd0BhHudiG/m4LB
// SIG // J1S2sWo9iaF2YbRuoROmv6pH8BJv/YoybLL+31HIjCPJ
// SIG // Zr2dHYcSZAI9La9Zj7jkIeW1sMpjtHhUBdRBLlCslLCl
// SIG // eKuzoJZ1GtmShxN1Ii8yqAhuoFuMJb+g74TKIdbrHk/J
// SIG // mu5J4PcBZW+JC33Iacjmbuqnl84xKf8OxVtc2E0bodj6
// SIG // L54/LlUWa8kTo/0xggSVMIIEkQIBATCBkDB5MQswCQYD
// SIG // VQQGEwJVUzETMBEGA1UECBMKV2FzaGluZ3RvbjEQMA4G
// SIG // A1UEBxMHUmVkbW9uZDEeMBwGA1UEChMVTWljcm9zb2Z0
// SIG // IENvcnBvcmF0aW9uMSMwIQYDVQQDExpNaWNyb3NvZnQg
// SIG // Q29kZSBTaWduaW5nIFBDQQITMwAAALARrwqL0Duf3QAB
// SIG // AAAAsDAJBgUrDgMCGgUAoIGuMBkGCSqGSIb3DQEJAzEM
// SIG // BgorBgEEAYI3AgEEMBwGCisGAQQBgjcCAQsxDjAMBgor
// SIG // BgEEAYI3AgEVMCMGCSqGSIb3DQEJBDEWBBQFkHciHdE1
// SIG // 8vgI1J8Oq/2o59LQMDBOBgorBgEEAYI3AgEMMUAwPqAk
// SIG // gCIAbQBzAGwAcwAtADIALgA1AC4AMAAuAG0AaQBuAC4A
// SIG // agBzoRaAFGh0dHA6Ly9taWNyb3NvZnQuY29tMA0GCSqG
// SIG // SIb3DQEBAQUABIIBAN7Hf5aMQZuSFj+IR9bhuSv0fZiN
// SIG // oGfJ2GUaAghlYPGOaqYUyNBf73ckz8yNvTyXH+QS72w3
// SIG // QjuIWVtda7qSmL3IlIHiC+AWxuU3dP5F/jScDadkSW9C
// SIG // Ncagz3aE5rKJEDNpijnBWfLwSlrFJurlbUiAQ+qaK2Jk
// SIG // SPe174NcDUoaJi4i5drCORbGWeVOHG3HNEshntmyMKpu
// SIG // lofH3aqkAAKHC2RhCy8q4cJ28f9jnSR8GxUWrAAR1jQ1
// SIG // AS3ALWMk+0A6DhYMZz3RfL6fh2HVhX4dgytNL/HGXt0T
// SIG // m1jeoDbJ67EI2vMA/ON5AbqCi17FT56MvVSJG7sWunml
// SIG // SE2iK6ihggIoMIICJAYJKoZIhvcNAQkGMYICFTCCAhEC
// SIG // AQEwgY4wdzELMAkGA1UEBhMCVVMxEzARBgNVBAgTCldh
// SIG // c2hpbmd0b24xEDAOBgNVBAcTB1JlZG1vbmQxHjAcBgNV
// SIG // BAoTFU1pY3Jvc29mdCBDb3Jwb3JhdGlvbjEhMB8GA1UE
// SIG // AxMYTWljcm9zb2Z0IFRpbWUtU3RhbXAgUENBAhMzAAAA
// SIG // NCQxQMmgwXmNAAAAAAA0MAkGBSsOAwIaBQCgXTAYBgkq
// SIG // hkiG9w0BCQMxCwYJKoZIhvcNAQcBMBwGCSqGSIb3DQEJ
// SIG // BTEPFw0xNDA0MjIwNzAxNDNaMCMGCSqGSIb3DQEJBDEW
// SIG // BBSoiMaYgvM+emMyuXwbm+6qkpe2uDANBgkqhkiG9w0B
// SIG // AQUFAASCAQCcivcM+PUWANVW0/WSrMyzVtMdHmer8p3j
// SIG // S8uAxF1DpstNSdemgeqZKxohVVEwXKoW+BgF9UwSQiK6
// SIG // GxNtgy5QDoXsMmNa/G8KgRuysjtVeQcI/ujJsLzhC+Xm
// SIG // /T2l4lGcLX/ahrYJjLHRoFA7vDVp2IoJ1KxRYzQ70+wX
// SIG // uVdtgIi6+DrkRie0IAXYKAY1wJVrY9e5p9drFKD5OcXq
// SIG // y4qOOCeDeEBUIjbl9Z95T6SdBCtS01FkLpCSXr9Vw1nc
// SIG // bIrq8c1fNRHA/SY50f+RmCBnvCJVMjZasqRGNPSKcq0d
// SIG // eXODQxVA7J9aLbP/uaFL8hSprv+HoHSDGVSWWo0HuSef
// SIG // End signature block
